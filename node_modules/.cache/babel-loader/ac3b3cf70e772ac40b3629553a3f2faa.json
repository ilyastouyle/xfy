{"ast":null,"code":"var _jsxFileName = \"/var/www/html/xfy/src/App.js\";\nimport React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes, faCog, faClone, faSave, faCheck, faAngleUp, faAngleDown, faAngleLeft, faAngleRight, faPencilAlt, faSearchPlus, faSearchMinus, faArrowLeft, faArrowRight, faArrowUp, faArrowDown, faPlus, faPlay, faPause, faStop } from '@fortawesome/free-solid-svg-icons';\nimport Functions from './Library';\nimport Animations from './Animations';\nimport { SketchPicker } from 'react-color';\nimport './stylesheets/App.css'; //Number of subdivisions of X (and thus Y) and Number of subdivisions for delimiters  \n\nlet nbSubdiv = 500,\n    nbSubdivDelim = 50;\nlet curves = [[], []],\n    animations = [],\n    delimiters = []; //Global variables linked to canvas (for execution, pausing and stopping animation)\n\nlet frameDuration = 0,\n    totalDuration = 0,\n    k = 0,\n    mainLoop = 0,\n    paused = false; //Function for finding animation involving given curve indices\n\nfunction findInd(cInd) {\n  let indice = [];\n  animations.forEach((el, ind) => {\n    el.curvInd.forEach((element, index) => {\n      if (element[0] === cInd[0] && element[1] === cInd[1]) {\n        indice[0] = ind;\n        indice[1] = index;\n      }\n\n      ;\n    });\n  });\n  return indice;\n}\n\nfunction cloneCurveInto(curve, newCurve) {\n  curve.X.forEach((el, ind) => newCurve.X[ind] = el);\n  curve.Y.forEach((el, ind) => newCurve.Y[ind] = el);\n  newCurve.color = curve.color;\n  newCurve.width = curve.width;\n  curve.dashes.forEach((el, ind) => newCurve.dashes[ind] = el);\n  curve.expressions.forEach((el, ind) => newCurve.expressions[ind] = el);\n  newCurve.delimiters = new Array(curve.delimiters.length);\n  curve.delimiters.forEach((el, ind) => {\n    let tempDelim = {};\n    tempDelim.x = el.x;\n    tempDelim.width = el.width;\n    tempDelim.color = el.color;\n    tempDelim.dashes = new Array(el.dashes.length);\n    el.dashes.forEach((elem, ind_dash) => tempDelim.dashes[ind_dash] = elem);\n    tempDelim.paramA = el.paramA;\n    tempDelim.paramB = el.paramB;\n    newCurve.delimiters[ind] = tempDelim;\n  });\n} //Function for computing and return delimiters, takes in :\n//delimiter width, index, place of delimiter between 0 & nbSubdiv, \n//and number of subdivisions of the delimiter curve (the line), dashes, color\n\n\nfunction createDelim(width, cInd, x, nbS, dashes, color) {\n  let expression = curves[cInd[0]][cInd[1]].expressions[0] != null ? Functions.evaluateInput(curves[cInd[0]][cInd[1]].expressions[0]) : 0;\n  let y = !isNaN(eval(expression)) ? eval(expression) : 0;\n  let delimiterX = Functions.subdivide(x, x, nbS);\n  let delimiterY = Functions.subdivide(0, y, nbS);\n  return {\n    x: x,\n    width: width,\n    delimiterX: delimiterX,\n    delimiterY: delimiterY,\n    color: color,\n    dashes: dashes\n  };\n}\n\nclass Curve2d {\n  constructor(X, Y, color, width, dashes, delimiters) {\n    this.X = X;\n    this.Y = Y;\n    this.color = \"#f3f1f3\";\n    this.width = width;\n    this.dashes = dashes;\n    this.expressions = [null, null, null, null];\n    this.delimiters = [];\n  }\n\n}\n\nclass FloatInput extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({\n        input: e.target.value\n      }, () => {\n        try {\n          let n = 0;\n          let test = eval(this.state.input);\n          this.setState({\n            error: isNaN(test) && this.state.input != \"\"\n          }, () => {\n            this.props.update(this.state);\n          });\n        } catch (error) {\n          this.setState({\n            error: true\n          }, () => {\n            this.props.update(this.state);\n          });\n        }\n      }, () => {//console.log(this.state.error);\n      });\n    };\n\n    this.handleKeyPress = e => {\n      if (isNaN(e.key) && e.key != '.' && e.key != '-' && e.key != '*' && e.key != '/' && e.key != '(' && e.key != ')') {\n        if (!!this.props.exceptionKeys) {\n          if (!this.props.exceptionKeys.includes(e.key)) {\n            e.preventDefault();\n          }\n        } else {\n          e.preventDefault();\n        }\n      } else {\n        if (e.key == '.' && this.state.input[this.state.input.length - 1] == '.') e.preventDefault();\n        if (e.key == '-' && this.state.input.length >= 1) e.preventDefault();\n      }\n    };\n\n    this.state = {\n      input: this.props.value,\n      error: false\n    };\n  }\n\n  render() {\n    return React.createElement(\"input\", {\n      className: \"floatInput\" + (this.state.error ? \"error\" : \"\"),\n      placeholder: this.props.placeholder,\n      value: this.state.input,\n      onChange: this.handleChange,\n      onKeyPress: this.handleKeyPress,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    });\n  }\n\n}\n\nclass ThicknessInput extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleThickChange = e => {\n      if (!isNaN(e.target.value) && e.target.value != \"\") {\n        this.setState({\n          thickness: parseInt(e.target.value)\n        }, () => {\n          this.props.update(this.state.thickness);\n        });\n      }\n    };\n\n    this.increaseThickness = () => this.setState({\n      thickness: this.state.thickness + 1\n    }, () => {\n      this.props.update(this.state.thickness);\n    });\n\n    this.decreaseThickness = () => {\n      if (this.state.thickness > 1) this.setState({\n        thickness: this.state.thickness - 1\n      }, () => {\n        this.props.update(this.state.thickness);\n      });\n    };\n\n    this.state = {\n      thickness: this.props.thickness\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"thicknessInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"thickness\",\n      value: this.state.thickness,\n      onChange: this.handleThickChange,\n      maxLength: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"thicker\",\n      onClick: this.increaseThickness,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"+\")), React.createElement(\"button\", {\n      className: \"thinner\",\n      onClick: this.decreaseThickness,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"-\")));\n  }\n\n}\n\nclass Animation {\n  /* \n  \ttype: type of animation (Integer) \n  \tanchor: starting point in time (Float)\n  \tduration: duration of animation in seconds (Float)\n  \tfps: frames per second (Integer)\n  \tcurvInd: the curves involved in the animation ([[0 or 1, index],[...],...])\n  */\n  constructor(type, anchor, duration, fps, curvInd) {\n    this.type = type;\n    this.curvInd = curvInd;\n    this.animCurves = [];\n    this.anchor = anchor;\n    this.duration = duration;\n    this.fps = fps;\n  }\n\n  execute(steps, thestep, canvasDim, frameNumber, context, executeBefore = () => {}) {\n    for (let i = 0; i < this.curvInd.length; i++) {\n      this.animCurves.push(curves[this.curvInd[i][0]][this.curvInd[i][1]]);\n    }\n\n    switch (this.type) {\n      //no animation\n      case 0:\n        executeBefore();\n        let delim = [];\n        this.animCurves[0].delimiters.forEach(el => {\n          if (el.paramA == \"\") {\n            delim.push(createDelim(el.width, this.curvInd[0], parseFloat(el.x), nbSubdivDelim, el.dashes, el.color));\n          } else {\n            for (let n = parseInt(el.paramA); n <= parseInt(el.paramB); n++) {\n              delim.push(createDelim(el.width, this.curvInd[0], eval(el.x), nbSubdivDelim, el.dashes, el.color));\n            }\n          }\n        });\n        Functions.drawCurve(this.animCurves[0].width, this.animCurves[0].dashes, this.animCurves[0].X, this.animCurves[0].Y, steps, thestep, canvasDim[0] / 2, canvasDim[1] / 2, this.animCurves[0].color, context); //let delimitercreateDelim(2, this.curvInd[0], 0, 50, [1, 1], this.animCurves[0].color);\n        //Draw Delimiters\n\n        for (let i = 0; i < delim.length; i++) {\n          Functions.drawCurve(delim[i].width, delim[i].dashes, delim[i].delimiterX, delim[i].delimiterY, steps, thestep, canvasDim[0] / 2, canvasDim[1] / 2, delim[i].color, context);\n        } //Functions.drawCurve(2, [1, 2], this.delimitersLX, this.delimitersLY, steps, thestep, canvasDim[0]/2, canvasDim[1]/2, this.animCurves[0].color, context);\n        //Functions.drawCurve(2, [1, 2], this.delimitersRX, this.delimitersRY, steps, thestep, canvasDim[0]/2, canvasDim[1]/2, this.animCurves[0].color, context);\n\n\n        break;\n      //morph curve1 into curve2 \n\n      case 1:\n        Animations.morph(this.animCurves, frameNumber, this.duration * this.fps, (tab1, tab2) => {\n          executeBefore();\n          Functions.drawCurve(this.animCurves[0].width, this.animCurves[0].dashes, tab1, tab2, steps, thestep, canvasDim[0] / 2, canvasDim[1] / 2, this.animCurves[0], context);\n        });\n        break;\n    }\n  }\n\n}\n\n;\n\nclass ColorPicker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      displayColorPicker: false,\n      color: this.props.color\n    };\n\n    this.handleClick = () => {\n      this.setState({\n        displayColorPicker: !this.state.displayColorPicker\n      }, () => {\n        if (this.state.displayColorPicker) {\n          let yPosition = this.selector.current.getBoundingClientRect().y;\n          let windowHeight = window.document.body.offsetHeight;\n          let selectorHeight = this.selector.current.offsetHeight;\n\n          if (yPosition + selectorHeight >= windowHeight) {\n            this.selector.current.style.bottom = windowHeight - yPosition + 40 + \"px\";\n          } //console.log();\n          //if(this.state.displayColorPicker) this.selector.current.style.border = \"6px solid black\";}\n\n        }\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        displayColorPicker: false\n      });\n    };\n\n    this.handleChange = color => {\n      let colorRgb = color.rgb;\n      this.setState({\n        color: color.hex\n      }, () => this.props.update(color.hex));\n    };\n\n    this.selector = React.createRef();\n  }\n\n  render() {\n    const styles = {\n      view: {\n        backgroundColor: this.state.color\n      }\n    };\n    return React.createElement(\"span\", {\n      className: \"colorWrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      style: styles.view,\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      style: styles.button,\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      style: styles.icon,\n      icon: this.state.displayColorPicker ? faAngleUp : faAngleDown,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }))), this.state.displayColorPicker ? React.createElement(\"div\", {\n      ref: this.selector,\n      className: \"popover\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"saveColor\",\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, \" Save \"), React.createElement(SketchPicker, {\n      color: this.state.color,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    })) : null);\n  }\n\n}\n\nclass Delimiter extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleDashInput = e => {\n      if (e.target.value == \"\") {\n        this.setState({\n          dashes: [\"a\", this.state.dashes[1]]\n        });\n      } else {\n        if (!isNaN(e.target.value)) {\n          this.setState({\n            dashes: [parseInt(e.target.value), this.state.dashes[1]]\n          });\n        }\n      }\n    };\n\n    this.handleSpacingInput = e => {\n      if (e.target.value == \"\") {\n        this.setState({\n          dashes: [this.state.dashes[0], \"a\"]\n        });\n      } else {\n        if (!isNaN(e.target.value)) {\n          this.setState({\n            dashes: [this.state.dashes[0], parseInt(e.target.value)]\n          });\n        }\n      }\n    };\n\n    this.updateX = data => {\n      this.setState({\n        x: data\n      });\n    };\n\n    this.handleWChange = width => {\n      this.setState({\n        width: width\n      });\n    };\n\n    this.handleColorChange = color => {\n      this.setState({\n        color: color\n      });\n    };\n\n    this.delete = () => {\n      this.props.delete(this.props.ind);\n    };\n\n    this.toggleParameter = () => {\n      this.setState({\n        displayParameter: !this.state.displayParameter\n      });\n    };\n\n    this.updateParamA = data => {\n      this.setState({\n        paramA: data\n      });\n    };\n\n    this.updateParamB = data => {\n      this.setState({\n        paramB: data\n      });\n    };\n\n    this.componentDidMount = () => {\n      window.MathJax.Hub.Queue([\"Typeset\", window.MathJax.Hub, \"delimWrapper\"]);\n    };\n\n    this.componentDidUpdate = () => {\n      if (!this.state.x.error && this.state.x.input != \"\") {\n        if (this.state.paramA.input != \"\" && this.state.paramB.input != \"\") {\n          if (!this.state.paramA.error && !this.state.paramB.error) {\n            let tempState = {};\n            tempState.x = this.state.x.input.trim();\n            tempState.width = this.state.width;\n            tempState.color = this.state.color;\n            tempState.dashes = new Array(2);\n            this.state.dashes.forEach((el, ind) => tempState.dashes[ind] = el);\n            tempState.paramA = this.state.x.input.toString().includes('n') ? this.state.paramA.input.trim() : \"\";\n            tempState.paramB = this.state.x.input.toString().includes('n') ? this.state.paramB.input.trim() : \"\";\n            this.props.update(this.props.ind, tempState);\n          }\n        } else {\n          let tempState = {};\n          tempState.x = this.state.x.input.trim();\n          tempState.width = this.state.width;\n          tempState.color = this.state.color;\n          tempState.dashes = new Array(2);\n          this.state.dashes.forEach((el, ind) => tempState.dashes[ind] = el);\n          tempState.paramA = this.state.x.input.toString().includes('n') ? this.state.paramA.input.trim() : \"\";\n          tempState.paramB = this.state.x.input.toString().includes('n') ? this.state.paramB.input.trim() : \"\";\n          this.props.update(this.props.ind, tempState);\n        }\n      }\n    };\n\n    this.state = {\n      x: {\n        input: this.props.x,\n        error: false\n      },\n      width: this.props.width,\n      dashes: this.props.dashes,\n      color: this.props.color,\n      displayParameter: false,\n      paramA: {\n        input: this.props.paramA,\n        error: false\n      },\n      paramB: {\n        input: this.props.paramB,\n        error: false\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"delimWrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"inpWrapper xPosition\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, React.createElement(FloatInput, {\n      value: this.state.x.input,\n      update: this.updateX,\n      exceptionKeys: [\"n\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    })), React.createElement(ThicknessInput, {\n      thickness: this.state.width,\n      update: this.handleWChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"inpWrapper dashes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"dash\",\n      placeholder: \"1\",\n      value: this.state.dashes[0] == \"a\" ? \"\" : this.state.dashes[0],\n      onChange: this.handleDashInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"inpWrapper spacing\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"spacing\",\n      placeholder: \"0\",\n      value: this.state.dashes[1] == \"a\" ? \"\" : this.state.dashes[1],\n      onChange: this.handleSpacingInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    })), React.createElement(ColorPicker, {\n      update: this.handleColorChange,\n      color: this.state.color,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"delete\",\n      onClick: this.delete,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faTimes,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"parameter\",\n      style: {\n        display: this.state.x.input.toString().includes('n') ? \"inline-block\" : \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panel\",\n      style: {\n        display: this.state.displayParameter ? \"inline-block\" : \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }, \"\\\\( n \\\\in \\\\hspace\", \"6px\", \" [ \\\\)\"), React.createElement(FloatInput, {\n      placeholder: \"a\",\n      value: this.state.paramA.input,\n      update: this.updateParamA,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365\n      },\n      __self: this\n    }, \"\\\\( , \\\\)\"), React.createElement(FloatInput, {\n      placeholder: \"b\",\n      value: this.state.paramB.input,\n      update: this.updateParamB,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367\n      },\n      __self: this\n    }, \"\\\\( ] \\\\hspace\", \"6px\", \" \\\\cap \\\\hspace\", \"6px\", \" \\\\mathbb{Z} \\\\)\"), React.createElement(\"button\", {\n      className: \"check\",\n      onClick: this.toggleParameter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faCheck,\n      size: \"xs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368\n      },\n      __self: this\n    })))), !this.state.displayParameter ? React.createElement(\"button\", {\n      className: this.state.displayParameter ? \"toggleParameter dropped\" : \"toggleParameter\",\n      onClick: this.toggleParameter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: this.state.displayParameter ? faAngleUp : faAngleDown,\n      size: \"xs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    }))) : null)));\n  }\n\n} //Wrapper Curve: Template for Functional and Parameterized Curves\n\n\nclass WrCurve extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.previous = () => {\n      this.setState({\n        cEdit: (this.state.cEdit - 1) % 5\n      });\n      this.input.value = \"\";\n    };\n\n    this.next = () => {\n      this.setState({\n        modified: this.state.modified.map((el, ind) => {\n          return ind == this.state.cEdit - 1 ? true : el;\n        })\n      });\n\n      try {\n        let expressions = curves[this.props.type][this.props.cindex].expressions;\n\n        if (this.props.type == 0) {\n          if (this.state.cEdit == 1) {\n            var x = 0;\n          }\n        } else {\n          if (this.state.cEdit == 1 || this.state.cEdit == 2) {\n            var t = 0;\n          }\n        }\n\n        let test = parseFloat(eval(Functions.evaluateInput(this.input.value)));\n\n        if (!isNaN(test)) {\n          this.setState({\n            cEdit: (this.state.cEdit + 1) % 5\n          }, () => {\n            if (this.props.type === 0) {\n              if (!!expressions[1] && !!expressions[2]) {\n                curves[this.props.type][this.props.cindex].X = Functions.subdivide(parseFloat(expressions[1]), parseFloat(expressions[2]), nbSubdiv);\n\n                for (let i = 0; i < curves[this.props.type][this.props.cindex].X.length; i++) {\n                  let x = curves[this.props.type][this.props.cindex].X[i];\n                  curves[this.props.type][this.props.cindex].Y[i] = eval(Functions.evaluateInput(expressions[0]));\n                }\n              }\n            } else {\n              if (!!expressions[1] && !!expressions[2] && !!expressions[3]) {\n                //Subdivided t parameter values tab\n                let tab1 = Functions.subdivide(parseFloat(expressions[2]), parseFloat(expressions[3]), nbSubdiv);\n\n                for (let i = 0; i < tab1.length; i++) {\n                  let t = tab1[i];\n                  curves[this.props.type][this.props.cindex].X[i] = eval(Functions.evaluateInput(expressions[0]));\n                  curves[this.props.type][this.props.cindex].Y[i] = eval(Functions.evaluateInput(expressions[1]));\n                }\n              }\n            }\n          });\n          this.input.value = \"\";\n          this.setState({\n            error: false\n          });\n        } else {\n          this.setState({\n            error: true\n          });\n        }\n      } catch (error) {\n        this.setState({\n          error: true\n        });\n      }\n    };\n\n    this.edit = () => {\n      this.setState({\n        cEdit: 1\n      });\n    };\n\n    this.clone = () => this.props.clone([this.props.type, this.props.cindex]);\n\n    this.save = () => {\n      this.setState({\n        modified: this.state.modified.map((el, ind) => {\n          return ind == this.state.cEdit - 1 ? true : el;\n        })\n      });\n\n      try {\n        let expressions = curves[this.props.type][this.props.cindex].expressions;\n\n        if (this.props.type == 0) {\n          if (this.state.cEdit == 1) {\n            var x = 0;\n          }\n        } else {\n          if (this.state.cEdit == 1 || this.state.cEdit == 2) {\n            var t = 0;\n          }\n        }\n\n        let test = parseFloat(eval(Functions.evaluateInput(this.input.value)));\n\n        if (!isNaN(test)) {\n          if (this.props.type === 0) {\n            if (!!expressions[1] && !!expressions[2]) {\n              curves[this.props.type][this.props.cindex].X = Functions.subdivide(parseFloat(expressions[1]), parseFloat(expressions[2]), nbSubdiv);\n\n              for (let i = 0; i < curves[this.props.type][this.props.cindex].X.length; i++) {\n                let x = curves[this.props.type][this.props.cindex].X[i];\n                curves[this.props.type][this.props.cindex].Y[i] = eval(Functions.evaluateInput(expressions[0]));\n              }\n            }\n          } else {\n            if (!!expressions[1] && !!expressions[2] && !!expressions[3]) {\n              //Subdivided t parameter values tab\n              let tab1 = Functions.subdivide(parseFloat(expressions[2]), parseFloat(expressions[3]), nbSubdiv);\n\n              for (let i = 0; i < tab1.length; i++) {\n                let t = tab1[i];\n                curves[this.props.type][this.props.cindex].X[i] = eval(Functions.evaluateInput(expressions[0]));\n                curves[this.props.type][this.props.cindex].Y[i] = eval(Functions.evaluateInput(expressions[1]));\n              }\n            }\n          }\n\n          this.input.value = \"\";\n          this.setState({\n            cEdit: 0,\n            error: false\n          });\n        } else {\n          this.setState({\n            error: true\n          });\n        }\n      } catch (error) {\n        this.setState({\n          error: true\n        });\n      }\n    };\n\n    this.handleInputChange = event => {\n      curves[this.props.type][this.props.cindex].expressions[this.state.cEdit - 1] = event.target.value;\n      let test;\n\n      try {\n        if (this.props.type == 0) {\n          if (this.state.cEdit == 1) {\n            var x = 0;\n          }\n        } else {\n          if (this.state.cEdit == 1 || this.state.cEdit == 2) {\n            var t = 0;\n          }\n        }\n\n        test = parseFloat(eval(Functions.evaluateInput(event.target.value)));\n      } catch (error) {}\n\n      if (isNaN(test) && event.target.value != \"\" && this.state.modified[this.state.cEdit - 1]) {\n        this.setState({\n          error: true\n        });\n      } else {\n        this.setState({\n          error: false\n        });\n      }\n    };\n\n    this.inputHandler = e => {\n      if (e.which === 13) this.next();\n    };\n\n    this.state = {\n      cEdit: 0,\n      modified: [false, false, false, false],\n      error: false\n    }; //animations.push(new Animation(0, 1, 1, [[this.props.type, this.props.cindex]]));\n  }\n\n  componentDidMount() {\n    window.MathJax.Hub.Queue([\"Typeset\", window.MathJax.Hub, \"parameters\"]);\n  }\n\n  componentDidUpdate() {\n    this.input.focus();\n    this.input.value = curves[this.props.type][this.props.cindex].expressions[this.state.cEdit - 1];\n  }\n\n  render() {\n    let inputClasses = [],\n        placeholders = [],\n        labels = [];\n    let selected = this.props.currentSett[0] == this.props.type && this.props.currentSett[1] == this.props.cindex;\n\n    if (this.props.type === 0) {\n      inputClasses = [\"f\", \"selected f\", \"selected value\", \"selected value\", \"selected value\"];\n      placeholders = [\"cos(sin(x))\", \"cos(sin(x))\", \"-1\", \"1\", \"100\"];\n      labels = [\"f_{ \" + (this.props.cindex + 1) + \" }(x)\", \"a\", \"b\", \"n\"];\n    } else {\n      inputClasses = [\"x\", \"selected x\", \"selected y\", \"selected value\", \"selected value\"];\n      placeholders = [\"cos(t)\", \"cos(t)\", \"sin(t)\", \"-4\", \"4\"];\n      labels = [\"x_{ \" + (this.props.cindex + 1) + \" }(t)\", \"y_{ \" + (this.props.cindex + 1) + \" }(t)\", \"a\", \"b\"];\n    }\n\n    return React.createElement(\"span\", {\n      className: \"input\",\n      style: {\n        opacity: selected ? 0.4 : 1,\n        pointerEvents: selected ? \"none\" : \"auto\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 545\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 546\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"openS\",\n      onClick: () => {\n        if (!this.props.settStatus) this.props.showSett([this.props.type, this.props.cindex]);\n      },\n      style: {\n        display: this.state.cEdit ? \"none\" : \"inline\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 547\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faCog,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 547\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"duplicate\",\n      onClick: this.clone,\n      style: {\n        display: this.state.cEdit ? \"none\" : \"inline\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 548\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faClone,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 548\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"save\",\n      onClick: this.save,\n      style: {\n        display: this.state.cEdit ? \"inline\" : \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 549\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faSave,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 549\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"previous\",\n      onClick: this.previous,\n      style: {\n        display: this.state.cEdit > 1 ? \"inline\" : \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 550\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faAngleLeft,\n      size: \"lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 550\n      },\n      __self: this\n    })), React.createElement(\"label\", {\n      style: {\n        display: this.state.cEdit < 2 ? \"inline\" : \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 551\n      },\n      __self: this\n    }, \"\\\\(\", labels[0], \"\\\\)\"), React.createElement(\"label\", {\n      style: {\n        display: this.state.cEdit === 2 ? \"inline\" : \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 552\n      },\n      __self: this\n    }, \"\\\\(\", labels[1], \"\\\\)\"), React.createElement(\"label\", {\n      style: {\n        display: this.state.cEdit === 3 ? \"inline\" : \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 553\n      },\n      __self: this\n    }, \"\\\\(\", labels[2], \"\\\\)\"), React.createElement(\"label\", {\n      style: {\n        display: this.state.cEdit === 4 ? \"inline\" : \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 554\n      },\n      __self: this\n    }, \"\\\\(\", labels[3], \"\\\\)\"), React.createElement(\"input\", {\n      className: inputClasses[this.state.cEdit] + \" \" + (this.state.error ? \"error\" : \"\"),\n      type: \"text\",\n      ref: input => {\n        this.input = input;\n      },\n      onKeyUp: this.inputHandler,\n      placeholder: placeholders[this.state.cEdit],\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 555\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"next\",\n      onClick: this.next,\n      style: {\n        display: this.state.cEdit ? \"inline\" : \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 556\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faAngleRight,\n      size: \"lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 556\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"edit\",\n      onClick: this.edit,\n      style: {\n        display: this.state.cEdit ? \"none\" : \"inline\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 557\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faPencilAlt,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 557\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"delete\",\n      style: {\n        display: this.state.cEdit || this.props.settStatus ? \"none\" : \"inline\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 559\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"delete\",\n      onClick: () => {\n        this.props.delete([this.props.type, this.props.cindex]);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 560\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faTimes,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 560\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nclass Settings extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.save = () => {\n      let index = this.state.ind;\n      curves[index[0]][index[1]].width = this.state.thickness;\n      curves[index[0]][index[1]].color = this.state.color;\n      this.state.dashes.forEach((el, ind) => curves[index[0]][index[1]].dashes[ind] = el);\n      delimiters.forEach((el, ind) => curves[index[0]][index[1]].delimiters[ind] = el);\n      animations[findInd(index)[0]].anchor = this.state.anchor;\n      animations[findInd(index)[0]].duration = this.state.duration;\n      this.props.hide();\n    };\n\n    this.updateThickness = thickness => this.setState({\n      thickness: thickness\n    });\n\n    this.addDelimiter = () => {\n      delimiters.push({\n        x: 0,\n        width: 2,\n        dashes: [1, 2],\n        color: \"#FFFFFF\",\n        paramA: \"\",\n        paramB: \"\"\n      });\n      this.setState({\n        delimiters: delimiters\n      });\n    };\n\n    this.clearDelimiters = () => {\n      delimiters = [];\n      this.setState({\n        delimiters: delimiters\n      });\n    };\n\n    this.updateDelim = (index, data) => {\n      delimiters[index] = data;\n    };\n\n    this.deleteDelim = ind => {\n      delimiters.splice(ind, 1);\n      this.setState({\n        delimiters: delimiters\n      });\n    };\n\n    this.handleError = error => {\n      this.setState({\n        error: error\n      });\n    };\n\n    let _ind = this.props.currentSett;\n    delimiters = curves[_ind[0]][_ind[1]].delimiters;\n    this.state = {\n      ind: _ind,\n      thickness: curves[_ind[0]][_ind[1]].width,\n      dashes: curves[_ind[0]][_ind[1]].dashes,\n      delimiters: delimiters,\n      color: curves[_ind[0]][_ind[1]].color,\n      anchor: animations[findInd(_ind)[0]].anchor,\n      duration: animations[findInd(_ind)[0]].duration,\n      animType: animations[findInd(_ind)[0]].type,\n      error: false\n    };\n  }\n\n  componentDidMount() {\n    window.MathJax.Hub.Queue([\"Typeset\", window.MathJax.Hub, \"settWrapper\"]);\n  }\n\n  //<SketchPicker color={(!!this.state.color.hex) ? this.state.color.hex : this.state.color} onChangeComplete={(color) => this.setState({color: color})}/>\n  //<ColorPicker color={this.state.curveColor} update={(color) => this.setState({curveColor: color})} />\n  render() {\n    let ind = this.state.ind;\n    return React.createElement(\"div\", {\n      id: \"settWrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 618\n      },\n      __self: this\n    }, React.createElement(\"nav\", {\n      id: \"centerControls\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 619\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 620\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 621\n      },\n      __self: this\n    }, \"Settings\")), React.createElement(\"span\", {\n      className: \"buttons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 623\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.reset,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 624\n      },\n      __self: this\n    }, \" Reset \"), React.createElement(\"button\", {\n      onClick: this.save,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 625\n      },\n      __self: this\n    }, \" Save \"))), React.createElement(\"div\", {\n      id: \"fsettings\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 628\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 629\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"subrow curve\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 630\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 631\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"subwrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 632\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 633\n      },\n      __self: this\n    }, \"Thickness\"), React.createElement(ThicknessInput, {\n      thickness: this.state.thickness,\n      update: this.updateThickness,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 634\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"subwrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 636\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 637\n      },\n      __self: this\n    }, \"Dash:Spacing\"), React.createElement(\"input\", {\n      className: \"dash\",\n      placeholder: \"1\",\n      value: this.state.dashes[0] == -1 ? \"\" : this.state.dashes[0],\n      onChange: e => {\n        if (e.target.value == \"\") {\n          this.setState({\n            dashes: [-1, this.state.dashes[1]]\n          });\n        } else {\n          if (!isNaN(e.target.value)) {\n            this.setState({\n              dashes: [parseInt(e.target.value), this.state.dashes[1]]\n            });\n          }\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 638\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"spacing\",\n      placeholder: \"0\",\n      value: this.state.dashes[1] == -1 ? \"\" : this.state.dashes[1],\n      onChange: e => {\n        if (e.target.value == \"\") {\n          this.setState({\n            dashes: [this.state.dashes[0], -1]\n          });\n        } else {\n          if (!isNaN(e.target.value)) {\n            this.setState({\n              dashes: [this.state.dashes[0], parseInt(e.target.value)]\n            });\n          }\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 648\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"subwrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 659\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 660\n      },\n      __self: this\n    }, \"Color\"), React.createElement(ColorPicker, {\n      update: color => this.setState({\n        color: color\n      }),\n      color: this.state.color,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 661\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"subrow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 665\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 666\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"subwrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 667\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 668\n      },\n      __self: this\n    }, \"Divide into: \"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"divide\",\n      placeholder: \"20\",\n      maxLength: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 669\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      id: \"divideb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 669\n      },\n      __self: this\n    }, \"Divide\"))))), React.createElement(\"div\", {\n      className: \"row delimiters\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 674\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"subrow topDelim\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 675\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 676\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"subwrapper delimLabel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 677\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 678\n      },\n      __self: this\n    }, \"Delimiters\")), React.createElement(\"div\", {\n      className: \"subwrapper buttons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 680\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.addDelimiter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 681\n      },\n      __self: this\n    }, \"Add delimiter\"), React.createElement(\"button\", {\n      onClick: this.clearDelimiters,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 682\n      },\n      __self: this\n    }, \"Clear all\"))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 684\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"subrow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 686\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 687\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"subwrapper delimTable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 688\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"labels\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 689\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"delimColumn xPosition\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 690\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 691\n      },\n      __self: this\n    }, \"x\")), React.createElement(\"div\", {\n      className: \"delimColumn thickness\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 693\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 694\n      },\n      __self: this\n    }, \"width\")), React.createElement(\"div\", {\n      className: \"delimColumn dashes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 696\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 697\n      },\n      __self: this\n    }, \"dash:space\")), React.createElement(\"div\", {\n      className: \"delimColumn color\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 699\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 700\n      },\n      __self: this\n    }, \"color\")), React.createElement(\"div\", {\n      className: \"delimColumn filler\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 702\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"delimList\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 704\n      },\n      __self: this\n    }, this.state.delimiters.map((el, index) => {\n      return React.createElement(Delimiter, {\n        x: el.x,\n        width: el.width,\n        dashes: [el.dashes[0], el.dashes[1]],\n        color: el.color,\n        key: el.x.toString() + index.toString(),\n        ind: index,\n        delete: this.deleteDelim,\n        update: this.updateDelim,\n        handleError: this.handleError,\n        paramA: el.paramA,\n        paramB: el.paramB,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 707\n        },\n        __self: this\n      });\n    })))))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 718\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"subrow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 719\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 720\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"subwrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 721\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 722\n      },\n      __self: this\n    }, \"Starting time: \"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"anchor\",\n      value: this.state.anchor,\n      onChange: e => this.setState({\n        anchor: parseInt(e.target.value)\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 723\n      },\n      __self: this\n    }), \" seconds\"), React.createElement(\"div\", {\n      className: \"subwrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 725\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 726\n      },\n      __self: this\n    }, \"Duration: \"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"duration\",\n      value: this.state.duration,\n      onChange: e => this.setState({\n        duration: parseInt(e.target.value)\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 727\n      },\n      __self: this\n    }), \" seconds\"))), React.createElement(\"div\", {\n      className: \"subrow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 731\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 732\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"subwrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 733\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: this.state.animType == 0 ? \"anim selected\" : \"anim\",\n      id: \"noanim\",\n      onClick: () => this.setState({\n        animType: 0\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 734\n      },\n      __self: this\n    }, \"No animation\"), React.createElement(\"button\", {\n      className: this.state.animType == 1 ? \"anim selected\" : \"anim\",\n      id: \"morph\",\n      onClick: () => this.setState({\n        animType: 1\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 735\n      },\n      __self: this\n    }, \"Morph\"), React.createElement(\"button\", {\n      className: this.state.animType == 2 ? \"anim selected\" : \"anim\",\n      id: \"completeb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 736\n      },\n      __self: this\n    }, \"Complete\"), React.createElement(\"button\", {\n      className: this.state.animType == 3 ? \"anim selected\" : \"anim\",\n      id: \"chase\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 737\n      },\n      __self: this\n    }, \"Chase\"), React.createElement(\"button\", {\n      className: this.state.animType == 4 ? \"anim selected\" : \"anim\",\n      id: \"rotate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 738\n      },\n      __self: this\n    }, \"Rotate\"), React.createElement(\"button\", {\n      className: this.state.animType == 5 ? \"anim selected\" : \"anim\",\n      id: \"recompose\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 739\n      },\n      __self: this\n    }, \"Recompose\"), React.createElement(\"button\", {\n      className: this.state.animType == 6 ? \"anim selected\" : \"anim\",\n      id: \"mover\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 740\n      },\n      __self: this\n    }, \"Scroll right\"), React.createElement(\"button\", {\n      className: this.state.animType == 7 ? \"anim selected\" : \"anim\",\n      id: \"movel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 741\n      },\n      __self: this\n    }, \"Scroll left\"), React.createElement(\"button\", {\n      className: this.state.animType == 8 ? \"anim selected\" : \"anim\",\n      id: \"moveu\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 742\n      },\n      __self: this\n    }, \"Scroll up\"), React.createElement(\"button\", {\n      className: this.state.animType == 9 ? \"anim selected\" : \"anim\",\n      id: \"moved\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 743\n      },\n      __self: this\n    }, \"Scroll down\")))))));\n  }\n\n}\n\nclass Canvas extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.play = () => {\n      //Don't delete, pointer is to be used inside setInterval\n      let pointer = this;\n      let A = this.state;\n      const canvas = this.refs.canvas;\n      const context = canvas.getContext(\"2d\");\n      this.setState((state, props) => {\n        let newState = state; //Temporary xstep, ystep\n\n        let tstep = Functions.Maximum([Functions.xstep([...curves[0], ...curves[1]], A.drawnSteps.nbSteps.x, A.drawnSteps.offStepSteps.x), Functions.ystep([...curves[0], ...curves[1]], A.drawnSteps.nbSteps.y, A.drawnSteps.offStepSteps.y)]);\n        newState.steps.x = [tstep, tstep];\n        newState.steps.y = [tstep, tstep];\n        return newState;\n      }, () => {\n        //frameDuration in milliseconds\n        frameDuration = Functions.Minimum(animations.map(el => 1000 / el.fps)); //totalDuration in seconds\n\n        totalDuration = Functions.Maximum(animations.map(el => el.anchor + el.duration));\n        let drawFramePointer = this.drawFrame; //If animation already running\n\n        if (!!mainLoop) {\n          window.clearInterval(mainLoop); //If not paused start from the beginning\n\n          if (!paused) {\n            k = 0;\n          }\n        } //Either way set paused to false since it's playing now\n\n\n        paused = false;\n        mainLoop = window.setInterval(function () {\n          //console.log(\"k: \" + k);\n          if (k < totalDuration * 1000 / frameDuration) {\n            k++;\n            drawFramePointer();\n            animations.forEach((el, ind) => {\n              let animation = el;\n              animation.fps = 1000 / frameDuration;\n\n              if (k >= animation.anchor * animation.fps && k <= animation.anchor * animation.fps + animation.duration * animation.fps) {\n                //Feeding the execute function (k - animation.anchor*animation.fps) instead of k, as if the animation just started with its anchor \n                animation.execute([A.steps.x, A.steps.y], [A.drawnSteps.stepSize.x, A.drawnSteps.stepSize.y], [canvas.width, canvas.height], k - animation.anchor * animation.fps, context);\n              }\n            });\n            pointer.setState({\n              count: k\n            });\n          } else {\n            window.clearInterval(mainLoop);\n            mainLoop = 0;\n            k = 0;\n          }\n        }, frameDuration);\n        /*for(let i = 0; i < animations.length; i++){\n        \tanimations[i].execute([A.steps.x, A.steps.y], [A.drawnSteps.stepSize.x, A.drawnSteps.stepSize.y], [canvas.width, canvas.height], context, this.drawFrame);\n        }*/\n      });\n    };\n\n    this.pause = () => {\n      window.clearInterval(mainLoop);\n      paused = true;\n      this.setState({\n        count: k\n      });\n    };\n\n    this.stop = () => {\n      window.clearInterval(mainLoop);\n      mainLoop = 0;\n      k = 0;\n      this.setState({\n        count: k\n      }, this.drawFrame);\n    };\n\n    this.drawFrame = () => {\n      let A = this.state;\n      const canvas = this.refs.canvas;\n      const context = canvas.getContext(\"2d\");\n      context.clearRect(0, 0, canvas.width, canvas.height);\n      Functions.drawYAxis(canvas.width / 2, A.colors.axeColor, canvas.height, A.widths.axeWidth, context);\n      Functions.drawXAxis(canvas.height / 2, A.colors.axeColor, canvas.width, A.widths.axeWidth, context);\n      Functions.drawOnX(canvas.width / 2, canvas.height / 2, A.steps.x[0], A.drawnSteps.nbSteps.x[0], A.drawnSteps.stepSize.x[0], A.colors.dashColor, A.colors.wireColor, A.widths.dashWidth.x[0], A.widths.wireWidth[0], A.font.x[0], context);\n      Functions.drawOnY(canvas.width / 2, canvas.height / 2, A.steps.y[0], A.drawnSteps.nbSteps.y[0], A.drawnSteps.stepSize.y[0], A.colors.dashColor, A.colors.wireColor, A.widths.dashWidth.y[0], A.widths.wireWidth[0], A.font.y[0], context);\n      Functions.drawOnMinusX(canvas.width / 2, canvas.height / 2, A.steps.x[1], A.drawnSteps.nbSteps.x[0], A.drawnSteps.stepSize.x[1], A.colors.dashColor, A.colors.wireColor, A.widths.dashWidth.x[1], A.widths.wireWidth[0], A.font.x[1], context);\n      Functions.drawOnMinusY(canvas.width / 2, canvas.height / 2, A.steps.y[1], A.drawnSteps.nbSteps.y[1], A.drawnSteps.stepSize.y[1], A.colors.dashColor, A.colors.wireColor, A.widths.dashWidth.y[1], A.widths.wireWidth[0], A.font.y[1], context);\n    };\n\n    this.state = {\n      colors: {\n        axeColor: \"#e6e4e7\",\n        wireColor: \"#28262d\",\n        dashColor: \"#e6e4e7\",\n        curveColor: \"#ebe9ec\"\n      },\n      widths: {\n        axeWdith: [1, 1],\n        wireWidth: [1, 1],\n        dashWidth: {\n          x: [2, 2],\n          y: [2, 2]\n        }\n      },\n      drawnSteps: {\n        nbSteps: {\n          x: [9, 9],\n          y: [8, 8]\n        },\n        offStepSteps: {\n          x: [1, 1],\n          y: [1, 1]\n        },\n        stepSize: {\n          x: [35, 35],\n          //for positive then negative x\n          y: [35, 35] //for positive then negative y\n\n        }\n      },\n      font: {\n        x: [\"11px Arial\", \"11px Arial\"],\n        y: [\"11px Arial\", \"11px Arial\"]\n      },\n      steps: {\n        x: [.25, .25],\n        y: [.25, .25]\n      },\n      //Variable for updating time display\n      count: 0\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      canvas: this.refs.canvasW\n    }, () => {\n      this.setState(() => {\n        let tempSteps = this.state.drawnSteps;\n        let nbXSteps = parseInt(this.state.canvas.clientWidth / 2 / tempSteps.stepSize.x[0]);\n        let nbYSteps = parseInt(this.state.canvas.clientHeight / 2 / tempSteps.stepSize.y[0]);\n        tempSteps.nbSteps.x = [nbXSteps, nbXSteps];\n        tempSteps.nbSteps.y = [nbYSteps, nbYSteps];\n        return tempSteps;\n      });\n    });\n  }\n\n  componentDidUpdatedate() {}\n\n  render() {\n    if (!this.state.canvas) {\n      return React.createElement(\"div\", {\n        id: \"canvasWrapper\",\n        style: {\n          width: !this.props.settStatus ? \"80%\" : \"50%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 892\n        },\n        __self: this\n      }, React.createElement(LControls, {\n        play: this.play,\n        pause: this.pause,\n        stop: this.stop,\n        count: this.state.count * frameDuration / 1000,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 893\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"canvas\",\n        ref: \"canvasW\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 894\n        },\n        __self: this\n      }));\n    } else {\n      return React.createElement(\"div\", {\n        id: \"canvasWrapper\",\n        style: {\n          width: !this.props.settStatus ? \"80%\" : \"50%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 898\n        },\n        __self: this\n      }, React.createElement(LControls, {\n        play: this.play,\n        pause: this.pause,\n        stop: this.stop,\n        count: this.state.count * frameDuration / 1000,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 899\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"canvas\",\n        ref: \"canvasW\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 900\n        },\n        __self: this\n      }, React.createElement(\"canvas\", {\n        ref: \"canvas\",\n        id: \"graph\",\n        width: this.state.canvas.clientWidth,\n        height: this.state.canvas.clientHeight,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 901\n        },\n        __self: this\n      }), React.createElement(\"canvas\", {\n        id: \"toplayer\",\n        width: this.state.canvas.clientWidth,\n        height: this.state.canvas.clientHeight,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 902\n        },\n        __self: this\n      })));\n    }\n  }\n\n}\n\nclass LControls extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    return React.createElement(\"nav\", {\n      id: \"leftControls\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 916\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 917\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 918\n      },\n      __self: this\n    }, \"Animation 1 \")), React.createElement(\"nav\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 920\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.props.play,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 921\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faPlay,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 921\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      onClick: this.props.pause,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 922\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faPause,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 922\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      onClick: this.props.stop,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 923\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faStop,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 923\n      },\n      __self: this\n    }))), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 925\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"count\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 926\n      },\n      __self: this\n    }, this.props.count), React.createElement(\"h4\", {\n      className: \"seconds\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 927\n      },\n      __self: this\n    }, \" s \")), React.createElement(\"nav\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 929\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 930\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faSearchPlus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 930\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 931\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faSearchMinus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 931\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 932\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faArrowLeft,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 932\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 933\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faArrowRight,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 933\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 934\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faArrowUp,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 934\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 935\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faArrowDown,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 935\n      },\n      __self: this\n    }))), React.createElement(\"nav\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 937\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 938\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 938\n      },\n      __self: this\n    }, \"Save\")), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 939\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 939\n      },\n      __self: this\n    }, \"Export\"))));\n  }\n\n}\n\nclass RControls extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    return React.createElement(\"nav\", {\n      id: \"rightControls\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 952\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 953\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 954\n      },\n      __self: this\n    }, \"Curves\")), React.createElement(\"span\", {\n      className: \"buttons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 956\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 957\n      },\n      __self: this\n    }, \" Clear All \")));\n  }\n\n}\n\nclass ParamWrapper extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.newCurve = () => {\n      curves[0].push(new Curve2d([], [], \"#FFFFFF\", 3, [1, 0]));\n      animations.push(new Animation(0, 0, 1, 10, [[0, curves[0].length - 1]]));\n      this.setState({\n        curves: curves,\n        animations\n      });\n    };\n\n    this.newPCurve = () => {\n      curves[1].push(new Curve2d([], [], \"#FFFFFF\", 3, [1, 0]));\n      animations.push(new Animation(0, 0, 1, 10, [[1, curves[1].length - 1]]));\n      this.setState({\n        curves: curves,\n        animations\n      });\n    };\n\n    this.clone = ([type, index]) => {\n      let clone = new Curve2d([], [], \"\", 0, [0, 0]);\n      cloneCurveInto(curves[type][index], clone);\n      curves[type].push(clone);\n      animations.push(new Animation(0, 0, 1, 10, [[type, curves[type].length - 1]]));\n      this.setState({\n        curves: curves,\n        animations\n      });\n    };\n\n    this.delete = arg => {\n      curves[arg[0]].splice(arg[1], 1); //Deleting curve from relevant animation\n\n      let indice = findInd(arg);\n      animations[indice[0]].curvInd.splice(indice[1], 1); //Adjusting curve indices after deletion\n\n      animations.forEach((el, ind) => {\n        if (ind == indice[0]) {\n          if (!!el.curvInd[indice[1]]) {\n            el.curvInd.forEach((element, index) => element[1] -= index >= indice[1] && element[0] == arg[0] ? 1 : 0);\n          }\n        }\n\n        if (ind > indice[0]) {\n          el.curvInd.forEach((element, index) => element[1] -= element[0] == arg[0] ? 1 : 0);\n        }\n      }); //Deleting empty animations that may be due to deletion\n\n      animations = animations.filter(el => el.curvInd.length > 0); //Ajdusting animations left with only one curve by setting their type to 0\n\n      animations.forEach(el => {\n        if (el.curvInd.length == 1) el.type = 0;\n      });\n      this.setState({\n        curves: curves\n      });\n    };\n\n    this.state = {\n      curves: curves,\n      animations: animations\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"paramWrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1009\n      },\n      __self: this\n    }, React.createElement(RControls, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1010\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"parameters\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1011\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"buttons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1012\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      id: \"addc\",\n      onClick: this.newCurve,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1013\n      },\n      __self: this\n    }, \" \", React.createElement(FontAwesomeIcon, {\n      icon: faPlus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1013\n      },\n      __self: this\n    }), \" FCurve \"), React.createElement(\"button\", {\n      id: \"addp\",\n      onClick: this.newPCurve,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1014\n      },\n      __self: this\n    }, \" \", React.createElement(FontAwesomeIcon, {\n      icon: faPlus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1014\n      },\n      __self: this\n    }), \" PCurve \")), React.createElement(\"div\", {\n      className: \"inputs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1016\n      },\n      __self: this\n    }, animations.map((el, ind) => {\n      if (el.curvInd.length == 1) {\n        return React.createElement(WrCurve, {\n          key: [el.curvInd[0][0], el.curvInd[0][1]].toString(),\n          type: el.curvInd[0][0],\n          cindex: el.curvInd[0][1],\n          clone: this.clone,\n          delete: this.delete,\n          showSett: this.props.showSett,\n          currentSett: this.props.currentSett,\n          settStatus: this.props.settStatus,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1019\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(\"span\", {\n          className: \"inputWrapper\",\n          key: ind,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1022\n          },\n          __self: this\n        }, el.curvInd.map((element, index) => {\n          return React.createElement(WrCurve, {\n            key: [element[0], element[1]].toString(),\n            type: element[0],\n            cindex: element[1],\n            clone: this.clone,\n            delete: this.delete,\n            showSett: this.props.showSett,\n            currentSett: this.props.currentSett,\n            settStatus: this.props.settStatus,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1024\n            },\n            __self: this\n          });\n        }));\n      }\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1029\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1031\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"drawing.svg\",\n      width: \"35%\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1032\n      },\n      __self: this\n    })));\n  }\n\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.showSett = curveInd => {\n      this.setState({\n        settStatus: true,\n        currentSett: curveInd\n      });\n    };\n\n    this.hideSett = () => {\n      this.setState({\n        settStatus: false,\n        currentSett: [[]]\n      });\n    };\n\n    curves[0].push(new Curve2d([], [], \"#FFFFFF\", 3, [1, 0]));\n    animations.push(new Animation(0, 0, 1, 10, [[0, 0]]));\n    this.state = {\n      curves: curves,\n      settStatus: false,\n      currentSett: []\n    };\n  }\n\n  render() {\n    let sett = this.state.settStatus ? React.createElement(Settings, {\n      currentSett: this.state.currentSett,\n      hide: this.hideSett,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1052\n      },\n      __self: this\n    }) : null;\n    return React.createElement(\"div\", {\n      id: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1053\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"core\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1054\n      },\n      __self: this\n    }, React.createElement(Canvas, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1055\n      },\n      __self: this\n    }), sett, React.createElement(ParamWrapper, {\n      showSett: this.showSett,\n      currentSett: this.state.currentSett,\n      settStatus: this.state.settStatus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1057\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/var/www/html/xfy/src/App.js"],"names":["React","FontAwesomeIcon","faTimes","faCog","faClone","faSave","faCheck","faAngleUp","faAngleDown","faAngleLeft","faAngleRight","faPencilAlt","faSearchPlus","faSearchMinus","faArrowLeft","faArrowRight","faArrowUp","faArrowDown","faPlus","faPlay","faPause","faStop","Functions","Animations","SketchPicker","nbSubdiv","nbSubdivDelim","curves","animations","delimiters","frameDuration","totalDuration","k","mainLoop","paused","findInd","cInd","indice","forEach","el","ind","curvInd","element","index","cloneCurveInto","curve","newCurve","X","Y","color","width","dashes","expressions","Array","length","tempDelim","x","elem","ind_dash","paramA","paramB","createDelim","nbS","expression","evaluateInput","y","isNaN","eval","delimiterX","subdivide","delimiterY","Curve2d","constructor","FloatInput","Component","props","handleChange","e","setState","input","target","value","n","test","state","error","update","handleKeyPress","key","exceptionKeys","includes","preventDefault","render","placeholder","ThicknessInput","handleThickChange","thickness","parseInt","increaseThickness","decreaseThickness","Animation","type","anchor","duration","fps","animCurves","execute","steps","thestep","canvasDim","frameNumber","context","executeBefore","i","push","delim","parseFloat","drawCurve","morph","tab1","tab2","ColorPicker","displayColorPicker","handleClick","yPosition","selector","current","getBoundingClientRect","windowHeight","window","document","body","offsetHeight","selectorHeight","style","bottom","handleClose","colorRgb","rgb","hex","createRef","styles","view","backgroundColor","button","icon","Delimiter","handleDashInput","handleSpacingInput","updateX","data","handleWChange","handleColorChange","delete","toggleParameter","displayParameter","updateParamA","updateParamB","componentDidMount","MathJax","Hub","Queue","componentDidUpdate","tempState","trim","toString","display","WrCurve","previous","cEdit","next","modified","map","cindex","t","edit","clone","save","handleInputChange","event","inputHandler","which","focus","inputClasses","placeholders","labels","selected","currentSett","opacity","pointerEvents","settStatus","showSett","Settings","hide","updateThickness","addDelimiter","clearDelimiters","updateDelim","deleteDelim","splice","handleError","animType","reset","Canvas","play","pointer","A","canvas","refs","getContext","newState","tstep","Maximum","xstep","drawnSteps","nbSteps","offStepSteps","ystep","Minimum","drawFramePointer","drawFrame","clearInterval","setInterval","animation","stepSize","height","count","pause","stop","clearRect","drawYAxis","colors","axeColor","widths","axeWidth","drawXAxis","drawOnX","dashColor","wireColor","dashWidth","wireWidth","font","drawOnY","drawOnMinusX","drawOnMinusY","curveColor","axeWdith","canvasW","tempSteps","nbXSteps","clientWidth","nbYSteps","clientHeight","componentDidUpdatedate","LControls","RControls","ParamWrapper","newPCurve","arg","filter","App","curveInd","hideSett","sett"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes, faCog, faClone, faSave, faCheck, faAngleUp, faAngleDown, faAngleLeft, faAngleRight, faPencilAlt, faSearchPlus, faSearchMinus, faArrowLeft, faArrowRight, faArrowUp, faArrowDown, faPlus, faPlay, faPause, faStop } from '@fortawesome/free-solid-svg-icons';\nimport Functions from './Library';\nimport Animations from './Animations';\nimport { SketchPicker } from 'react-color';\nimport './stylesheets/App.css';\n\n//Number of subdivisions of X (and thus Y) and Number of subdivisions for delimiters  \nlet nbSubdiv = 500, nbSubdivDelim = 50;\nlet curves = [[], []], animations = [], delimiters = [];\n//Global variables linked to canvas (for execution, pausing and stopping animation)\nlet frameDuration = 0, totalDuration = 0, k = 0, mainLoop = 0, paused = false;\n\n//Function for finding animation involving given curve indices\nfunction findInd(cInd) {\n\tlet indice = [];\n\tanimations.forEach((el, ind) => {\n\t\tel.curvInd.forEach((element, index) => {\n\t\t\tif (element[0] === cInd[0] && element[1] === cInd[1]) {\n\t\t\t\tindice[0] = ind;\n\t\t\t\tindice[1] = index;\n\t\t\t};\n\t\t});\n\t});\n\treturn indice;\n}\nfunction cloneCurveInto(curve, newCurve) {\n\tcurve.X.forEach((el, ind) => newCurve.X[ind] = el);\n\tcurve.Y.forEach((el, ind) => newCurve.Y[ind] = el);\n\tnewCurve.color = curve.color;\n\tnewCurve.width = curve.width;\n\tcurve.dashes.forEach((el, ind) => newCurve.dashes[ind] = el);\n\tcurve.expressions.forEach((el, ind) => newCurve.expressions[ind] = el);\n\tnewCurve.delimiters = new Array(curve.delimiters.length);\n\tcurve.delimiters.forEach((el, ind) => {\n\t\tlet tempDelim = {};\n\t\ttempDelim.x = el.x;\n\t\ttempDelim.width = el.width;\n\t\ttempDelim.color = el.color;\n\t\ttempDelim.dashes = new Array(el.dashes.length);\n\t\tel.dashes.forEach((elem, ind_dash) => tempDelim.dashes[ind_dash] = elem);\n\t\ttempDelim.paramA = el.paramA;\n\t\ttempDelim.paramB = el.paramB;\n\t\tnewCurve.delimiters[ind] = tempDelim;\n\t});\n}\n//Function for computing and return delimiters, takes in :\n//delimiter width, index, place of delimiter between 0 & nbSubdiv, \n//and number of subdivisions of the delimiter curve (the line), dashes, color\nfunction createDelim(width, cInd, x, nbS, dashes, color) {\n\tlet expression = (curves[cInd[0]][cInd[1]].expressions[0] != null) ? Functions.evaluateInput(curves[cInd[0]][cInd[1]].expressions[0]) : 0;\n\tlet y = (!isNaN(eval(expression))) ? eval(expression) : 0;\n\tlet delimiterX = Functions.subdivide(x, x, nbS);\n\tlet delimiterY = Functions.subdivide(0, y, nbS);\n\treturn ({\n\t\tx: x,\n\t\twidth: width,\n\t\tdelimiterX: delimiterX,\n\t\tdelimiterY: delimiterY,\n\t\tcolor: color,\n\t\tdashes: dashes\n\t});\n}\nclass Curve2d {\n\tconstructor(X, Y, color, width, dashes, delimiters) {\n\t\tthis.X = X;\n\t\tthis.Y = Y;\n\t\tthis.color = \"#f3f1f3\";\n\t\tthis.width = width;\n\t\tthis.dashes = dashes;\n\t\tthis.expressions = [null, null, null, null];\n\t\tthis.delimiters = [];\n\t}\n}\nclass FloatInput extends React.Component{\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = { input : this.props.value, error: false };\n\t}\n\thandleChange = (e) => {\n\t\tthis.setState({ input: e.target.value }, () => {\n\t\t\ttry{\n\t\t\t\tlet n = 0;\n\t\t\t\tlet test = eval(this.state.input);\n\t\t\t\tthis.setState({ error: (isNaN(test) && this.state.input != \"\") }, () => {\n\t\t\t\t\tthis.props.update(this.state);\n\t\t\t\t});\t\t\t\t\n\t\t\t}\t\n\t\t\tcatch(error){\n\t\t\t\tthis.setState({ error: true }, () => {\n\t\t\t\t\tthis.props.update(this.state);\n\t\t\t\t})\n\t\t\t}\n\t\t}, () => {\n\t\t\t//console.log(this.state.error);\n\t\t});\n\t}\n\thandleKeyPress = (e) => {\n\t\tif(isNaN(e.key) && e.key != '.' && e.key != '-' && e.key != '*' && e.key != '/' && e.key != '(' && e.key != ')'){\n\t\t\tif(!!this.props.exceptionKeys){\n\t\t\t\tif(!this.props.exceptionKeys.includes(e.key)){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t} \t\n\t\telse{\n\t\t\tif (e.key == '.' && this.state.input[this.state.input.length - 1] == '.') e.preventDefault();\n\t\t\tif (e.key == '-' && this.state.input.length >= 1) e.preventDefault();\n\t\t}\n\t}\n\trender(){\n\t\treturn (<input className={\"floatInput\" + ((this.state.error) ? \"error\" : \"\")} placeholder={this.props.placeholder} value={this.state.input} onChange={this.handleChange} onKeyPress={this.handleKeyPress}/>);\n\t}\n}\nclass ThicknessInput extends React.Component{\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = { thickness: this.props.thickness };\n\t}\n\thandleThickChange = (e) => {\n\t\tif (!isNaN(e.target.value) && e.target.value != \"\") {\n\t\t\tthis.setState({ thickness: parseInt(e.target.value) }, () => {\n\t\t\t\tthis.props.update(this.state.thickness)\n\t\t\t}); \n\t\t}\n\t}\n\tincreaseThickness = () => this.setState({ thickness: (this.state.thickness + 1) }, () => {\n\t\tthis.props.update(this.state.thickness);\n\t});\n\tdecreaseThickness = () => { \n\t\tif (this.state.thickness > 1) this.setState({ thickness: (this.state.thickness - 1) }, () => {\n\t\t\tthis.props.update(this.state.thickness);\n\t\t}); \n\t}\n\trender(){\n\t\treturn (<div className=\"thicknessInput\">\n\t\t\t\t\t<input type=\"text\" className=\"thickness\" value={this.state.thickness} onChange={this.handleThickChange} maxLength=\"3\" />\n\t\t\t\t\t<button className=\"thicker\" onClick={this.increaseThickness}><b>+</b></button>\n\t\t\t\t\t<button className=\"thinner\" onClick={this.decreaseThickness}><b>-</b></button>\n\t\t\t\t</div>);\n\t}\n}\nclass Animation {\n\t/* \n\t\ttype: type of animation (Integer) \n\t\tanchor: starting point in time (Float)\n\t\tduration: duration of animation in seconds (Float)\n\t\tfps: frames per second (Integer)\n\t\tcurvInd: the curves involved in the animation ([[0 or 1, index],[...],...])\n\t*/\n\tconstructor(type, anchor, duration, fps, curvInd) {\n\t\tthis.type = type;\n\t\tthis.curvInd = curvInd;\n\t\tthis.animCurves = [];\n\t\tthis.anchor = anchor;\n\t\tthis.duration = duration;\n\t\tthis.fps = fps;\n\t}\n\texecute(steps, thestep, canvasDim, frameNumber, context, executeBefore = () => { }) {\n\t\tfor (let i = 0; i < this.curvInd.length; i++) {\n\t\t\tthis.animCurves.push(curves[this.curvInd[i][0]][this.curvInd[i][1]]);\n\t\t}\n\t\tswitch (this.type) {\n\t\t\t//no animation\n\t\t\tcase 0:\n\t\t\t\texecuteBefore();\n\t\t\t\tlet delim = [];\n\t\t\t\tthis.animCurves[0].delimiters.forEach(el => {\n\t\t\t\t\tif(el.paramA == \"\"){\n\t\t\t\t\t\tdelim.push(createDelim(el.width, this.curvInd[0], parseFloat(el.x), nbSubdivDelim, el.dashes, el.color));\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tfor(let n = parseInt(el.paramA); n <= parseInt(el.paramB); n++){\n\t\t\t\t\t\t\tdelim.push(createDelim(el.width, this.curvInd[0], eval(el.x), nbSubdivDelim, el.dashes, el.color));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tFunctions.drawCurve(this.animCurves[0].width, this.animCurves[0].dashes, this.animCurves[0].X, this.animCurves[0].Y, steps, thestep, canvasDim[0] / 2, canvasDim[1] / 2, this.animCurves[0].color, context);\n\t\t\t\t//let delimitercreateDelim(2, this.curvInd[0], 0, 50, [1, 1], this.animCurves[0].color);\n\t\t\t\t//Draw Delimiters\n\t\t\t\tfor (let i = 0; i < delim.length; i++) {\n\t\t\t\t\tFunctions.drawCurve(delim[i].width, delim[i].dashes, delim[i].delimiterX, delim[i].delimiterY, steps, thestep, canvasDim[0] / 2, canvasDim[1] / 2, delim[i].color, context);\n\t\t\t\t}\n\t\t\t\t//Functions.drawCurve(2, [1, 2], this.delimitersLX, this.delimitersLY, steps, thestep, canvasDim[0]/2, canvasDim[1]/2, this.animCurves[0].color, context);\n\t\t\t\t//Functions.drawCurve(2, [1, 2], this.delimitersRX, this.delimitersRY, steps, thestep, canvasDim[0]/2, canvasDim[1]/2, this.animCurves[0].color, context);\n\t\t\t\tbreak;\n\t\t\t//morph curve1 into curve2 \n\t\t\tcase 1:\n\t\t\t\tAnimations.morph(this.animCurves, frameNumber, this.duration * this.fps, (tab1, tab2) => {\n\t\t\t\t\texecuteBefore();\n\t\t\t\t\tFunctions.drawCurve(this.animCurves[0].width, this.animCurves[0].dashes, tab1, tab2, steps, thestep, canvasDim[0] / 2, canvasDim[1] / 2, this.animCurves[0], context);\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t}\n};\n\nclass ColorPicker extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.selector = React.createRef();\n\t}\n\tstate = {\n\t\tdisplayColorPicker: false,\n\t\tcolor: this.props.color,\n\t};\n\n\thandleClick = () => {\n\t\tthis.setState({ displayColorPicker: !this.state.displayColorPicker }, () => {\n\t\t\tif(this.state.displayColorPicker){\n\t\t\t\tlet yPosition = this.selector.current.getBoundingClientRect().y;\n\t\t\t\tlet windowHeight = window.document.body.offsetHeight;\n\t\t\t\tlet selectorHeight = this.selector.current.offsetHeight;\n\t\t\t\tif(yPosition + selectorHeight >= windowHeight){\n\t\t\t\t\tthis.selector.current.style.bottom = (windowHeight - yPosition + 40) + \"px\"\n\t\t\t\t}\n\t\t\t\t//console.log();\n\t\t\t\t//if(this.state.displayColorPicker) this.selector.current.style.border = \"6px solid black\";}\n\t\t\t}\n\t\t});\n\t};\n\n\thandleClose = () => {\n\t\tthis.setState({ displayColorPicker: false })\n\t};\n\n\thandleChange = (color) => {\n\t\tlet colorRgb = color.rgb;\n\t\tthis.setState({ color: color.hex }, () => this.props.update(color.hex))\n\t};\n\trender() {\n\t\tconst styles = {\n\t\t\tview: {\n\t\t\t\tbackgroundColor: this.state.color,\n\t\t\t},\n\t\t};\n\t\treturn (\n\t\t\t<span className=\"colorWrapper\">\n\t\t\t\t<span>\n\t\t\t\t\t<input style={styles.view} onClick={this.handleClick} />\n\t\t\t\t\t<button style={styles.button} onClick={this.handleClick}><FontAwesomeIcon style={styles.icon} icon={(this.state.displayColorPicker) ? faAngleUp : faAngleDown} /></button>\n\t\t\t\t</span>\n\t\t\t\t{this.state.displayColorPicker ? <div ref={this.selector} className=\"popover\">\n\t\t\t\t\t<button className=\"saveColor\" onClick={this.handleClick}> Save </button>\n\t\t\t\t\t<SketchPicker color={this.state.color} onChange={this.handleChange} />\n\t\t\t\t</div> : null}\n\t\t\t</span>\n\t\t)\n\t}\n}\nclass Delimiter extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tx: {input: this.props.x, error: false},\n\t\t\twidth: this.props.width,\n\t\t\tdashes: this.props.dashes,\n\t\t\tcolor: this.props.color,\n\t\t\tdisplayParameter: false,\n\t\t\tparamA: {input: this.props.paramA, error: false},\n\t\t\tparamB: {input: this.props.paramB, error: false}\n\t\t};\n\t}\n\thandleDashInput = (e) => {\n\t\tif(e.target.value == \"\") {\n\t\t\tthis.setState({ dashes: [\"a\", this.state.dashes[1]] });\n\t\t}\n\t\telse{\n\t\t\tif (!isNaN(e.target.value)) {\n\t\t\t\tthis.setState({ dashes: [parseInt(e.target.value), this.state.dashes[1]] });\n\t\t\t}\n\t\t}\n\t}\n\thandleSpacingInput = (e) => {\n\t\tif(e.target.value == \"\") {\n\t\t\tthis.setState({ dashes: [this.state.dashes[0], \"a\"] });\n\t\t}\n\t\telse{\n\t\t\tif (!isNaN(e.target.value)) {\n\t\t\t\tthis.setState({ dashes: [this.state.dashes[0], parseInt(e.target.value)] });\n\t\t\t}\n\t\t}\n\t}\n\tupdateX = (data) => {\n\t\tthis.setState({ x: data });\n\t}\n\thandleWChange = (width) => {\n\t\tthis.setState({ width: width});\n\t}\n\thandleColorChange = (color) => {\n\t\tthis.setState({ color: color });\n\t}\n\tdelete = () => {\n\t\tthis.props.delete(this.props.ind);\n\t}\n\ttoggleParameter = () => {\n\t\tthis.setState({ displayParameter: !this.state.displayParameter });\n\t}\n\tupdateParamA = (data) => {\n\t\tthis.setState({ paramA: data });\n\t}\n\tupdateParamB = (data) => {\n\t\tthis.setState({ paramB: data });\n\t}\n\tcomponentDidMount = () => {\n\t\twindow.MathJax.Hub.Queue([\"Typeset\", window.MathJax.Hub, \"delimWrapper\"]);\n\t}\n\tcomponentDidUpdate = () => {\n\t\tif(!this.state.x.error && this.state.x.input != \"\"){\n\t\t\tif(this.state.paramA.input != \"\" && this.state.paramB.input != \"\"){\n\t\t\t\tif(!this.state.paramA.error && !this.state.paramB.error){\n\t\t\t\t\tlet tempState = {};\n\t\t\t\t\ttempState.x = this.state.x.input.trim();\n\t\t\t\t\ttempState.width = this.state.width;\n\t\t\t\t\ttempState.color = this.state.color;\n\t\t\t\t\ttempState.dashes = new Array(2);\n\t\t\t\t\tthis.state.dashes.forEach((el, ind) => tempState.dashes[ind] = el);\n\t\t\t\t\ttempState.paramA = (this.state.x.input.toString().includes('n')) ? this.state.paramA.input.trim() : \"\";\n\t\t\t\t\ttempState.paramB = (this.state.x.input.toString().includes('n')) ? this.state.paramB.input.trim() : \"\";\n\t\t\t\t\tthis.props.update(this.props.ind, tempState);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tlet tempState = {};\n\t\t\t\ttempState.x = this.state.x.input.trim();\n\t\t\t\ttempState.width = this.state.width;\n\t\t\t\ttempState.color = this.state.color;\n\t\t\t\ttempState.dashes = new Array(2);\n\t\t\t\tthis.state.dashes.forEach((el, ind) => tempState.dashes[ind] = el);\n\t\t\t\ttempState.paramA = (this.state.x.input.toString().includes('n')) ? this.state.paramA.input.trim() : \"\";\n\t\t\t\ttempState.paramB = (this.state.x.input.toString().includes('n')) ? this.state.paramB.input.trim() : \"\";\n\t\t\t\tthis.props.update(this.props.ind, tempState);\n\t\t\t}\n\t\t}\n\t}\n\trender() {\n\t\treturn (<div className=\"delimWrapper\">\n\t\t\t\t\t<div className=\"main\">\n\t\t\t\t\t\t<div className=\"inpWrapper xPosition\">\n\t\t\t\t\t\t\t<FloatInput value={this.state.x.input} update={this.updateX} exceptionKeys={[\"n\"]}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ThicknessInput thickness={this.state.width} update={this.handleWChange}/>\t\t\t\t\n\t\t\t\t\t\t<div className=\"inpWrapper dashes\">\n\t\t\t\t\t\t\t<input className=\"dash\" placeholder=\"1\" value={(this.state.dashes[0] == \"a\") ? \"\" : this.state.dashes[0]} onChange={this.handleDashInput} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"inpWrapper spacing\">\n\t\t\t\t\t\t\t<input className=\"spacing\" placeholder=\"0\" value={(this.state.dashes[1] == \"a\") ? \"\" : this.state.dashes[1]} onChange={this.handleSpacingInput} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ColorPicker update={this.handleColorChange} color={this.state.color} />\n\t\t\t\t\t\t<button className=\"delete\" onClick={this.delete}><FontAwesomeIcon icon={faTimes} /></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"parameter\" style={{ display: (this.state.x.input.toString().includes('n')) ? \"inline-block\" : \"none\" }}>\n\t\t\t\t\t\t<div className=\"wrapper\">\n\t\t\t\t\t\t\t<div className=\"panel\" style={{display: (this.state.displayParameter) ? \"inline-block\" : \"none\"}}>\n\t\t\t\t\t\t\t\t<label>&#92;( n \\in \\hspace{\"6px\"} [ &#92;)</label>\n\t\t\t\t\t\t\t\t<FloatInput placeholder=\"a\" value={this.state.paramA.input} update={this.updateParamA}/>\n\t\t\t\t\t\t\t\t<label>&#92;( , &#92;)</label>\n\t\t\t\t\t\t\t\t<FloatInput placeholder=\"b\" value={this.state.paramB.input} update={this.updateParamB}/>\n\t\t\t\t\t\t\t\t<label>&#92;( ] \\hspace{\"6px\"} \\cap \\hspace{\"6px\"} \\mathbb&#123;Z&#125; &#92;)</label>\n\t\t\t\t\t\t\t\t<button className=\"check\" onClick={this.toggleParameter}><i><FontAwesomeIcon icon={faCheck} size=\"xs\"/></i></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{ \t(!this.state.displayParameter) ?\n\t\t\t\t\t\t\t\t<button className={(this.state.displayParameter) ? \"toggleParameter dropped\" : \"toggleParameter\"} onClick={this.toggleParameter}><i><FontAwesomeIcon icon={(this.state.displayParameter) ? faAngleUp : faAngleDown} size=\"xs\"/></i></button>\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>);\n\t}\n}\n//Wrapper Curve: Template for Functional and Parameterized Curves\nclass WrCurve extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { cEdit: 0, modified: [false, false, false, false], error: false };\n\t\t//animations.push(new Animation(0, 1, 1, [[this.props.type, this.props.cindex]]));\n\t}\n\tcomponentDidMount() {\n\t\twindow.MathJax.Hub.Queue([\"Typeset\", window.MathJax.Hub, \"parameters\"]);\n\t}\n\tcomponentDidUpdate() {\n\t\tthis.input.focus();\n\t\tthis.input.value = curves[this.props.type][this.props.cindex].expressions[this.state.cEdit - 1];\n\t}\n\tprevious = () => {\n\t\tthis.setState({ cEdit: (this.state.cEdit - 1) % 5 });\n\t\tthis.input.value = \"\";\n\t};\n\tnext = () => {\n\t\tthis.setState({\n\t\t\tmodified: this.state.modified.map((el, ind) => {\n\t\t\t\treturn ((ind == (this.state.cEdit - 1)) ? true : el);\n\t\t\t})\n\t\t});\n\t\ttry {\n\t\t\tlet expressions = curves[this.props.type][this.props.cindex].expressions;\n\t\t\tif(this.props.type == 0){\n\t\t\t\tif(this.state.cEdit == 1){\n\t\t\t\t\tvar x = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif(this.state.cEdit == 1 || this.state.cEdit == 2){\n\t\t\t\t\tvar t = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet test = parseFloat(eval(Functions.evaluateInput(this.input.value)));\n\t\t\tif (!isNaN(test)) {\n\t\t\t\tthis.setState({ cEdit: (this.state.cEdit + 1) % 5 }, () => {\n\t\t\t\t\tif (this.props.type === 0) {\n\t\t\t\t\t\tif (!!expressions[1] && !!expressions[2]) {\n\t\t\t\t\t\t\tcurves[this.props.type][this.props.cindex].X = Functions.subdivide(parseFloat(expressions[1]), parseFloat(expressions[2]), nbSubdiv);\n\t\t\t\t\t\t\tfor (let i = 0; i < curves[this.props.type][this.props.cindex].X.length; i++) {\n\t\t\t\t\t\t\t\tlet x = (curves[this.props.type][this.props.cindex].X)[i];\n\t\t\t\t\t\t\t\tcurves[this.props.type][this.props.cindex].Y[i] = eval(Functions.evaluateInput(expressions[0]));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (!!expressions[1] && !!expressions[2] && !!expressions[3]) {\n\t\t\t\t\t\t\t//Subdivided t parameter values tab\n\t\t\t\t\t\t\tlet tab1 = Functions.subdivide(parseFloat(expressions[2]), parseFloat(expressions[3]), nbSubdiv);\n\t\t\t\t\t\t\tfor (let i = 0; i < tab1.length; i++) {\n\t\t\t\t\t\t\t\tlet t = tab1[i];\n\t\t\t\t\t\t\t\tcurves[this.props.type][this.props.cindex].X[i] = eval(Functions.evaluateInput(expressions[0]));\n\t\t\t\t\t\t\t\tcurves[this.props.type][this.props.cindex].Y[i] = eval(Functions.evaluateInput(expressions[1]));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.input.value = \"\";\n\t\t\t\tthis.setState({ error: false });\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.setState({ error: true });\n\t\t\t}\n\t\t}\n\t\tcatch (error) {\n\t\t\tthis.setState({ error: true });\n\t\t}\n\t};\n\tedit = () => {\n\t\tthis.setState({ cEdit: 1 });\n\t};\n\tclone = () => this.props.clone([this.props.type, this.props.cindex]);\n\tsave = () => {\n\t\tthis.setState({\n\t\t\tmodified: this.state.modified.map((el, ind) => {\n\t\t\t\treturn ((ind == (this.state.cEdit - 1)) ? true : el);\n\t\t\t})\n\t\t});\n\t\ttry {\n\t\t\tlet expressions = curves[this.props.type][this.props.cindex].expressions;\n\t\t\tif(this.props.type == 0){\n\t\t\t\tif(this.state.cEdit == 1){\n\t\t\t\t\tvar x = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif(this.state.cEdit == 1 || this.state.cEdit == 2){\n\t\t\t\t\tvar t = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet test = parseFloat(eval(Functions.evaluateInput(this.input.value)));\n\t\t\tif (!isNaN(test)) {\n\t\t\t\tif (this.props.type === 0) {\n\t\t\t\t\tif (!!expressions[1] && !!expressions[2]) {\n\t\t\t\t\t\tcurves[this.props.type][this.props.cindex].X = Functions.subdivide(parseFloat(expressions[1]), parseFloat(expressions[2]), nbSubdiv);\n\t\t\t\t\t\tfor (let i = 0; i < curves[this.props.type][this.props.cindex].X.length; i++) {\n\t\t\t\t\t\t\tlet x = (curves[this.props.type][this.props.cindex].X)[i];\n\t\t\t\t\t\t\tcurves[this.props.type][this.props.cindex].Y[i] = eval(Functions.evaluateInput(expressions[0]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (!!expressions[1] && !!expressions[2] && !!expressions[3]) {\n\t\t\t\t\t\t//Subdivided t parameter values tab\n\t\t\t\t\t\tlet tab1 = Functions.subdivide(parseFloat(expressions[2]), parseFloat(expressions[3]), nbSubdiv);\n\t\t\t\t\t\tfor (let i = 0; i < tab1.length; i++) {\n\t\t\t\t\t\t\tlet t = tab1[i];\n\t\t\t\t\t\t\tcurves[this.props.type][this.props.cindex].X[i] = eval(Functions.evaluateInput(expressions[0]));\n\t\t\t\t\t\t\tcurves[this.props.type][this.props.cindex].Y[i] = eval(Functions.evaluateInput(expressions[1]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.input.value = \"\";\n\t\t\t\tthis.setState({ cEdit: 0, error: false });\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.setState({ error: true });\n\t\t\t}\n\t\t}\n\t\tcatch (error) {\n\t\t\tthis.setState({ error: true });\n\t\t}\n\t};\n\thandleInputChange = (event) => {\n\t\tcurves[this.props.type][this.props.cindex].expressions[this.state.cEdit - 1] = event.target.value;\n\t\tlet test;\n\t\ttry {\n\t\t\tif(this.props.type == 0){\n\t\t\t\tif(this.state.cEdit == 1){\n\t\t\t\t\tvar x = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif((this.state.cEdit == 1) || (this.state.cEdit == 2)){\n\t\t\t\t\tvar t = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = parseFloat(eval(Functions.evaluateInput(event.target.value)));\n\t\t}\n\t\tcatch (error) {\n\t\t}\n\t\tif (isNaN(test) && (event.target.value != \"\") && (this.state.modified[this.state.cEdit - 1])) {\n\t\t\tthis.setState({ error: true });\n\t\t}\n\t\telse {\n\t\t\tthis.setState({ error: false });\n\t\t}\n\t}\n\tinputHandler = (e) => {\n\t\tif (e.which === 13) this.next();\n\t};\n\trender() {\n\t\tlet inputClasses = [], placeholders = [], labels = [];\n\t\tlet selected = ((this.props.currentSett[0] == this.props.type) && (this.props.currentSett[1] == this.props.cindex));\n\t\tif (this.props.type === 0) {\n\t\t\tinputClasses = [\"f\", \"selected f\", \"selected value\", \"selected value\", \"selected value\"];\n\t\t\tplaceholders = [\"cos(sin(x))\", \"cos(sin(x))\", \"-1\", \"1\", \"100\"];\n\t\t\tlabels = [\"f_{ \" + (this.props.cindex + 1) + \" }(x)\", \"a\", \"b\", \"n\"];\n\t\t} else {\n\t\t\tinputClasses = [\"x\", \"selected x\", \"selected y\", \"selected value\", \"selected value\"]\n\t\t\tplaceholders = [\"cos(t)\", \"cos(t)\", \"sin(t)\", \"-4\", \"4\"];\n\t\t\tlabels = [\"x_{ \" + (this.props.cindex + 1) + \" }(t)\", \"y_{ \" + (this.props.cindex + 1) + \" }(t)\", \"a\", \"b\"];\n\t\t}\n\t\treturn (<span className=\"input\" style={{ opacity: (selected) ? 0.4 : 1, pointerEvents: (selected) ? \"none\" : \"auto\" }}>\n\t\t\t<div>\n\t\t\t\t<button className=\"openS\" onClick={() => { if (!this.props.settStatus) this.props.showSett([this.props.type, this.props.cindex]) }} style={{ display: (this.state.cEdit) ? \"none\" : \"inline\" }}><FontAwesomeIcon icon={faCog} /></button>\n\t\t\t\t<button className=\"duplicate\" onClick={this.clone} style={{ display: (this.state.cEdit) ? \"none\" : \"inline\" }}><FontAwesomeIcon icon={faClone} /></button>\n\t\t\t\t<button className=\"save\" onClick={this.save} style={{ display: (this.state.cEdit) ? \"inline\" : \"none\" }}><FontAwesomeIcon icon={faSave} /></button>\n\t\t\t\t<button className=\"previous\" onClick={this.previous} style={{ display: (this.state.cEdit > 1) ? \"inline\" : \"none\" }}><FontAwesomeIcon icon={faAngleLeft} size=\"lg\" /></button>\n\t\t\t\t<label style={{ display: (this.state.cEdit < 2) ? \"inline\" : \"none\" }}>&#92;({labels[0]}&#92;)</label>\n\t\t\t\t<label style={{ display: (this.state.cEdit === 2) ? \"inline\" : \"none\" }}>&#92;({labels[1]}&#92;)</label>\n\t\t\t\t<label style={{ display: (this.state.cEdit === 3) ? \"inline\" : \"none\" }}>&#92;({labels[2]}&#92;)</label>\n\t\t\t\t<label style={{ display: (this.state.cEdit === 4) ? \"inline\" : \"none\" }}>&#92;({labels[3]}&#92;)</label>\n\t\t\t\t<input className={inputClasses[this.state.cEdit] + \" \" + ((this.state.error) ? \"error\" : \"\")} type=\"text\" ref={(input) => { this.input = input; }} onKeyUp={this.inputHandler} placeholder={placeholders[this.state.cEdit]} onChange={this.handleInputChange} />\n\t\t\t\t<button className=\"next\" onClick={this.next} style={{ display: (this.state.cEdit) ? \"inline\" : \"none\" }}><FontAwesomeIcon icon={faAngleRight} size=\"lg\" /></button>\n\t\t\t\t<button className=\"edit\" onClick={this.edit} style={{ display: (this.state.cEdit) ? \"none\" : \"inline\" }}><FontAwesomeIcon icon={faPencilAlt} /></button>\n\t\t\t</div>\n\t\t\t<div className=\"delete\" style={{ display: (this.state.cEdit || this.props.settStatus) ? \"none\" : \"inline\" }}>\n\t\t\t\t<button className=\"delete\" onClick={() => { this.props.delete([this.props.type, this.props.cindex]) }}><FontAwesomeIcon icon={faTimes} /></button>\n\t\t\t</div>\n\t\t</span>);\n\t}\n}\nclass Settings extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tlet ind = this.props.currentSett;\n\t\tdelimiters = curves[ind[0]][ind[1]].delimiters;\n\t\tthis.state = {\n\t\t\tind: ind,\n\t\t\tthickness: curves[ind[0]][ind[1]].width,\n\t\t\tdashes: curves[ind[0]][ind[1]].dashes,\n\t\t\tdelimiters: delimiters,\n\t\t\tcolor: curves[ind[0]][ind[1]].color,\n\t\t\tanchor: animations[(findInd(ind))[0]].anchor,\n\t\t\tduration: animations[(findInd(ind))[0]].duration,\n\t\t\tanimType: animations[(findInd(ind))[0]].type,\n\t\t\terror: false\n\t\t};\n\t}\n\tcomponentDidMount() {\n\t\twindow.MathJax.Hub.Queue([\"Typeset\", window.MathJax.Hub, \"settWrapper\"]);\n\t}\n\tsave = () => {\n\t\tlet index = this.state.ind;\n\t\tcurves[index[0]][index[1]].width = this.state.thickness;\n\t\tcurves[index[0]][index[1]].color = this.state.color;\n\t\tthis.state.dashes.forEach((el, ind) => curves[index[0]][index[1]].dashes[ind] = el);\n\t\tdelimiters.forEach((el, ind) => curves[index[0]][index[1]].delimiters[ind] = el);\n\t\tanimations[findInd(index)[0]].anchor = this.state.anchor;\n\t\tanimations[findInd(index)[0]].duration = this.state.duration;\n\t\tthis.props.hide();\n\t}\n\tupdateThickness = (thickness) => this.setState({thickness: thickness});\n\taddDelimiter = () => {\n\t\tdelimiters.push({ x: 0, width: 2, dashes: [1, 2], color: \"#FFFFFF\", paramA: \"\", paramB: \"\" });\n\t\tthis.setState({ delimiters: delimiters });\n\t}\n\tclearDelimiters = () => {\n\t\tdelimiters = [];\n\t\tthis.setState({ delimiters: delimiters });\n\t}\n\tupdateDelim = (index, data) => {\n\t\tdelimiters[index] = data;\n\t}\n\tdeleteDelim = (ind) => {\n\t\tdelimiters.splice(ind, 1);\n\t\tthis.setState({ delimiters: delimiters });\n\t}\n\thandleError = (error) => {\n\t\tthis.setState({ error: error });\n\t}\n\t//<SketchPicker color={(!!this.state.color.hex) ? this.state.color.hex : this.state.color} onChangeComplete={(color) => this.setState({color: color})}/>\n\t//<ColorPicker color={this.state.curveColor} update={(color) => this.setState({curveColor: color})} />\n\trender() {\n\t\tlet ind = this.state.ind;\n\t\treturn (<div id=\"settWrapper\">\n\t\t\t<nav id=\"centerControls\">\n\t\t\t\t<span className=\"title\">\n\t\t\t\t\t<label>Settings</label>\n\t\t\t\t</span>\n\t\t\t\t<span className=\"buttons\">\n\t\t\t\t\t<button onClick={this.reset}> Reset </button>\n\t\t\t\t\t<button onClick={this.save}> Save </button>\n\t\t\t\t</span>\n\t\t\t</nav>\n\t\t\t<div id=\"fsettings\">\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"subrow curve\">\n\t\t\t\t\t\t<div className=\"wrapper\">\n\t\t\t\t\t\t\t<div className=\"subwrapper\">\n\t\t\t\t\t\t\t\t<label>Thickness</label>\n\t\t\t\t\t\t\t\t<ThicknessInput thickness={this.state.thickness} update={this.updateThickness} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"subwrapper\">\n\t\t\t\t\t\t\t\t<label>Dash:Spacing</label>\n\t\t\t\t\t\t\t\t<input className=\"dash\" placeholder=\"1\" value={(this.state.dashes[0] == -1) ? \"\" : this.state.dashes[0]} onChange={(e) => {\n\t\t\t\t\t\t\t\t\tif (e.target.value == \"\") {\n\t\t\t\t\t\t\t\t\t\tthis.setState({ dashes: [-1, this.state.dashes[1]] });\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tif (!isNaN(e.target.value)) {\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({ dashes: [parseInt(e.target.value), this.state.dashes[1]] });\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}} />\n\t\t\t\t\t\t\t\t<input className=\"spacing\" placeholder=\"0\" value={(this.state.dashes[1] == -1) ? \"\" : this.state.dashes[1]} onChange={(e) => {\n\t\t\t\t\t\t\t\t\tif (e.target.value == \"\") {\n\t\t\t\t\t\t\t\t\t\tthis.setState({ dashes: [this.state.dashes[0], -1] });\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tif (!isNaN(e.target.value)) {\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({ dashes: [this.state.dashes[0], parseInt(e.target.value)] });\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"subwrapper\">\n\t\t\t\t\t\t\t\t<label>Color</label>\n\t\t\t\t\t\t\t\t<ColorPicker update={(color) => this.setState({ color: color })} color={this.state.color} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"subrow\">\n\t\t\t\t\t\t<div className=\"wrapper\">\n\t\t\t\t\t\t\t<div className=\"subwrapper\">\n\t\t\t\t\t\t\t\t<label>Divide into: </label>\n\t\t\t\t\t\t\t\t<input type=\"text\" id=\"divide\" placeholder=\"20\" maxLength=\"3\" /><button id=\"divideb\">Divide</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"row delimiters\">\n\t\t\t\t\t<div className=\"subrow topDelim\">\n\t\t\t\t\t\t<div className=\"wrapper\">\n\t\t\t\t\t\t\t<div className=\"subwrapper delimLabel\">\n\t\t\t\t\t\t\t\t<label>Delimiters</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"subwrapper buttons\">\n\t\t\t\t\t\t\t\t<button onClick={this.addDelimiter}>Add delimiter</button>\n\t\t\t\t\t\t\t\t<button onClick={this.clearDelimiters}>Clear all</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div><br/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"subrow\">\n\t\t\t\t\t\t<div className=\"wrapper\">\n\t\t\t\t\t\t\t<div className=\"subwrapper delimTable\">\n\t\t\t\t\t\t\t\t<div className=\"labels\">\n\t\t\t\t\t\t\t\t\t<div className=\"delimColumn xPosition\">\n\t\t\t\t\t\t\t\t\t\t<label>x</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"delimColumn thickness\">\n\t\t\t\t\t\t\t\t\t\t<label>width</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"delimColumn dashes\">\n\t\t\t\t\t\t\t\t\t\t<label>dash:space</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"delimColumn color\">\n\t\t\t\t\t\t\t\t\t\t<label>color</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"delimColumn filler\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"delimList\">\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.state.delimiters.map((el, index) => {\n\t\t\t\t\t\t\t\t\t\t\treturn <Delimiter x={el.x} width={el.width} dashes={[el.dashes[0], el.dashes[1]]} color={el.color} key={el.x.toString() + index.toString()} ind={index} delete={this.deleteDelim} update={this.updateDelim} handleError={this.handleError} \n\t\t\t\t\t\t\t\t\t\t\t\tparamA={el.paramA}\n\t\t\t\t\t\t\t\t\t\t\t\tparamB={el.paramB}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"subrow\" >\n\t\t\t\t\t\t<div className=\"wrapper\">\n\t\t\t\t\t\t\t<div className=\"subwrapper\">\n\t\t\t\t\t\t\t\t<label>Starting time: </label>\n\t\t\t\t\t\t\t\t<input type=\"text\" id=\"anchor\" value={this.state.anchor} onChange={(e) => this.setState({ anchor: parseInt(e.target.value) })} /> seconds\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"subwrapper\">\n\t\t\t\t\t\t\t\t<label>Duration: </label>\n\t\t\t\t\t\t\t\t<input type=\"text\" id=\"duration\" value={this.state.duration} onChange={(e) => this.setState({ duration: parseInt(e.target.value) })} /> seconds\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"subrow\">\n\t\t\t\t\t\t<div className=\"wrapper\">\n\t\t\t\t\t\t\t<div className=\"subwrapper\">\n\t\t\t\t\t\t\t\t<button className={(this.state.animType == 0) ? \"anim selected\" : \"anim\"} id=\"noanim\" onClick={() => this.setState({ animType: 0 })}>No animation</button>\n\t\t\t\t\t\t\t\t<button className={(this.state.animType == 1) ? \"anim selected\" : \"anim\"} id=\"morph\" onClick={() => this.setState({ animType: 1 })}>Morph</button>\n\t\t\t\t\t\t\t\t<button className={(this.state.animType == 2) ? \"anim selected\" : \"anim\"} id=\"completeb\">Complete</button>\n\t\t\t\t\t\t\t\t<button className={(this.state.animType == 3) ? \"anim selected\" : \"anim\"} id=\"chase\">Chase</button>\n\t\t\t\t\t\t\t\t<button className={(this.state.animType == 4) ? \"anim selected\" : \"anim\"} id=\"rotate\">Rotate</button>\n\t\t\t\t\t\t\t\t<button className={(this.state.animType == 5) ? \"anim selected\" : \"anim\"} id=\"recompose\">Recompose</button>\n\t\t\t\t\t\t\t\t<button className={(this.state.animType == 6) ? \"anim selected\" : \"anim\"} id=\"mover\">Scroll right</button>\n\t\t\t\t\t\t\t\t<button className={(this.state.animType == 7) ? \"anim selected\" : \"anim\"} id=\"movel\">Scroll left</button>\n\t\t\t\t\t\t\t\t<button className={(this.state.animType == 8) ? \"anim selected\" : \"anim\"} id=\"moveu\">Scroll up</button>\n\t\t\t\t\t\t\t\t<button className={(this.state.animType == 9) ? \"anim selected\" : \"anim\"} id=\"moved\">Scroll down</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>);\n\t}\n}\n\nclass Canvas extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcolors: {\n\t\t\t\taxeColor: \"#e6e4e7\",\n\t\t\t\twireColor: \"#28262d\",\n\t\t\t\tdashColor: \"#e6e4e7\",\n\t\t\t\tcurveColor: \"#ebe9ec\"\n\t\t\t},\n\t\t\twidths: {\n\t\t\t\taxeWdith: [1, 1],\n\t\t\t\twireWidth: [1, 1],\n\t\t\t\tdashWidth: {\n\t\t\t\t\tx: [2, 2],\n\t\t\t\t\ty: [2, 2]\n\t\t\t\t}\n\t\t\t},\n\t\t\tdrawnSteps: {\n\t\t\t\tnbSteps: {\n\t\t\t\t\tx: [9, 9],\n\t\t\t\t\ty: [8, 8]\n\t\t\t\t},\n\t\t\t\toffStepSteps: {\n\t\t\t\t\tx: [1, 1],\n\t\t\t\t\ty: [1, 1]\n\t\t\t\t},\n\t\t\t\tstepSize: {\n\t\t\t\t\tx: [35, 35],//for positive then negative x\n\t\t\t\t\ty: [35, 35]//for positive then negative y\n\t\t\t\t}\n\t\t\t},\n\t\t\tfont: {\n\t\t\t\tx: [\"11px Arial\", \"11px Arial\"],\n\t\t\t\ty: [\"11px Arial\", \"11px Arial\"]\n\t\t\t},\n\t\t\tsteps: {\n\t\t\t\tx: [.25, .25],\n\t\t\t\ty: [.25, .25]\n\t\t\t},\n\t\t\t//Variable for updating time display\n\t\t\tcount: 0\n\t\t};\n\t}\n\tplay = () => {\n\t\t//Don't delete, pointer is to be used inside setInterval\n\t\tlet pointer = this;\n\t\tlet A = this.state;\n\t\tconst canvas = this.refs.canvas;\n\t\tconst context = canvas.getContext(\"2d\");\n\t\tthis.setState((state, props) => {\n\t\t\tlet newState = state;\n\t\t\t//Temporary xstep, ystep\n\t\t\tlet tstep = Functions.Maximum([Functions.xstep([...curves[0], ...curves[1]], A.drawnSteps.nbSteps.x, A.drawnSteps.offStepSteps.x), Functions.ystep([...curves[0], ...curves[1]], A.drawnSteps.nbSteps.y, A.drawnSteps.offStepSteps.y)]);\n\t\t\tnewState.steps.x = [tstep, tstep];\n\t\t\tnewState.steps.y = [tstep, tstep];\n\t\t\treturn newState;\n\t\t}, () => {\n\t\t\t//frameDuration in milliseconds\n\t\t\tframeDuration = Functions.Minimum(animations.map(el => 1000 / (el.fps)));\n\t\t\t//totalDuration in seconds\n\t\t\ttotalDuration = Functions.Maximum(animations.map(el => el.anchor + el.duration));\n\t\t\tlet drawFramePointer = this.drawFrame;\n\t\t\t//If animation already running\n\t\t\tif (!!mainLoop) {\n\t\t\t\twindow.clearInterval(mainLoop);\n\t\t\t\t//If not paused start from the beginning\n\t\t\t\tif (!paused) {\n\t\t\t\t\tk = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//Either way set paused to false since it's playing now\n\t\t\tpaused = false;\n\t\t\tmainLoop = window.setInterval(function () {\n\t\t\t\t//console.log(\"k: \" + k);\n\t\t\t\tif (k < (totalDuration * 1000) / frameDuration) {\n\t\t\t\t\tk++;\n\t\t\t\t\tdrawFramePointer();\n\t\t\t\t\tanimations.forEach((el, ind) => {\n\t\t\t\t\t\tlet animation = el;\n\t\t\t\t\t\tanimation.fps = 1000 / frameDuration;\n\t\t\t\t\t\tif (((k >= animation.anchor * animation.fps) && (k <= ((animation.anchor * animation.fps) + (animation.duration * animation.fps))))) {\n\t\t\t\t\t\t\t//Feeding the execute function (k - animation.anchor*animation.fps) instead of k, as if the animation just started with its anchor \n\t\t\t\t\t\t\tanimation.execute([A.steps.x, A.steps.y], [A.drawnSteps.stepSize.x, A.drawnSteps.stepSize.y], [canvas.width, canvas.height], k - animation.anchor * animation.fps, context);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tpointer.setState({ count: k });\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\twindow.clearInterval(mainLoop);\n\t\t\t\t\tmainLoop = 0;\n\t\t\t\t\tk = 0;\n\t\t\t\t}\n\t\t\t}, frameDuration);\n\t\t\t/*for(let i = 0; i < animations.length; i++){\n\t\t\t\tanimations[i].execute([A.steps.x, A.steps.y], [A.drawnSteps.stepSize.x, A.drawnSteps.stepSize.y], [canvas.width, canvas.height], context, this.drawFrame);\n\t\t\t}*/\n\t\t});\n\t}\n\tpause = () => {\n\t\twindow.clearInterval(mainLoop);\n\t\tpaused = true;\n\t\tthis.setState({ count: k });\n\t}\n\tstop = () => {\n\t\twindow.clearInterval(mainLoop);\n\t\tmainLoop = 0;\n\t\tk = 0;\n\t\tthis.setState({ count: k }, this.drawFrame);\n\t}\n\tdrawFrame = () => {\n\t\tlet A = this.state;\n\t\tconst canvas = this.refs.canvas;\n\t\tconst context = canvas.getContext(\"2d\");\n\t\tcontext.clearRect(0, 0, canvas.width, canvas.height);\n\t\tFunctions.drawYAxis(canvas.width / 2, A.colors.axeColor, canvas.height, A.widths.axeWidth, context);\n\t\tFunctions.drawXAxis(canvas.height / 2, A.colors.axeColor, canvas.width, A.widths.axeWidth, context);\n\t\tFunctions.drawOnX(canvas.width / 2, canvas.height / 2, A.steps.x[0], A.drawnSteps.nbSteps.x[0], A.drawnSteps.stepSize.x[0], A.colors.dashColor, A.colors.wireColor, A.widths.dashWidth.x[0], A.widths.wireWidth[0], A.font.x[0], context);\n\t\tFunctions.drawOnY(canvas.width / 2, canvas.height / 2, A.steps.y[0], A.drawnSteps.nbSteps.y[0], A.drawnSteps.stepSize.y[0], A.colors.dashColor, A.colors.wireColor, A.widths.dashWidth.y[0], A.widths.wireWidth[0], A.font.y[0], context);\n\t\tFunctions.drawOnMinusX(canvas.width / 2, canvas.height / 2, A.steps.x[1], A.drawnSteps.nbSteps.x[0], A.drawnSteps.stepSize.x[1], A.colors.dashColor, A.colors.wireColor, A.widths.dashWidth.x[1], A.widths.wireWidth[0], A.font.x[1], context);\n\t\tFunctions.drawOnMinusY(canvas.width / 2, canvas.height / 2, A.steps.y[1], A.drawnSteps.nbSteps.y[1], A.drawnSteps.stepSize.y[1], A.colors.dashColor, A.colors.wireColor, A.widths.dashWidth.y[1], A.widths.wireWidth[0], A.font.y[1], context);\n\t}\n\tcomponentDidMount() {\n\t\tthis.setState({ canvas: this.refs.canvasW }, () => {\n\t\t\tthis.setState(() => {\n\t\t\t\tlet tempSteps = this.state.drawnSteps;\n\t\t\t\tlet nbXSteps = parseInt((this.state.canvas.clientWidth / 2) / tempSteps.stepSize.x[0]);\n\t\t\t\tlet nbYSteps = parseInt((this.state.canvas.clientHeight / 2) / tempSteps.stepSize.y[0]);\n\t\t\t\ttempSteps.nbSteps.x = [nbXSteps, nbXSteps];\n\t\t\t\ttempSteps.nbSteps.y = [nbYSteps, nbYSteps];\n\t\t\t\treturn tempSteps;\n\t\t\t});\n\t\t});\n\t}\n\tcomponentDidUpdatedate() {\n\t}\n\trender() {\n\t\tif (!this.state.canvas) {\n\t\t\treturn (<div id=\"canvasWrapper\" style={{ width: (!this.props.settStatus) ? \"80%\" : \"50%\" }}>\n\t\t\t\t<LControls play={this.play} pause={this.pause} stop={this.stop} count={(this.state.count * frameDuration) / 1000} />\n\t\t\t\t<div id=\"canvas\" ref=\"canvasW\"></div>\n\t\t\t</div>);\n\t\t}\n\t\telse {\n\t\t\treturn (<div id=\"canvasWrapper\" style={{ width: (!this.props.settStatus) ? \"80%\" : \"50%\" }}>\n\t\t\t\t<LControls play={this.play} pause={this.pause} stop={this.stop} count={(this.state.count * frameDuration) / 1000} />\n\t\t\t\t<div id=\"canvas\" ref=\"canvasW\">\n\t\t\t\t\t<canvas ref=\"canvas\" id=\"graph\" width={this.state.canvas.clientWidth} height={this.state.canvas.clientHeight}></canvas>\n\t\t\t\t\t<canvas id=\"toplayer\" width={this.state.canvas.clientWidth} height={this.state.canvas.clientHeight}></canvas>\n\t\t\t\t</div>\n\t\t\t</div>);\n\t\t}\n\t}\n}\n\nclass LControls extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\t}\n\trender() {\n\t\treturn (<nav id=\"leftControls\">\n\t\t\t<span>\n\t\t\t\t<h4>Animation 1 </h4>\n\t\t\t</span>\n\t\t\t<nav>\n\t\t\t\t<button onClick={this.props.play}><FontAwesomeIcon icon={faPlay} /></button>\n\t\t\t\t<button onClick={this.props.pause}><FontAwesomeIcon icon={faPause} /></button>\n\t\t\t\t<button onClick={this.props.stop}><FontAwesomeIcon icon={faStop} /></button>\n\t\t\t</nav>\n\t\t\t<span>\n\t\t\t\t<h4 className=\"count\">{this.props.count}</h4>\n\t\t\t\t<h4 className=\"seconds\"> s </h4>\n\t\t\t</span>\n\t\t\t<nav>\n\t\t\t\t<button><FontAwesomeIcon icon={faSearchPlus} /></button>\n\t\t\t\t<button><FontAwesomeIcon icon={faSearchMinus} /></button>\n\t\t\t\t<button><FontAwesomeIcon icon={faArrowLeft} /></button>\n\t\t\t\t<button><FontAwesomeIcon icon={faArrowRight} /></button>\n\t\t\t\t<button><FontAwesomeIcon icon={faArrowUp} /></button>\n\t\t\t\t<button><FontAwesomeIcon icon={faArrowDown} /></button>\n\t\t\t</nav>\n\t\t\t<nav>\n\t\t\t\t<button><b>Save</b></button>\n\t\t\t\t<button><b>Export</b></button>\n\t\t\t</nav>\n\t\t</nav>);\n\t}\n}\n\nclass RControls extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\t}\n\trender() {\n\t\treturn (<nav id=\"rightControls\">\n\t\t\t<span className=\"title\">\n\t\t\t\t<h4>Curves</h4>\n\t\t\t</span>\n\t\t\t<span className=\"buttons\">\n\t\t\t\t<button> Clear All </button>\n\t\t\t</span>\n\t\t</nav>);\n\t}\n}\n\nclass ParamWrapper extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = { curves: curves, animations: animations };\n\t}\n\tnewCurve = () => {\n\t\tcurves[0].push(new Curve2d([], [], \"#FFFFFF\", 3, [1, 0]));\n\t\tanimations.push(new Animation(0, 0, 1, 10, [[0, curves[0].length - 1]]));\n\t\tthis.setState({ curves: curves, animations});\n\t};\n\tnewPCurve = () => {\n\t\tcurves[1].push(new Curve2d([], [], \"#FFFFFF\", 3, [1, 0]));\n\t\tanimations.push(new Animation(0, 0, 1, 10, [[1, curves[1].length - 1]]));\n\t\tthis.setState({ curves: curves, animations });\n\t};\n\tclone = ([type, index]) => {\n\t\tlet clone = new Curve2d([], [], \"\", 0, [0, 0]);\n\t\tcloneCurveInto(curves[type][index], clone);\n\t\tcurves[type].push(clone);\n\t\tanimations.push(new Animation(0, 0, 1, 10, [[type, curves[type].length - 1]]));\n\t\tthis.setState({ curves: curves, animations });\n\t}\n\tdelete = (arg) => {\n\t\tcurves[arg[0]].splice(arg[1], 1);\n\t\t//Deleting curve from relevant animation\n\t\tlet indice = findInd(arg);\n\t\tanimations[indice[0]].curvInd.splice(indice[1], 1);\n\t\t//Adjusting curve indices after deletion\n\t\tanimations.forEach((el, ind) => {\n\t\t\tif (ind == indice[0]) {\n\t\t\t\tif (!!(el.curvInd[indice[1]])) {\n\t\t\t\t\tel.curvInd.forEach((element, index) => element[1] -= (index >= indice[1] && element[0] == arg[0]) ? 1 : 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (ind > indice[0]) {\n\t\t\t\tel.curvInd.forEach((element, index) => element[1] -= (element[0] == arg[0]) ? 1 : 0);\n\t\t\t}\n\t\t});\n\t\t//Deleting empty animations that may be due to deletion\n\t\tanimations = animations.filter(el => el.curvInd.length > 0);\n\t\t//Ajdusting animations left with only one curve by setting their type to 0\n\t\tanimations.forEach(el => { if (el.curvInd.length == 1) el.type = 0 });\n\t\tthis.setState({ curves: curves });\n\t};\n\trender() {\n\t\treturn (<div id=\"paramWrapper\">\n\t\t\t<RControls />\n\t\t\t<div id=\"parameters\">\n\t\t\t\t<div className=\"buttons\">\n\t\t\t\t\t<button id=\"addc\" onClick={this.newCurve}> <FontAwesomeIcon icon={faPlus} /> FCurve </button>\n\t\t\t\t\t<button id=\"addp\" onClick={this.newPCurve}> <FontAwesomeIcon icon={faPlus} /> PCurve </button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"inputs\">\n\t\t\t\t\t{animations.map((el, ind) => {\n\t\t\t\t\t\tif (el.curvInd.length == 1) {\n\t\t\t\t\t\t\treturn <WrCurve key={[el.curvInd[0][0], el.curvInd[0][1]].toString()} type={el.curvInd[0][0]} cindex={el.curvInd[0][1]} clone={this.clone} delete={this.delete} showSett={this.props.showSett} currentSett={this.props.currentSett} settStatus={this.props.settStatus} />;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\treturn <span className=\"inputWrapper\" key={ind}>\n\t\t\t\t\t\t\t\t{el.curvInd.map((element, index) => {\n\t\t\t\t\t\t\t\t\treturn <WrCurve key={[element[0], element[1]].toString()} type={element[0]} cindex={element[1]} clone={this.clone} delete={this.delete} showSett={this.props.showSett} currentSett={this.props.currentSett} settStatus={this.props.settStatus} />\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</span>;\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t</div><br />\n\t\t\t</div>\n\t\t\t<div id=\"logo\">\n\t\t\t\t<img src=\"drawing.svg\" width=\"35%\" />\n\t\t\t</div>\n\t\t</div>);\n\t}\n}\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tcurves[0].push(new Curve2d([], [], \"#FFFFFF\", 3, [1, 0]));\n\t\tanimations.push(new Animation(0, 0, 1, 10, [[0, 0]]));\n\t\tthis.state = { curves: curves, settStatus: false, currentSett: [] };\n\t};\n\tshowSett = (curveInd) => {\n\t\tthis.setState({ settStatus: true, currentSett: curveInd });\n\t}\n\thideSett = () => {\n\t\tthis.setState({ settStatus: false, currentSett: [[]] });\n\t}\n\trender() {\n\t\tlet sett = (this.state.settStatus) ? <Settings currentSett={this.state.currentSett} hide={this.hideSett} /> : null;\n\t\treturn (<div id=\"main\">\n\t\t\t<div id=\"core\">\n\t\t\t\t<Canvas />\n\t\t\t\t{sett}\n\t\t\t\t<ParamWrapper showSett={this.showSett} currentSett={this.state.currentSett} settStatus={this.state.settStatus} />\n\t\t\t</div>\n\t\t</div>);\n\t}\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}