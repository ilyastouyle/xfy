{"ast":null,"code":"/**\r\n * jscolor - JavaScript Color Picker\r\n *\r\n * @link    http://jscolor.com\r\n * @license For open source use: GPLv3\r\n *          For commercial use: JSColor Commercial License\r\n * @author  Jan Odvarko\r\n * @version 2.0.5\r\n *\r\n * See usage examples at http://jscolor.com/examples/\r\n */\n\"use strict\";\n\nif (!window.jscolor) {\n  window.jscolor = function () {\n    var jsc = {\n      register: function () {\n        jsc.attachDOMReadyEvent(jsc.init);\n        jsc.attachEvent(document, 'mousedown', jsc.onDocumentMouseDown);\n        jsc.attachEvent(document, 'touchstart', jsc.onDocumentTouchStart);\n        jsc.attachEvent(window, 'resize', jsc.onWindowResize);\n      },\n      init: function () {\n        if (jsc.jscolor.lookupClass) {\n          jsc.jscolor.installByClassName(jsc.jscolor.lookupClass);\n        }\n      },\n      tryInstallOnElements: function (elms, className) {\n        var matchClass = new RegExp('(^|\\\\s)(' + className + ')(\\\\s*(\\\\{[^}]*\\\\})|\\\\s|$)', 'i');\n\n        for (var i = 0; i < elms.length; i += 1) {\n          if (elms[i].type !== undefined && elms[i].type.toLowerCase() == 'color') {\n            if (jsc.isColorAttrSupported) {\n              // skip inputs of type 'color' if supported by the browser\n              continue;\n            }\n          }\n\n          var m;\n\n          if (!elms[i].jscolor && elms[i].className && (m = elms[i].className.match(matchClass))) {\n            var targetElm = elms[i];\n            var optsStr = null;\n            var dataOptions = jsc.getDataAttr(targetElm, 'jscolor');\n\n            if (dataOptions !== null) {\n              optsStr = dataOptions;\n            } else if (m[4]) {\n              optsStr = m[4];\n            }\n\n            var opts = {};\n\n            if (optsStr) {\n              try {\n                opts = new Function('return (' + optsStr + ')')();\n              } catch (eParseError) {\n                jsc.warn('Error parsing jscolor options: ' + eParseError + ':\\n' + optsStr);\n              }\n            }\n\n            targetElm.jscolor = new jsc.jscolor(targetElm, opts);\n          }\n        }\n      },\n      isColorAttrSupported: function () {\n        var elm = document.createElement('input');\n\n        if (elm.setAttribute) {\n          elm.setAttribute('type', 'color');\n\n          if (elm.type.toLowerCase() == 'color') {\n            return true;\n          }\n        }\n\n        return false;\n      }(),\n      isCanvasSupported: function () {\n        var elm = document.createElement('canvas');\n        return !!(elm.getContext && elm.getContext('2d'));\n      }(),\n      fetchElement: function (mixed) {\n        return typeof mixed === 'string' ? document.getElementById(mixed) : mixed;\n      },\n      isElementType: function (elm, type) {\n        return elm.nodeName.toLowerCase() === type.toLowerCase();\n      },\n      getDataAttr: function (el, name) {\n        var attrName = 'data-' + name;\n        var attrValue = el.getAttribute(attrName);\n\n        if (attrValue !== null) {\n          return attrValue;\n        }\n\n        return null;\n      },\n      attachEvent: function (el, evnt, func) {\n        if (el.addEventListener) {\n          el.addEventListener(evnt, func, false);\n        } else if (el.attachEvent) {\n          el.attachEvent('on' + evnt, func);\n        }\n      },\n      detachEvent: function (el, evnt, func) {\n        if (el.removeEventListener) {\n          el.removeEventListener(evnt, func, false);\n        } else if (el.detachEvent) {\n          el.detachEvent('on' + evnt, func);\n        }\n      },\n      _attachedGroupEvents: {},\n      attachGroupEvent: function (groupName, el, evnt, func) {\n        if (!jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\n          jsc._attachedGroupEvents[groupName] = [];\n        }\n\n        jsc._attachedGroupEvents[groupName].push([el, evnt, func]);\n\n        jsc.attachEvent(el, evnt, func);\n      },\n      detachGroupEvents: function (groupName) {\n        if (jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\n          for (var i = 0; i < jsc._attachedGroupEvents[groupName].length; i += 1) {\n            var evt = jsc._attachedGroupEvents[groupName][i];\n            jsc.detachEvent(evt[0], evt[1], evt[2]);\n          }\n\n          delete jsc._attachedGroupEvents[groupName];\n        }\n      },\n      attachDOMReadyEvent: function (func) {\n        var fired = false;\n\n        var fireOnce = function () {\n          if (!fired) {\n            fired = true;\n            func();\n          }\n        };\n\n        if (document.readyState === 'complete') {\n          setTimeout(fireOnce, 1); // async\n\n          return;\n        }\n\n        if (document.addEventListener) {\n          document.addEventListener('DOMContentLoaded', fireOnce, false); // Fallback\n\n          window.addEventListener('load', fireOnce, false);\n        } else if (document.attachEvent) {\n          // IE\n          document.attachEvent('onreadystatechange', function () {\n            if (document.readyState === 'complete') {\n              document.detachEvent('onreadystatechange', arguments.callee);\n              fireOnce();\n            }\n          }); // Fallback\n\n          window.attachEvent('onload', fireOnce); // IE7/8\n\n          if (document.documentElement.doScroll && window == window.top) {\n            var tryScroll = function () {\n              if (!document.body) {\n                return;\n              }\n\n              try {\n                document.documentElement.doScroll('left');\n                fireOnce();\n              } catch (e) {\n                setTimeout(tryScroll, 1);\n              }\n            };\n\n            tryScroll();\n          }\n        }\n      },\n      warn: function (msg) {\n        if (window.console && window.console.warn) {\n          window.console.warn(msg);\n        }\n      },\n      preventDefault: function (e) {\n        if (e.preventDefault) {\n          e.preventDefault();\n        }\n\n        e.returnValue = false;\n      },\n      captureTarget: function (target) {\n        // IE\n        if (target.setCapture) {\n          jsc._capturedTarget = target;\n\n          jsc._capturedTarget.setCapture();\n        }\n      },\n      releaseTarget: function () {\n        // IE\n        if (jsc._capturedTarget) {\n          jsc._capturedTarget.releaseCapture();\n\n          jsc._capturedTarget = null;\n        }\n      },\n      fireEvent: function (el, evnt) {\n        if (!el) {\n          return;\n        }\n\n        if (document.createEvent) {\n          var ev = document.createEvent('HTMLEvents');\n          ev.initEvent(evnt, true, true);\n          el.dispatchEvent(ev);\n        } else if (document.createEventObject) {\n          var ev = document.createEventObject();\n          el.fireEvent('on' + evnt, ev);\n        } else if (el['on' + evnt]) {\n          // alternatively use the traditional event model\n          el['on' + evnt]();\n        }\n      },\n      classNameToList: function (className) {\n        return className.replace(/^\\s+|\\s+$/g, '').split(/\\s+/);\n      },\n      // The className parameter (str) can only contain a single class name\n      hasClass: function (elm, className) {\n        if (!className) {\n          return false;\n        }\n\n        return -1 != (' ' + elm.className.replace(/\\s+/g, ' ') + ' ').indexOf(' ' + className + ' ');\n      },\n      // The className parameter (str) can contain multiple class names separated by whitespace\n      setClass: function (elm, className) {\n        var classList = jsc.classNameToList(className);\n\n        for (var i = 0; i < classList.length; i += 1) {\n          if (!jsc.hasClass(elm, classList[i])) {\n            elm.className += (elm.className ? ' ' : '') + classList[i];\n          }\n        }\n      },\n      // The className parameter (str) can contain multiple class names separated by whitespace\n      unsetClass: function (elm, className) {\n        var classList = jsc.classNameToList(className);\n\n        for (var i = 0; i < classList.length; i += 1) {\n          var repl = new RegExp('^\\\\s*' + classList[i] + '\\\\s*|' + '\\\\s*' + classList[i] + '\\\\s*$|' + '\\\\s+' + classList[i] + '(\\\\s+)', 'g');\n          elm.className = elm.className.replace(repl, '$1');\n        }\n      },\n      getStyle: function (elm) {\n        return window.getComputedStyle ? window.getComputedStyle(elm) : elm.currentStyle;\n      },\n      setStyle: function () {\n        var helper = document.createElement('div');\n\n        var getSupportedProp = function (names) {\n          for (var i = 0; i < names.length; i += 1) {\n            if (names[i] in helper.style) {\n              return names[i];\n            }\n          }\n        };\n\n        var props = {\n          borderRadius: getSupportedProp(['borderRadius', 'MozBorderRadius', 'webkitBorderRadius']),\n          boxShadow: getSupportedProp(['boxShadow', 'MozBoxShadow', 'webkitBoxShadow'])\n        };\n        return function (elm, prop, value) {\n          switch (prop.toLowerCase()) {\n            case 'opacity':\n              var alphaOpacity = Math.round(parseFloat(value) * 100);\n              elm.style.opacity = value;\n              elm.style.filter = 'alpha(opacity=' + alphaOpacity + ')';\n              break;\n\n            default:\n              elm.style[props[prop]] = value;\n              break;\n          }\n        };\n      }(),\n      setBorderRadius: function (elm, value) {\n        jsc.setStyle(elm, 'borderRadius', value || '0');\n      },\n      setBoxShadow: function (elm, value) {\n        jsc.setStyle(elm, 'boxShadow', value || 'none');\n      },\n      getElementPos: function (e, relativeToViewport) {\n        var x = 0,\n            y = 0;\n        var rect = e.getBoundingClientRect();\n        x = rect.left;\n        y = rect.top;\n\n        if (!relativeToViewport) {\n          var viewPos = jsc.getViewPos();\n          x += viewPos[0];\n          y += viewPos[1];\n        }\n\n        return [x, y];\n      },\n      getElementSize: function (e) {\n        return [e.offsetWidth, e.offsetHeight];\n      },\n      // get pointer's X/Y coordinates relative to viewport\n      getAbsPointerPos: function (e) {\n        if (!e) {\n          e = window.event;\n        }\n\n        var x = 0,\n            y = 0;\n\n        if (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\n          // touch devices\n          x = e.changedTouches[0].clientX;\n          y = e.changedTouches[0].clientY;\n        } else if (typeof e.clientX === 'number') {\n          x = e.clientX;\n          y = e.clientY;\n        }\n\n        return {\n          x: x,\n          y: y\n        };\n      },\n      // get pointer's X/Y coordinates relative to target element\n      getRelPointerPos: function (e) {\n        if (!e) {\n          e = window.event;\n        }\n\n        var target = e.target || e.srcElement;\n        var targetRect = target.getBoundingClientRect();\n        var x = 0,\n            y = 0;\n        var clientX = 0,\n            clientY = 0;\n\n        if (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\n          // touch devices\n          clientX = e.changedTouches[0].clientX;\n          clientY = e.changedTouches[0].clientY;\n        } else if (typeof e.clientX === 'number') {\n          clientX = e.clientX;\n          clientY = e.clientY;\n        }\n\n        x = clientX - targetRect.left;\n        y = clientY - targetRect.top;\n        return {\n          x: x,\n          y: y\n        };\n      },\n      getViewPos: function () {\n        var doc = document.documentElement;\n        return [(window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0), (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)];\n      },\n      getViewSize: function () {\n        var doc = document.documentElement;\n        return [window.innerWidth || doc.clientWidth, window.innerHeight || doc.clientHeight];\n      },\n      redrawPosition: function () {\n        if (jsc.picker && jsc.picker.owner) {\n          var thisObj = jsc.picker.owner;\n          var tp, vp;\n\n          if (thisObj.fixed) {\n            // Fixed elements are positioned relative to viewport,\n            // therefore we can ignore the scroll offset\n            tp = jsc.getElementPos(thisObj.targetElement, true); // target pos\n\n            vp = [0, 0]; // view pos\n          } else {\n            tp = jsc.getElementPos(thisObj.targetElement); // target pos\n\n            vp = jsc.getViewPos(); // view pos\n          }\n\n          var ts = jsc.getElementSize(thisObj.targetElement); // target size\n\n          var vs = jsc.getViewSize(); // view size\n\n          var ps = jsc.getPickerOuterDims(thisObj); // picker size\n\n          var a, b, c;\n\n          switch (thisObj.position.toLowerCase()) {\n            case 'left':\n              a = 1;\n              b = 0;\n              c = -1;\n              break;\n\n            case 'right':\n              a = 1;\n              b = 0;\n              c = 1;\n              break;\n\n            case 'top':\n              a = 0;\n              b = 1;\n              c = -1;\n              break;\n\n            default:\n              a = 0;\n              b = 1;\n              c = 1;\n              break;\n          }\n\n          var l = (ts[b] + ps[b]) / 2; // compute picker position\n\n          if (!thisObj.smartPosition) {\n            var pp = [tp[a], tp[b] + ts[b] - l + l * c];\n          } else {\n            var pp = [-vp[a] + tp[a] + ps[a] > vs[a] ? -vp[a] + tp[a] + ts[a] / 2 > vs[a] / 2 && tp[a] + ts[a] - ps[a] >= 0 ? tp[a] + ts[a] - ps[a] : tp[a] : tp[a], -vp[b] + tp[b] + ts[b] + ps[b] - l + l * c > vs[b] ? -vp[b] + tp[b] + ts[b] / 2 > vs[b] / 2 && tp[b] + ts[b] - l - l * c >= 0 ? tp[b] + ts[b] - l - l * c : tp[b] + ts[b] - l + l * c : tp[b] + ts[b] - l + l * c >= 0 ? tp[b] + ts[b] - l + l * c : tp[b] + ts[b] - l - l * c];\n          }\n\n          var x = pp[a];\n          var y = pp[b];\n          var positionValue = thisObj.fixed ? 'fixed' : 'absolute';\n          var contractShadow = (pp[0] + ps[0] > tp[0] || pp[0] < tp[0] + ts[0]) && pp[1] + ps[1] < tp[1] + ts[1];\n\n          jsc._drawPosition(thisObj, x, y, positionValue, contractShadow);\n        }\n      },\n      _drawPosition: function (thisObj, x, y, positionValue, contractShadow) {\n        var vShadow = contractShadow ? 0 : thisObj.shadowBlur; // px\n\n        jsc.picker.wrap.style.position = positionValue;\n        jsc.picker.wrap.style.left = x + 'px';\n        jsc.picker.wrap.style.top = y + 'px';\n        jsc.setBoxShadow(jsc.picker.boxS, thisObj.shadow ? new jsc.BoxShadow(0, vShadow, thisObj.shadowBlur, 0, thisObj.shadowColor) : null);\n      },\n      getPickerDims: function (thisObj) {\n        var displaySlider = !!jsc.getSliderComponent(thisObj);\n        var dims = [2 * thisObj.insetWidth + 2 * thisObj.padding + thisObj.width + (displaySlider ? 2 * thisObj.insetWidth + jsc.getPadToSliderPadding(thisObj) + thisObj.sliderSize : 0), 2 * thisObj.insetWidth + 2 * thisObj.padding + thisObj.height + (thisObj.closable ? 2 * thisObj.insetWidth + thisObj.padding + thisObj.buttonHeight : 0)];\n        return dims;\n      },\n      getPickerOuterDims: function (thisObj) {\n        var dims = jsc.getPickerDims(thisObj);\n        return [dims[0] + 2 * thisObj.borderWidth, dims[1] + 2 * thisObj.borderWidth];\n      },\n      getPadToSliderPadding: function (thisObj) {\n        return Math.max(thisObj.padding, 1.5 * (2 * thisObj.pointerBorderWidth + thisObj.pointerThickness));\n      },\n      getPadYComponent: function (thisObj) {\n        switch (thisObj.mode.charAt(1).toLowerCase()) {\n          case 'v':\n            return 'v';\n            break;\n        }\n\n        return 's';\n      },\n      getSliderComponent: function (thisObj) {\n        if (thisObj.mode.length > 2) {\n          switch (thisObj.mode.charAt(2).toLowerCase()) {\n            case 's':\n              return 's';\n              break;\n\n            case 'v':\n              return 'v';\n              break;\n          }\n        }\n\n        return null;\n      },\n      onDocumentMouseDown: function (e) {\n        if (!e) {\n          e = window.event;\n        }\n\n        var target = e.target || e.srcElement;\n\n        if (target._jscLinkedInstance) {\n          if (target._jscLinkedInstance.showOnClick) {\n            target._jscLinkedInstance.show();\n          }\n        } else if (target._jscControlName) {\n          jsc.onControlPointerStart(e, target, target._jscControlName, 'mouse');\n        } else {\n          // Mouse is outside the picker controls -> hide the color picker!\n          if (jsc.picker && jsc.picker.owner) {\n            jsc.picker.owner.hide();\n          }\n        }\n      },\n      onDocumentTouchStart: function (e) {\n        if (!e) {\n          e = window.event;\n        }\n\n        var target = e.target || e.srcElement;\n\n        if (target._jscLinkedInstance) {\n          if (target._jscLinkedInstance.showOnClick) {\n            target._jscLinkedInstance.show();\n          }\n        } else if (target._jscControlName) {\n          jsc.onControlPointerStart(e, target, target._jscControlName, 'touch');\n        } else {\n          if (jsc.picker && jsc.picker.owner) {\n            jsc.picker.owner.hide();\n          }\n        }\n      },\n      onWindowResize: function (e) {\n        jsc.redrawPosition();\n      },\n      onParentScroll: function (e) {\n        // hide the picker when one of the parent elements is scrolled\n        if (jsc.picker && jsc.picker.owner) {\n          jsc.picker.owner.hide();\n        }\n      },\n      _pointerMoveEvent: {\n        mouse: 'mousemove',\n        touch: 'touchmove'\n      },\n      _pointerEndEvent: {\n        mouse: 'mouseup',\n        touch: 'touchend'\n      },\n      _pointerOrigin: null,\n      _capturedTarget: null,\n      onControlPointerStart: function (e, target, controlName, pointerType) {\n        var thisObj = target._jscInstance;\n        jsc.preventDefault(e);\n        jsc.captureTarget(target);\n\n        var registerDragEvents = function (doc, offset) {\n          jsc.attachGroupEvent('drag', doc, jsc._pointerMoveEvent[pointerType], jsc.onDocumentPointerMove(e, target, controlName, pointerType, offset));\n          jsc.attachGroupEvent('drag', doc, jsc._pointerEndEvent[pointerType], jsc.onDocumentPointerEnd(e, target, controlName, pointerType));\n        };\n\n        registerDragEvents(document, [0, 0]);\n\n        if (window.parent && window.frameElement) {\n          var rect = window.frameElement.getBoundingClientRect();\n          var ofs = [-rect.left, -rect.top];\n          registerDragEvents(window.parent.window.document, ofs);\n        }\n\n        var abs = jsc.getAbsPointerPos(e);\n        var rel = jsc.getRelPointerPos(e);\n        jsc._pointerOrigin = {\n          x: abs.x - rel.x,\n          y: abs.y - rel.y\n        };\n\n        switch (controlName) {\n          case 'pad':\n            // if the slider is at the bottom, move it up\n            switch (jsc.getSliderComponent(thisObj)) {\n              case 's':\n                if (thisObj.hsv[1] === 0) {\n                  thisObj.fromHSV(null, 100, null);\n                }\n\n                ;\n                break;\n\n              case 'v':\n                if (thisObj.hsv[2] === 0) {\n                  thisObj.fromHSV(null, null, 100);\n                }\n\n                ;\n                break;\n            }\n\n            jsc.setPad(thisObj, e, 0, 0);\n            break;\n\n          case 'sld':\n            jsc.setSld(thisObj, e, 0);\n            break;\n        }\n\n        jsc.dispatchFineChange(thisObj);\n      },\n      onDocumentPointerMove: function (e, target, controlName, pointerType, offset) {\n        return function (e) {\n          var thisObj = target._jscInstance;\n\n          switch (controlName) {\n            case 'pad':\n              if (!e) {\n                e = window.event;\n              }\n\n              jsc.setPad(thisObj, e, offset[0], offset[1]);\n              jsc.dispatchFineChange(thisObj);\n              break;\n\n            case 'sld':\n              if (!e) {\n                e = window.event;\n              }\n\n              jsc.setSld(thisObj, e, offset[1]);\n              jsc.dispatchFineChange(thisObj);\n              break;\n          }\n        };\n      },\n      onDocumentPointerEnd: function (e, target, controlName, pointerType) {\n        return function (e) {\n          var thisObj = target._jscInstance;\n          jsc.detachGroupEvents('drag');\n          jsc.releaseTarget(); // Always dispatch changes after detaching outstanding mouse handlers,\n          // in case some user interaction will occur in user's onchange callback\n          // that would intrude with current mouse events\n\n          jsc.dispatchChange(thisObj);\n        };\n      },\n      dispatchChange: function (thisObj) {\n        if (thisObj.valueElement) {\n          if (jsc.isElementType(thisObj.valueElement, 'input')) {\n            jsc.fireEvent(thisObj.valueElement, 'change');\n          }\n        }\n      },\n      dispatchFineChange: function (thisObj) {\n        if (thisObj.onFineChange) {\n          var callback;\n\n          if (typeof thisObj.onFineChange === 'string') {\n            callback = new Function(thisObj.onFineChange);\n          } else {\n            callback = thisObj.onFineChange;\n          }\n\n          callback.call(thisObj);\n        }\n      },\n      setPad: function (thisObj, e, ofsX, ofsY) {\n        var pointerAbs = jsc.getAbsPointerPos(e);\n        var x = ofsX + pointerAbs.x - jsc._pointerOrigin.x - thisObj.padding - thisObj.insetWidth;\n        var y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.insetWidth;\n        var xVal = x * (360 / (thisObj.width - 1));\n        var yVal = 100 - y * (100 / (thisObj.height - 1));\n\n        switch (jsc.getPadYComponent(thisObj)) {\n          case 's':\n            thisObj.fromHSV(xVal, yVal, null, jsc.leaveSld);\n            break;\n\n          case 'v':\n            thisObj.fromHSV(xVal, null, yVal, jsc.leaveSld);\n            break;\n        }\n      },\n      setSld: function (thisObj, e, ofsY) {\n        var pointerAbs = jsc.getAbsPointerPos(e);\n        var y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.insetWidth;\n        var yVal = 100 - y * (100 / (thisObj.height - 1));\n\n        switch (jsc.getSliderComponent(thisObj)) {\n          case 's':\n            thisObj.fromHSV(null, yVal, null, jsc.leavePad);\n            break;\n\n          case 'v':\n            thisObj.fromHSV(null, null, yVal, jsc.leavePad);\n            break;\n        }\n      },\n      _vmlNS: 'jsc_vml_',\n      _vmlCSS: 'jsc_vml_css_',\n      _vmlReady: false,\n      initVML: function () {\n        if (!jsc._vmlReady) {\n          // init VML namespace\n          var doc = document;\n\n          if (!doc.namespaces[jsc._vmlNS]) {\n            doc.namespaces.add(jsc._vmlNS, 'urn:schemas-microsoft-com:vml');\n          }\n\n          if (!doc.styleSheets[jsc._vmlCSS]) {\n            var tags = ['shape', 'shapetype', 'group', 'background', 'path', 'formulas', 'handles', 'fill', 'stroke', 'shadow', 'textbox', 'textpath', 'imagedata', 'line', 'polyline', 'curve', 'rect', 'roundrect', 'oval', 'arc', 'image'];\n            var ss = doc.createStyleSheet();\n            ss.owningElement.id = jsc._vmlCSS;\n\n            for (var i = 0; i < tags.length; i += 1) {\n              ss.addRule(jsc._vmlNS + '\\\\:' + tags[i], 'behavior:url(#default#VML);');\n            }\n          }\n\n          jsc._vmlReady = true;\n        }\n      },\n      createPalette: function () {\n        var paletteObj = {\n          elm: null,\n          draw: null\n        };\n\n        if (jsc.isCanvasSupported) {\n          // Canvas implementation for modern browsers\n          var canvas = document.createElement('canvas');\n          var ctx = canvas.getContext('2d');\n\n          var drawFunc = function (width, height, type) {\n            canvas.width = width;\n            canvas.height = height;\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            var hGrad = ctx.createLinearGradient(0, 0, canvas.width, 0);\n            hGrad.addColorStop(0 / 6, '#F00');\n            hGrad.addColorStop(1 / 6, '#FF0');\n            hGrad.addColorStop(2 / 6, '#0F0');\n            hGrad.addColorStop(3 / 6, '#0FF');\n            hGrad.addColorStop(4 / 6, '#00F');\n            hGrad.addColorStop(5 / 6, '#F0F');\n            hGrad.addColorStop(6 / 6, '#F00');\n            ctx.fillStyle = hGrad;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n            var vGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);\n\n            switch (type.toLowerCase()) {\n              case 's':\n                vGrad.addColorStop(0, 'rgba(255,255,255,0)');\n                vGrad.addColorStop(1, 'rgba(255,255,255,1)');\n                break;\n\n              case 'v':\n                vGrad.addColorStop(0, 'rgba(0,0,0,0)');\n                vGrad.addColorStop(1, 'rgba(0,0,0,1)');\n                break;\n            }\n\n            ctx.fillStyle = vGrad;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n          };\n\n          paletteObj.elm = canvas;\n          paletteObj.draw = drawFunc;\n        } else {\n          // VML fallback for IE 7 and 8\n          jsc.initVML();\n          var vmlContainer = document.createElement('div');\n          vmlContainer.style.position = 'relative';\n          vmlContainer.style.overflow = 'hidden';\n          var hGrad = document.createElement(jsc._vmlNS + ':fill');\n          hGrad.type = 'gradient';\n          hGrad.method = 'linear';\n          hGrad.angle = '90';\n          hGrad.colors = '16.67% #F0F, 33.33% #00F, 50% #0FF, 66.67% #0F0, 83.33% #FF0';\n          var hRect = document.createElement(jsc._vmlNS + ':rect');\n          hRect.style.position = 'absolute';\n          hRect.style.left = -1 + 'px';\n          hRect.style.top = -1 + 'px';\n          hRect.stroked = false;\n          hRect.appendChild(hGrad);\n          vmlContainer.appendChild(hRect);\n          var vGrad = document.createElement(jsc._vmlNS + ':fill');\n          vGrad.type = 'gradient';\n          vGrad.method = 'linear';\n          vGrad.angle = '180';\n          vGrad.opacity = '0';\n          var vRect = document.createElement(jsc._vmlNS + ':rect');\n          vRect.style.position = 'absolute';\n          vRect.style.left = -1 + 'px';\n          vRect.style.top = -1 + 'px';\n          vRect.stroked = false;\n          vRect.appendChild(vGrad);\n          vmlContainer.appendChild(vRect);\n\n          var drawFunc = function (width, height, type) {\n            vmlContainer.style.width = width + 'px';\n            vmlContainer.style.height = height + 'px';\n            hRect.style.width = vRect.style.width = width + 1 + 'px';\n            hRect.style.height = vRect.style.height = height + 1 + 'px'; // Colors must be specified during every redraw, otherwise IE won't display\n            // a full gradient during a subsequential redraw\n\n            hGrad.color = '#F00';\n            hGrad.color2 = '#F00';\n\n            switch (type.toLowerCase()) {\n              case 's':\n                vGrad.color = vGrad.color2 = '#FFF';\n                break;\n\n              case 'v':\n                vGrad.color = vGrad.color2 = '#000';\n                break;\n            }\n          };\n\n          paletteObj.elm = vmlContainer;\n          paletteObj.draw = drawFunc;\n        }\n\n        return paletteObj;\n      },\n      createSliderGradient: function () {\n        var sliderObj = {\n          elm: null,\n          draw: null\n        };\n\n        if (jsc.isCanvasSupported) {\n          // Canvas implementation for modern browsers\n          var canvas = document.createElement('canvas');\n          var ctx = canvas.getContext('2d');\n\n          var drawFunc = function (width, height, color1, color2) {\n            canvas.width = width;\n            canvas.height = height;\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            var grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\n            grad.addColorStop(0, color1);\n            grad.addColorStop(1, color2);\n            ctx.fillStyle = grad;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n          };\n\n          sliderObj.elm = canvas;\n          sliderObj.draw = drawFunc;\n        } else {\n          // VML fallback for IE 7 and 8\n          jsc.initVML();\n          var vmlContainer = document.createElement('div');\n          vmlContainer.style.position = 'relative';\n          vmlContainer.style.overflow = 'hidden';\n          var grad = document.createElement(jsc._vmlNS + ':fill');\n          grad.type = 'gradient';\n          grad.method = 'linear';\n          grad.angle = '180';\n          var rect = document.createElement(jsc._vmlNS + ':rect');\n          rect.style.position = 'absolute';\n          rect.style.left = -1 + 'px';\n          rect.style.top = -1 + 'px';\n          rect.stroked = false;\n          rect.appendChild(grad);\n          vmlContainer.appendChild(rect);\n\n          var drawFunc = function (width, height, color1, color2) {\n            vmlContainer.style.width = width + 'px';\n            vmlContainer.style.height = height + 'px';\n            rect.style.width = width + 1 + 'px';\n            rect.style.height = height + 1 + 'px';\n            grad.color = color1;\n            grad.color2 = color2;\n          };\n\n          sliderObj.elm = vmlContainer;\n          sliderObj.draw = drawFunc;\n        }\n\n        return sliderObj;\n      },\n      leaveValue: 1 << 0,\n      leaveStyle: 1 << 1,\n      leavePad: 1 << 2,\n      leaveSld: 1 << 3,\n      BoxShadow: function () {\n        var BoxShadow = function (hShadow, vShadow, blur, spread, color, inset) {\n          this.hShadow = hShadow;\n          this.vShadow = vShadow;\n          this.blur = blur;\n          this.spread = spread;\n          this.color = color;\n          this.inset = !!inset;\n        };\n\n        BoxShadow.prototype.toString = function () {\n          var vals = [Math.round(this.hShadow) + 'px', Math.round(this.vShadow) + 'px', Math.round(this.blur) + 'px', Math.round(this.spread) + 'px', this.color];\n\n          if (this.inset) {\n            vals.push('inset');\n          }\n\n          return vals.join(' ');\n        };\n\n        return BoxShadow;\n      }(),\n      //\n      // Usage:\n      // var myColor = new jscolor(<targetElement> [, <options>])\n      //\n      jscolor: function (targetElement, options) {\n        // General options\n        //\n        this.value = null; // initial HEX color. To change it later, use methods fromString(), fromHSV() and fromRGB()\n\n        this.valueElement = targetElement; // element that will be used to display and input the color code\n\n        this.styleElement = targetElement; // element that will preview the picked color using CSS backgroundColor\n\n        this.required = true; // whether the associated text <input> can be left empty\n\n        this.refine = true; // whether to refine the entered color code (e.g. uppercase it and remove whitespace)\n\n        this.hash = false; // whether to prefix the HEX color code with # symbol\n\n        this.uppercase = true; // whether to show the color code in upper case\n\n        this.onFineChange = null; // called instantly every time the color changes (value can be either a function or a string with javascript code)\n\n        this.activeClass = 'jscolor-active'; // class to be set to the target element when a picker window is open on it\n\n        this.overwriteImportant = false; // whether to overwrite colors of styleElement using !important\n\n        this.minS = 0; // min allowed saturation (0 - 100)\n\n        this.maxS = 100; // max allowed saturation (0 - 100)\n\n        this.minV = 0; // min allowed value (brightness) (0 - 100)\n\n        this.maxV = 100; // max allowed value (brightness) (0 - 100)\n        // Accessing the picked color\n        //\n\n        this.hsv = [0, 0, 100]; // read-only  [0-360, 0-100, 0-100]\n\n        this.rgb = [255, 255, 255]; // read-only  [0-255, 0-255, 0-255]\n        // Color Picker options\n        //\n\n        this.width = 181; // width of color palette (in px)\n\n        this.height = 101; // height of color palette (in px)\n\n        this.showOnClick = true; // whether to display the color picker when user clicks on its target element\n\n        this.mode = 'HSV'; // HSV | HVS | HS | HV - layout of the color picker controls\n\n        this.position = 'bottom'; // left | right | top | bottom - position relative to the target element\n\n        this.smartPosition = true; // automatically change picker position when there is not enough space for it\n\n        this.sliderSize = 16; // px\n\n        this.crossSize = 8; // px\n\n        this.closable = false; // whether to display the Close button\n\n        this.closeText = 'Close';\n        this.buttonColor = '#000000'; // CSS color\n\n        this.buttonHeight = 18; // px\n\n        this.padding = 12; // px\n\n        this.backgroundColor = '#FFFFFF'; // CSS color\n\n        this.borderWidth = 1; // px\n\n        this.borderColor = '#BBBBBB'; // CSS color\n\n        this.borderRadius = 8; // px\n\n        this.insetWidth = 1; // px\n\n        this.insetColor = '#BBBBBB'; // CSS color\n\n        this.shadow = true; // whether to display shadow\n\n        this.shadowBlur = 15; // px\n\n        this.shadowColor = 'rgba(0,0,0,0.2)'; // CSS color\n\n        this.pointerColor = '#4C4C4C'; // px\n\n        this.pointerBorderColor = '#FFFFFF'; // px\n\n        this.pointerBorderWidth = 1; // px\n\n        this.pointerThickness = 2; // px\n\n        this.zIndex = 1000;\n        this.container = null; // where to append the color picker (BODY element by default)\n\n        for (var opt in options) {\n          if (options.hasOwnProperty(opt)) {\n            this[opt] = options[opt];\n          }\n        }\n\n        this.hide = function () {\n          if (isPickerOwner()) {\n            detachPicker();\n          }\n        };\n\n        this.show = function () {\n          drawPicker();\n        };\n\n        this.redraw = function () {\n          if (isPickerOwner()) {\n            drawPicker();\n          }\n        };\n\n        this.importColor = function () {\n          if (!this.valueElement) {\n            this.exportColor();\n          } else {\n            if (jsc.isElementType(this.valueElement, 'input')) {\n              if (!this.refine) {\n                if (!this.fromString(this.valueElement.value, jsc.leaveValue)) {\n                  if (this.styleElement) {\n                    this.styleElement.style.backgroundImage = this.styleElement._jscOrigStyle.backgroundImage;\n                    this.styleElement.style.backgroundColor = this.styleElement._jscOrigStyle.backgroundColor;\n                    this.styleElement.style.color = this.styleElement._jscOrigStyle.color;\n                  }\n\n                  this.exportColor(jsc.leaveValue | jsc.leaveStyle);\n                }\n              } else if (!this.required && /^\\s*$/.test(this.valueElement.value)) {\n                this.valueElement.value = '';\n\n                if (this.styleElement) {\n                  this.styleElement.style.backgroundImage = this.styleElement._jscOrigStyle.backgroundImage;\n                  this.styleElement.style.backgroundColor = this.styleElement._jscOrigStyle.backgroundColor;\n                  this.styleElement.style.color = this.styleElement._jscOrigStyle.color;\n                }\n\n                this.exportColor(jsc.leaveValue | jsc.leaveStyle);\n              } else if (this.fromString(this.valueElement.value)) {// managed to import color successfully from the value -> OK, don't do anything\n              } else {\n                this.exportColor();\n              }\n            } else {\n              // not an input element -> doesn't have any value\n              this.exportColor();\n            }\n          }\n        };\n\n        this.exportColor = function (flags) {\n          if (!(flags & jsc.leaveValue) && this.valueElement) {\n            var value = this.toString();\n\n            if (this.uppercase) {\n              value = value.toUpperCase();\n            }\n\n            if (this.hash) {\n              value = '#' + value;\n            }\n\n            if (jsc.isElementType(this.valueElement, 'input')) {\n              this.valueElement.value = value;\n            } else {\n              this.valueElement.innerHTML = value;\n            }\n          }\n\n          if (!(flags & jsc.leaveStyle)) {\n            if (this.styleElement) {\n              var bgColor = '#' + this.toString();\n              var fgColor = this.isLight() ? '#000' : '#FFF';\n              this.styleElement.style.backgroundImage = 'none';\n              this.styleElement.style.backgroundColor = bgColor;\n              this.styleElement.style.color = fgColor;\n\n              if (this.overwriteImportant) {\n                this.styleElement.setAttribute('style', 'background: ' + bgColor + ' !important; ' + 'color: ' + fgColor + ' !important;');\n              }\n            }\n          }\n\n          if (!(flags & jsc.leavePad) && isPickerOwner()) {\n            redrawPad();\n          }\n\n          if (!(flags & jsc.leaveSld) && isPickerOwner()) {\n            redrawSld();\n          }\n        }; // h: 0-360\n        // s: 0-100\n        // v: 0-100\n        //\n\n\n        this.fromHSV = function (h, s, v, flags) {\n          // null = don't change\n          if (h !== null) {\n            if (isNaN(h)) {\n              return false;\n            }\n\n            h = Math.max(0, Math.min(360, h));\n          }\n\n          if (s !== null) {\n            if (isNaN(s)) {\n              return false;\n            }\n\n            s = Math.max(0, Math.min(100, this.maxS, s), this.minS);\n          }\n\n          if (v !== null) {\n            if (isNaN(v)) {\n              return false;\n            }\n\n            v = Math.max(0, Math.min(100, this.maxV, v), this.minV);\n          }\n\n          this.rgb = HSV_RGB(h === null ? this.hsv[0] : this.hsv[0] = h, s === null ? this.hsv[1] : this.hsv[1] = s, v === null ? this.hsv[2] : this.hsv[2] = v);\n          this.exportColor(flags);\n        }; // r: 0-255\n        // g: 0-255\n        // b: 0-255\n        //\n\n\n        this.fromRGB = function (r, g, b, flags) {\n          // null = don't change\n          if (r !== null) {\n            if (isNaN(r)) {\n              return false;\n            }\n\n            r = Math.max(0, Math.min(255, r));\n          }\n\n          if (g !== null) {\n            if (isNaN(g)) {\n              return false;\n            }\n\n            g = Math.max(0, Math.min(255, g));\n          }\n\n          if (b !== null) {\n            if (isNaN(b)) {\n              return false;\n            }\n\n            b = Math.max(0, Math.min(255, b));\n          }\n\n          var hsv = RGB_HSV(r === null ? this.rgb[0] : r, g === null ? this.rgb[1] : g, b === null ? this.rgb[2] : b);\n\n          if (hsv[0] !== null) {\n            this.hsv[0] = Math.max(0, Math.min(360, hsv[0]));\n          }\n\n          if (hsv[2] !== 0) {\n            this.hsv[1] = hsv[1] === null ? null : Math.max(0, this.minS, Math.min(100, this.maxS, hsv[1]));\n          }\n\n          this.hsv[2] = hsv[2] === null ? null : Math.max(0, this.minV, Math.min(100, this.maxV, hsv[2])); // update RGB according to final HSV, as some values might be trimmed\n\n          var rgb = HSV_RGB(this.hsv[0], this.hsv[1], this.hsv[2]);\n          this.rgb[0] = rgb[0];\n          this.rgb[1] = rgb[1];\n          this.rgb[2] = rgb[2];\n          this.exportColor(flags);\n        };\n\n        this.fromString = function (str, flags) {\n          var m;\n\n          if (m = str.match(/^\\W*([0-9A-F]{3}([0-9A-F]{3})?)\\W*$/i)) {\n            // HEX notation\n            //\n            if (m[1].length === 6) {\n              // 6-char notation\n              this.fromRGB(parseInt(m[1].substr(0, 2), 16), parseInt(m[1].substr(2, 2), 16), parseInt(m[1].substr(4, 2), 16), flags);\n            } else {\n              // 3-char notation\n              this.fromRGB(parseInt(m[1].charAt(0) + m[1].charAt(0), 16), parseInt(m[1].charAt(1) + m[1].charAt(1), 16), parseInt(m[1].charAt(2) + m[1].charAt(2), 16), flags);\n            }\n\n            return true;\n          } else if (m = str.match(/^\\W*rgba?\\(([^)]*)\\)\\W*$/i)) {\n            var params = m[1].split(',');\n            var re = /^\\s*(\\d*)(\\.\\d+)?\\s*$/;\n            var mR, mG, mB;\n\n            if (params.length >= 3 && (mR = params[0].match(re)) && (mG = params[1].match(re)) && (mB = params[2].match(re))) {\n              var r = parseFloat((mR[1] || '0') + (mR[2] || ''));\n              var g = parseFloat((mG[1] || '0') + (mG[2] || ''));\n              var b = parseFloat((mB[1] || '0') + (mB[2] || ''));\n              this.fromRGB(r, g, b, flags);\n              return true;\n            }\n          }\n\n          return false;\n        };\n\n        this.toString = function () {\n          return (0x100 | Math.round(this.rgb[0])).toString(16).substr(1) + (0x100 | Math.round(this.rgb[1])).toString(16).substr(1) + (0x100 | Math.round(this.rgb[2])).toString(16).substr(1);\n        };\n\n        this.toHEXString = function () {\n          return '#' + this.toString().toUpperCase();\n        };\n\n        this.toRGBString = function () {\n          return 'rgb(' + Math.round(this.rgb[0]) + ',' + Math.round(this.rgb[1]) + ',' + Math.round(this.rgb[2]) + ')';\n        };\n\n        this.isLight = function () {\n          return 0.213 * this.rgb[0] + 0.715 * this.rgb[1] + 0.072 * this.rgb[2] > 255 / 2;\n        };\n\n        this._processParentElementsInDOM = function () {\n          if (this._linkedElementsProcessed) {\n            return;\n          }\n\n          this._linkedElementsProcessed = true;\n          var elm = this.targetElement;\n\n          do {\n            // If the target element or one of its parent nodes has fixed position,\n            // then use fixed positioning instead\n            //\n            // Note: In Firefox, getComputedStyle returns null in a hidden iframe,\n            // that's why we need to check if the returned style object is non-empty\n            var currStyle = jsc.getStyle(elm);\n\n            if (currStyle && currStyle.position.toLowerCase() === 'fixed') {\n              this.fixed = true;\n            }\n\n            if (elm !== this.targetElement) {\n              // Ensure to attach onParentScroll only once to each parent element\n              // (multiple targetElements can share the same parent nodes)\n              //\n              // Note: It's not just offsetParents that can be scrollable,\n              // that's why we loop through all parent nodes\n              if (!elm._jscEventsAttached) {\n                jsc.attachEvent(elm, 'scroll', jsc.onParentScroll);\n                elm._jscEventsAttached = true;\n              }\n            }\n          } while ((elm = elm.parentNode) && !jsc.isElementType(elm, 'body'));\n        }; // r: 0-255\n        // g: 0-255\n        // b: 0-255\n        //\n        // returns: [ 0-360, 0-100, 0-100 ]\n        //\n\n\n        function RGB_HSV(r, g, b) {\n          r /= 255;\n          g /= 255;\n          b /= 255;\n          var n = Math.min(Math.min(r, g), b);\n          var v = Math.max(Math.max(r, g), b);\n          var m = v - n;\n\n          if (m === 0) {\n            return [null, 0, 100 * v];\n          }\n\n          var h = r === n ? 3 + (b - g) / m : g === n ? 5 + (r - b) / m : 1 + (g - r) / m;\n          return [60 * (h === 6 ? 0 : h), 100 * (m / v), 100 * v];\n        } // h: 0-360\n        // s: 0-100\n        // v: 0-100\n        //\n        // returns: [ 0-255, 0-255, 0-255 ]\n        //\n\n\n        function HSV_RGB(h, s, v) {\n          var u = 255 * (v / 100);\n\n          if (h === null) {\n            return [u, u, u];\n          }\n\n          h /= 60;\n          s /= 100;\n          var i = Math.floor(h);\n          var f = i % 2 ? h - i : 1 - (h - i);\n          var m = u * (1 - s);\n          var n = u * (1 - s * f);\n\n          switch (i) {\n            case 6:\n            case 0:\n              return [u, n, m];\n\n            case 1:\n              return [n, u, m];\n\n            case 2:\n              return [m, u, n];\n\n            case 3:\n              return [m, n, u];\n\n            case 4:\n              return [n, m, u];\n\n            case 5:\n              return [u, m, n];\n          }\n        }\n\n        function detachPicker() {\n          jsc.unsetClass(THIS.targetElement, THIS.activeClass);\n          jsc.picker.wrap.parentNode.removeChild(jsc.picker.wrap);\n          delete jsc.picker.owner;\n        }\n\n        function drawPicker() {\n          // At this point, when drawing the picker, we know what the parent elements are\n          // and we can do all related DOM operations, such as registering events on them\n          // or checking their positioning\n          THIS._processParentElementsInDOM();\n\n          if (!jsc.picker) {\n            jsc.picker = {\n              owner: null,\n              wrap: document.createElement('div'),\n              box: document.createElement('div'),\n              boxS: document.createElement('div'),\n              // shadow area\n              boxB: document.createElement('div'),\n              // border\n              pad: document.createElement('div'),\n              padB: document.createElement('div'),\n              // border\n              padM: document.createElement('div'),\n              // mouse/touch area\n              padPal: jsc.createPalette(),\n              cross: document.createElement('div'),\n              crossBY: document.createElement('div'),\n              // border Y\n              crossBX: document.createElement('div'),\n              // border X\n              crossLY: document.createElement('div'),\n              // line Y\n              crossLX: document.createElement('div'),\n              // line X\n              sld: document.createElement('div'),\n              sldB: document.createElement('div'),\n              // border\n              sldM: document.createElement('div'),\n              // mouse/touch area\n              sldGrad: jsc.createSliderGradient(),\n              sldPtrS: document.createElement('div'),\n              // slider pointer spacer\n              sldPtrIB: document.createElement('div'),\n              // slider pointer inner border\n              sldPtrMB: document.createElement('div'),\n              // slider pointer middle border\n              sldPtrOB: document.createElement('div'),\n              // slider pointer outer border\n              btn: document.createElement('div'),\n              btnT: document.createElement('span') // text\n\n            };\n            jsc.picker.pad.appendChild(jsc.picker.padPal.elm);\n            jsc.picker.padB.appendChild(jsc.picker.pad);\n            jsc.picker.cross.appendChild(jsc.picker.crossBY);\n            jsc.picker.cross.appendChild(jsc.picker.crossBX);\n            jsc.picker.cross.appendChild(jsc.picker.crossLY);\n            jsc.picker.cross.appendChild(jsc.picker.crossLX);\n            jsc.picker.padB.appendChild(jsc.picker.cross);\n            jsc.picker.box.appendChild(jsc.picker.padB);\n            jsc.picker.box.appendChild(jsc.picker.padM);\n            jsc.picker.sld.appendChild(jsc.picker.sldGrad.elm);\n            jsc.picker.sldB.appendChild(jsc.picker.sld);\n            jsc.picker.sldB.appendChild(jsc.picker.sldPtrOB);\n            jsc.picker.sldPtrOB.appendChild(jsc.picker.sldPtrMB);\n            jsc.picker.sldPtrMB.appendChild(jsc.picker.sldPtrIB);\n            jsc.picker.sldPtrIB.appendChild(jsc.picker.sldPtrS);\n            jsc.picker.box.appendChild(jsc.picker.sldB);\n            jsc.picker.box.appendChild(jsc.picker.sldM);\n            jsc.picker.btn.appendChild(jsc.picker.btnT);\n            jsc.picker.box.appendChild(jsc.picker.btn);\n            jsc.picker.boxB.appendChild(jsc.picker.box);\n            jsc.picker.wrap.appendChild(jsc.picker.boxS);\n            jsc.picker.wrap.appendChild(jsc.picker.boxB);\n          }\n\n          var p = jsc.picker;\n          var displaySlider = !!jsc.getSliderComponent(THIS);\n          var dims = jsc.getPickerDims(THIS);\n          var crossOuterSize = 2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize;\n          var padToSliderPadding = jsc.getPadToSliderPadding(THIS);\n          var borderRadius = Math.min(THIS.borderRadius, Math.round(THIS.padding * Math.PI)); // px\n\n          var padCursor = 'crosshair'; // wrap\n\n          p.wrap.style.clear = 'both';\n          p.wrap.style.width = dims[0] + 2 * THIS.borderWidth + 'px';\n          p.wrap.style.height = dims[1] + 2 * THIS.borderWidth + 'px';\n          p.wrap.style.zIndex = THIS.zIndex; // picker\n\n          p.box.style.width = dims[0] + 'px';\n          p.box.style.height = dims[1] + 'px';\n          p.boxS.style.position = 'absolute';\n          p.boxS.style.left = '0';\n          p.boxS.style.top = '0';\n          p.boxS.style.width = '100%';\n          p.boxS.style.height = '100%';\n          jsc.setBorderRadius(p.boxS, borderRadius + 'px'); // picker border\n\n          p.boxB.style.position = 'relative';\n          p.boxB.style.border = THIS.borderWidth + 'px solid';\n          p.boxB.style.borderColor = THIS.borderColor;\n          p.boxB.style.background = THIS.backgroundColor;\n          jsc.setBorderRadius(p.boxB, borderRadius + 'px'); // IE hack:\n          // If the element is transparent, IE will trigger the event on the elements under it,\n          // e.g. on Canvas or on elements with border\n\n          p.padM.style.background = p.sldM.style.background = '#FFF';\n          jsc.setStyle(p.padM, 'opacity', '0');\n          jsc.setStyle(p.sldM, 'opacity', '0'); // pad\n\n          p.pad.style.position = 'relative';\n          p.pad.style.width = THIS.width + 'px';\n          p.pad.style.height = THIS.height + 'px'; // pad palettes (HSV and HVS)\n\n          p.padPal.draw(THIS.width, THIS.height, jsc.getPadYComponent(THIS)); // pad border\n\n          p.padB.style.position = 'absolute';\n          p.padB.style.left = THIS.padding + 'px';\n          p.padB.style.top = THIS.padding + 'px';\n          p.padB.style.border = THIS.insetWidth + 'px solid';\n          p.padB.style.borderColor = THIS.insetColor; // pad mouse area\n\n          p.padM._jscInstance = THIS;\n          p.padM._jscControlName = 'pad';\n          p.padM.style.position = 'absolute';\n          p.padM.style.left = '0';\n          p.padM.style.top = '0';\n          p.padM.style.width = THIS.padding + 2 * THIS.insetWidth + THIS.width + padToSliderPadding / 2 + 'px';\n          p.padM.style.height = dims[1] + 'px';\n          p.padM.style.cursor = padCursor; // pad cross\n\n          p.cross.style.position = 'absolute';\n          p.cross.style.left = p.cross.style.top = '0';\n          p.cross.style.width = p.cross.style.height = crossOuterSize + 'px'; // pad cross border Y and X\n\n          p.crossBY.style.position = p.crossBX.style.position = 'absolute';\n          p.crossBY.style.background = p.crossBX.style.background = THIS.pointerBorderColor;\n          p.crossBY.style.width = p.crossBX.style.height = 2 * THIS.pointerBorderWidth + THIS.pointerThickness + 'px';\n          p.crossBY.style.height = p.crossBX.style.width = crossOuterSize + 'px';\n          p.crossBY.style.left = p.crossBX.style.top = Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2) - THIS.pointerBorderWidth + 'px';\n          p.crossBY.style.top = p.crossBX.style.left = '0'; // pad cross line Y and X\n\n          p.crossLY.style.position = p.crossLX.style.position = 'absolute';\n          p.crossLY.style.background = p.crossLX.style.background = THIS.pointerColor;\n          p.crossLY.style.height = p.crossLX.style.width = crossOuterSize - 2 * THIS.pointerBorderWidth + 'px';\n          p.crossLY.style.width = p.crossLX.style.height = THIS.pointerThickness + 'px';\n          p.crossLY.style.left = p.crossLX.style.top = Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2) + 'px';\n          p.crossLY.style.top = p.crossLX.style.left = THIS.pointerBorderWidth + 'px'; // slider\n\n          p.sld.style.overflow = 'hidden';\n          p.sld.style.width = THIS.sliderSize + 'px';\n          p.sld.style.height = THIS.height + 'px'; // slider gradient\n\n          p.sldGrad.draw(THIS.sliderSize, THIS.height, '#000', '#000'); // slider border\n\n          p.sldB.style.display = displaySlider ? 'block' : 'none';\n          p.sldB.style.position = 'absolute';\n          p.sldB.style.right = THIS.padding + 'px';\n          p.sldB.style.top = THIS.padding + 'px';\n          p.sldB.style.border = THIS.insetWidth + 'px solid';\n          p.sldB.style.borderColor = THIS.insetColor; // slider mouse area\n\n          p.sldM._jscInstance = THIS;\n          p.sldM._jscControlName = 'sld';\n          p.sldM.style.display = displaySlider ? 'block' : 'none';\n          p.sldM.style.position = 'absolute';\n          p.sldM.style.right = '0';\n          p.sldM.style.top = '0';\n          p.sldM.style.width = THIS.sliderSize + padToSliderPadding / 2 + THIS.padding + 2 * THIS.insetWidth + 'px';\n          p.sldM.style.height = dims[1] + 'px';\n          p.sldM.style.cursor = 'default'; // slider pointer inner and outer border\n\n          p.sldPtrIB.style.border = p.sldPtrOB.style.border = THIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor; // slider pointer outer border\n\n          p.sldPtrOB.style.position = 'absolute';\n          p.sldPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\n          p.sldPtrOB.style.top = '0'; // slider pointer middle border\n\n          p.sldPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor; // slider pointer spacer\n\n          p.sldPtrS.style.width = THIS.sliderSize + 'px';\n          p.sldPtrS.style.height = sliderPtrSpace + 'px'; // the Close button\n\n          function setBtnBorder() {\n            var insetColors = THIS.insetColor.split(/\\s+/);\n            var outsetColor = insetColors.length < 2 ? insetColors[0] : insetColors[1] + ' ' + insetColors[0] + ' ' + insetColors[0] + ' ' + insetColors[1];\n            p.btn.style.borderColor = outsetColor;\n          }\n\n          p.btn.style.display = THIS.closable ? 'block' : 'none';\n          p.btn.style.position = 'absolute';\n          p.btn.style.left = THIS.padding + 'px';\n          p.btn.style.bottom = THIS.padding + 'px';\n          p.btn.style.padding = '0 15px';\n          p.btn.style.height = THIS.buttonHeight + 'px';\n          p.btn.style.border = THIS.insetWidth + 'px solid';\n          setBtnBorder();\n          p.btn.style.color = THIS.buttonColor;\n          p.btn.style.font = '12px sans-serif';\n          p.btn.style.textAlign = 'center';\n\n          try {\n            p.btn.style.cursor = 'pointer';\n          } catch (eOldIE) {\n            p.btn.style.cursor = 'hand';\n          }\n\n          p.btn.onmousedown = function () {\n            THIS.hide();\n          };\n\n          p.btnT.style.lineHeight = THIS.buttonHeight + 'px';\n          p.btnT.innerHTML = '';\n          p.btnT.appendChild(document.createTextNode(THIS.closeText)); // place pointers\n\n          redrawPad();\n          redrawSld(); // If we are changing the owner without first closing the picker,\n          // make sure to first deal with the old owner\n\n          if (jsc.picker.owner && jsc.picker.owner !== THIS) {\n            jsc.unsetClass(jsc.picker.owner.targetElement, THIS.activeClass);\n          } // Set the new picker owner\n\n\n          jsc.picker.owner = THIS; // The redrawPosition() method needs picker.owner to be set, that's why we call it here,\n          // after setting the owner\n\n          if (jsc.isElementType(container, 'body')) {\n            jsc.redrawPosition();\n          } else {\n            jsc._drawPosition(THIS, 0, 0, 'relative', false);\n          }\n\n          if (p.wrap.parentNode != container) {\n            container.appendChild(p.wrap);\n          }\n\n          jsc.setClass(THIS.targetElement, THIS.activeClass);\n        }\n\n        function redrawPad() {\n          // redraw the pad pointer\n          switch (jsc.getPadYComponent(THIS)) {\n            case 's':\n              var yComponent = 1;\n              break;\n\n            case 'v':\n              var yComponent = 2;\n              break;\n          }\n\n          var x = Math.round(THIS.hsv[0] / 360 * (THIS.width - 1));\n          var y = Math.round((1 - THIS.hsv[yComponent] / 100) * (THIS.height - 1));\n          var crossOuterSize = 2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize;\n          var ofs = -Math.floor(crossOuterSize / 2);\n          jsc.picker.cross.style.left = x + ofs + 'px';\n          jsc.picker.cross.style.top = y + ofs + 'px'; // redraw the slider\n\n          switch (jsc.getSliderComponent(THIS)) {\n            case 's':\n              var rgb1 = HSV_RGB(THIS.hsv[0], 100, THIS.hsv[2]);\n              var rgb2 = HSV_RGB(THIS.hsv[0], 0, THIS.hsv[2]);\n              var color1 = 'rgb(' + Math.round(rgb1[0]) + ',' + Math.round(rgb1[1]) + ',' + Math.round(rgb1[2]) + ')';\n              var color2 = 'rgb(' + Math.round(rgb2[0]) + ',' + Math.round(rgb2[1]) + ',' + Math.round(rgb2[2]) + ')';\n              jsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\n              break;\n\n            case 'v':\n              var rgb = HSV_RGB(THIS.hsv[0], THIS.hsv[1], 100);\n              var color1 = 'rgb(' + Math.round(rgb[0]) + ',' + Math.round(rgb[1]) + ',' + Math.round(rgb[2]) + ')';\n              var color2 = '#000';\n              jsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\n              break;\n          }\n        }\n\n        function redrawSld() {\n          var sldComponent = jsc.getSliderComponent(THIS);\n\n          if (sldComponent) {\n            // redraw the slider pointer\n            switch (sldComponent) {\n              case 's':\n                var yComponent = 1;\n                break;\n\n              case 'v':\n                var yComponent = 2;\n                break;\n            }\n\n            var y = Math.round((1 - THIS.hsv[yComponent] / 100) * (THIS.height - 1));\n            jsc.picker.sldPtrOB.style.top = y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(sliderPtrSpace / 2) + 'px';\n          }\n        }\n\n        function isPickerOwner() {\n          return jsc.picker && jsc.picker.owner === THIS;\n        }\n\n        function blurValue() {\n          THIS.importColor();\n        } // Find the target element\n\n\n        if (typeof targetElement === 'string') {\n          var id = targetElement;\n          var elm = document.getElementById(id);\n\n          if (elm) {\n            this.targetElement = elm;\n          } else {\n            jsc.warn('Could not find target element with ID \\'' + id + '\\'');\n          }\n        } else if (targetElement) {\n          this.targetElement = targetElement;\n        } else {\n          jsc.warn('Invalid target element: \\'' + targetElement + '\\'');\n        }\n\n        if (this.targetElement._jscLinkedInstance) {\n          jsc.warn('Cannot link jscolor twice to the same element. Skipping.');\n          return;\n        }\n\n        this.targetElement._jscLinkedInstance = this; // Find the value element\n\n        this.valueElement = jsc.fetchElement(this.valueElement); // Find the style element\n\n        this.styleElement = jsc.fetchElement(this.styleElement);\n        var THIS = this;\n        var container = this.container ? jsc.fetchElement(this.container) : document.getElementsByTagName('body')[0];\n        var sliderPtrSpace = 3; // px\n        // For BUTTON elements it's important to stop them from sending the form when clicked\n        // (e.g. in Safari)\n\n        if (jsc.isElementType(this.targetElement, 'button')) {\n          if (this.targetElement.onclick) {\n            var origCallback = this.targetElement.onclick;\n\n            this.targetElement.onclick = function (evt) {\n              origCallback.call(this, evt);\n              return false;\n            };\n          } else {\n            this.targetElement.onclick = function () {\n              return false;\n            };\n          }\n        }\n        /*\r\n        var elm = this.targetElement;\r\n        do {\r\n        \t// If the target element or one of its offsetParents has fixed position,\r\n        \t// then use fixed positioning instead\r\n        \t//\r\n        \t// Note: In Firefox, getComputedStyle returns null in a hidden iframe,\r\n        \t// that's why we need to check if the returned style object is non-empty\r\n        \tvar currStyle = jsc.getStyle(elm);\r\n        \tif (currStyle && currStyle.position.toLowerCase() === 'fixed') {\r\n        \t\tthis.fixed = true;\r\n        \t}\r\n        \t\t\tif (elm !== this.targetElement) {\r\n        \t\t// attach onParentScroll so that we can recompute the picker position\r\n        \t\t// when one of the offsetParents is scrolled\r\n        \t\tif (!elm._jscEventsAttached) {\r\n        \t\t\tjsc.attachEvent(elm, 'scroll', jsc.onParentScroll);\r\n        \t\t\telm._jscEventsAttached = true;\r\n        \t\t}\r\n        \t}\r\n        } while ((elm = elm.offsetParent) && !jsc.isElementType(elm, 'body'));\r\n        */\n        // valueElement\n\n\n        if (this.valueElement) {\n          if (jsc.isElementType(this.valueElement, 'input')) {\n            var updateField = function () {\n              THIS.fromString(THIS.valueElement.value, jsc.leaveValue);\n              jsc.dispatchFineChange(THIS);\n            };\n\n            jsc.attachEvent(this.valueElement, 'keyup', updateField);\n            jsc.attachEvent(this.valueElement, 'input', updateField);\n            jsc.attachEvent(this.valueElement, 'blur', blurValue);\n            this.valueElement.setAttribute('autocomplete', 'off');\n          }\n        } // styleElement\n\n\n        if (this.styleElement) {\n          this.styleElement._jscOrigStyle = {\n            backgroundImage: this.styleElement.style.backgroundImage,\n            backgroundColor: this.styleElement.style.backgroundColor,\n            color: this.styleElement.style.color\n          };\n        }\n\n        if (this.value) {\n          // Try to set the color from the .value option and if unsuccessful,\n          // export the current color\n          this.fromString(this.value) || this.exportColor();\n        } else {\n          this.importColor();\n        }\n      }\n    }; //================================\n    // Public properties and methods\n    //================================\n    // By default, search for all elements with class=\"jscolor\" and install a color picker on them.\n    //\n    // You can change what class name will be looked for by setting the property jscolor.lookupClass\n    // anywhere in your HTML document. To completely disable the automatic lookup, set it to null.\n    //\n\n    jsc.jscolor.lookupClass = 'jscolor';\n\n    jsc.jscolor.installByClassName = function (className) {\n      var inputElms = document.getElementsByTagName('input');\n      var buttonElms = document.getElementsByTagName('button');\n      jsc.tryInstallOnElements(inputElms, className);\n      jsc.tryInstallOnElements(buttonElms, className);\n    };\n\n    jsc.register();\n    return jsc.jscolor;\n  }();\n}","map":{"version":3,"sources":["/var/www/html/xfy/src/plugins/jscolor.js"],"names":["window","jscolor","jsc","register","attachDOMReadyEvent","init","attachEvent","document","onDocumentMouseDown","onDocumentTouchStart","onWindowResize","lookupClass","installByClassName","tryInstallOnElements","elms","className","matchClass","RegExp","i","length","type","undefined","toLowerCase","isColorAttrSupported","m","match","targetElm","optsStr","dataOptions","getDataAttr","opts","Function","eParseError","warn","elm","createElement","setAttribute","isCanvasSupported","getContext","fetchElement","mixed","getElementById","isElementType","nodeName","el","name","attrName","attrValue","getAttribute","evnt","func","addEventListener","detachEvent","removeEventListener","_attachedGroupEvents","attachGroupEvent","groupName","hasOwnProperty","push","detachGroupEvents","evt","fired","fireOnce","readyState","setTimeout","arguments","callee","documentElement","doScroll","top","tryScroll","body","e","msg","console","preventDefault","returnValue","captureTarget","target","setCapture","_capturedTarget","releaseTarget","releaseCapture","fireEvent","createEvent","ev","initEvent","dispatchEvent","createEventObject","classNameToList","replace","split","hasClass","indexOf","setClass","classList","unsetClass","repl","getStyle","getComputedStyle","currentStyle","setStyle","helper","getSupportedProp","names","style","props","borderRadius","boxShadow","prop","value","alphaOpacity","Math","round","parseFloat","opacity","filter","setBorderRadius","setBoxShadow","getElementPos","relativeToViewport","x","y","rect","getBoundingClientRect","left","viewPos","getViewPos","getElementSize","offsetWidth","offsetHeight","getAbsPointerPos","event","changedTouches","clientX","clientY","getRelPointerPos","srcElement","targetRect","doc","pageXOffset","scrollLeft","clientLeft","pageYOffset","scrollTop","clientTop","getViewSize","innerWidth","clientWidth","innerHeight","clientHeight","redrawPosition","picker","owner","thisObj","tp","vp","fixed","targetElement","ts","vs","ps","getPickerOuterDims","a","b","c","position","l","smartPosition","pp","positionValue","contractShadow","_drawPosition","vShadow","shadowBlur","wrap","boxS","shadow","BoxShadow","shadowColor","getPickerDims","displaySlider","getSliderComponent","dims","insetWidth","padding","width","getPadToSliderPadding","sliderSize","height","closable","buttonHeight","borderWidth","max","pointerBorderWidth","pointerThickness","getPadYComponent","mode","charAt","_jscLinkedInstance","showOnClick","show","_jscControlName","onControlPointerStart","hide","onParentScroll","_pointerMoveEvent","mouse","touch","_pointerEndEvent","_pointerOrigin","controlName","pointerType","_jscInstance","registerDragEvents","offset","onDocumentPointerMove","onDocumentPointerEnd","parent","frameElement","ofs","abs","rel","hsv","fromHSV","setPad","setSld","dispatchFineChange","dispatchChange","valueElement","onFineChange","callback","call","ofsX","ofsY","pointerAbs","xVal","yVal","leaveSld","leavePad","_vmlNS","_vmlCSS","_vmlReady","initVML","namespaces","add","styleSheets","tags","ss","createStyleSheet","owningElement","id","addRule","createPalette","paletteObj","draw","canvas","ctx","drawFunc","clearRect","hGrad","createLinearGradient","addColorStop","fillStyle","fillRect","vGrad","vmlContainer","overflow","method","angle","colors","hRect","stroked","appendChild","vRect","color","color2","createSliderGradient","sliderObj","color1","grad","leaveValue","leaveStyle","hShadow","blur","spread","inset","prototype","toString","vals","join","options","styleElement","required","refine","hash","uppercase","activeClass","overwriteImportant","minS","maxS","minV","maxV","rgb","crossSize","closeText","buttonColor","backgroundColor","borderColor","insetColor","pointerColor","pointerBorderColor","zIndex","container","opt","isPickerOwner","detachPicker","drawPicker","redraw","importColor","exportColor","fromString","backgroundImage","_jscOrigStyle","test","flags","toUpperCase","innerHTML","bgColor","fgColor","isLight","redrawPad","redrawSld","h","s","v","isNaN","min","HSV_RGB","fromRGB","r","g","RGB_HSV","str","parseInt","substr","params","re","mR","mG","mB","toHEXString","toRGBString","_processParentElementsInDOM","_linkedElementsProcessed","currStyle","_jscEventsAttached","parentNode","n","u","floor","f","THIS","removeChild","box","boxB","pad","padB","padM","padPal","cross","crossBY","crossBX","crossLY","crossLX","sld","sldB","sldM","sldGrad","sldPtrS","sldPtrIB","sldPtrMB","sldPtrOB","btn","btnT","p","crossOuterSize","padToSliderPadding","PI","padCursor","clear","border","background","cursor","display","right","sliderPtrSpace","setBtnBorder","insetColors","outsetColor","bottom","font","textAlign","eOldIE","onmousedown","lineHeight","createTextNode","yComponent","rgb1","rgb2","sldComponent","blurValue","getElementsByTagName","onclick","origCallback","updateField","inputElms","buttonElms"],"mappings":"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","sourcesContent":["/**\r\n * jscolor - JavaScript Color Picker\r\n *\r\n * @link    http://jscolor.com\r\n * @license For open source use: GPLv3\r\n *          For commercial use: JSColor Commercial License\r\n * @author  Jan Odvarko\r\n * @version 2.0.5\r\n *\r\n * See usage examples at http://jscolor.com/examples/\r\n */\r\n\r\n\r\n\"use strict\";\r\n\r\n\r\nif (!window.jscolor) { window.jscolor = (function () {\r\n\r\n\r\nvar jsc = {\r\n\r\n\r\n\tregister : function () {\r\n\t\tjsc.attachDOMReadyEvent(jsc.init);\r\n\t\tjsc.attachEvent(document, 'mousedown', jsc.onDocumentMouseDown);\r\n\t\tjsc.attachEvent(document, 'touchstart', jsc.onDocumentTouchStart);\r\n\t\tjsc.attachEvent(window, 'resize', jsc.onWindowResize);\r\n\t},\r\n\r\n\r\n\tinit : function () {\r\n\t\tif (jsc.jscolor.lookupClass) {\r\n\t\t\tjsc.jscolor.installByClassName(jsc.jscolor.lookupClass);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\ttryInstallOnElements : function (elms, className) {\r\n\t\tvar matchClass = new RegExp('(^|\\\\s)(' + className + ')(\\\\s*(\\\\{[^}]*\\\\})|\\\\s|$)', 'i');\r\n\r\n\t\tfor (var i = 0; i < elms.length; i += 1) {\r\n\t\t\tif (elms[i].type !== undefined && elms[i].type.toLowerCase() == 'color') {\r\n\t\t\t\tif (jsc.isColorAttrSupported) {\r\n\t\t\t\t\t// skip inputs of type 'color' if supported by the browser\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar m;\r\n\t\t\tif (!elms[i].jscolor && elms[i].className && (m = elms[i].className.match(matchClass))) {\r\n\t\t\t\tvar targetElm = elms[i];\r\n\t\t\t\tvar optsStr = null;\r\n\r\n\t\t\t\tvar dataOptions = jsc.getDataAttr(targetElm, 'jscolor');\r\n\t\t\t\tif (dataOptions !== null) {\r\n\t\t\t\t\toptsStr = dataOptions;\r\n\t\t\t\t} else if (m[4]) {\r\n\t\t\t\t\toptsStr = m[4];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar opts = {};\r\n\t\t\t\tif (optsStr) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\topts = (new Function ('return (' + optsStr + ')'))();\r\n\t\t\t\t\t} catch(eParseError) {\r\n\t\t\t\t\t\tjsc.warn('Error parsing jscolor options: ' + eParseError + ':\\n' + optsStr);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttargetElm.jscolor = new jsc.jscolor(targetElm, opts);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tisColorAttrSupported : (function () {\r\n\t\tvar elm = document.createElement('input');\r\n\t\tif (elm.setAttribute) {\r\n\t\t\telm.setAttribute('type', 'color');\r\n\t\t\tif (elm.type.toLowerCase() == 'color') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t})(),\r\n\r\n\r\n\tisCanvasSupported : (function () {\r\n\t\tvar elm = document.createElement('canvas');\r\n\t\treturn !!(elm.getContext && elm.getContext('2d'));\r\n\t})(),\r\n\r\n\r\n\tfetchElement : function (mixed) {\r\n\t\treturn typeof mixed === 'string' ? document.getElementById(mixed) : mixed;\r\n\t},\r\n\r\n\r\n\tisElementType : function (elm, type) {\r\n\t\treturn elm.nodeName.toLowerCase() === type.toLowerCase();\r\n\t},\r\n\r\n\r\n\tgetDataAttr : function (el, name) {\r\n\t\tvar attrName = 'data-' + name;\r\n\t\tvar attrValue = el.getAttribute(attrName);\r\n\t\tif (attrValue !== null) {\r\n\t\t\treturn attrValue;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\r\n\tattachEvent : function (el, evnt, func) {\r\n\t\tif (el.addEventListener) {\r\n\t\t\tel.addEventListener(evnt, func, false);\r\n\t\t} else if (el.attachEvent) {\r\n\t\t\tel.attachEvent('on' + evnt, func);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tdetachEvent : function (el, evnt, func) {\r\n\t\tif (el.removeEventListener) {\r\n\t\t\tel.removeEventListener(evnt, func, false);\r\n\t\t} else if (el.detachEvent) {\r\n\t\t\tel.detachEvent('on' + evnt, func);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_attachedGroupEvents : {},\r\n\r\n\r\n\tattachGroupEvent : function (groupName, el, evnt, func) {\r\n\t\tif (!jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\r\n\t\t\tjsc._attachedGroupEvents[groupName] = [];\r\n\t\t}\r\n\t\tjsc._attachedGroupEvents[groupName].push([el, evnt, func]);\r\n\t\tjsc.attachEvent(el, evnt, func);\r\n\t},\r\n\r\n\r\n\tdetachGroupEvents : function (groupName) {\r\n\t\tif (jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\r\n\t\t\tfor (var i = 0; i < jsc._attachedGroupEvents[groupName].length; i += 1) {\r\n\t\t\t\tvar evt = jsc._attachedGroupEvents[groupName][i];\r\n\t\t\t\tjsc.detachEvent(evt[0], evt[1], evt[2]);\r\n\t\t\t}\r\n\t\t\tdelete jsc._attachedGroupEvents[groupName];\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tattachDOMReadyEvent : function (func) {\r\n\t\tvar fired = false;\r\n\t\tvar fireOnce = function () {\r\n\t\t\tif (!fired) {\r\n\t\t\t\tfired = true;\r\n\t\t\t\tfunc();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (document.readyState === 'complete') {\r\n\t\t\tsetTimeout(fireOnce, 1); // async\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (document.addEventListener) {\r\n\t\t\tdocument.addEventListener('DOMContentLoaded', fireOnce, false);\r\n\r\n\t\t\t// Fallback\r\n\t\t\twindow.addEventListener('load', fireOnce, false);\r\n\r\n\t\t} else if (document.attachEvent) {\r\n\t\t\t// IE\r\n\t\t\tdocument.attachEvent('onreadystatechange', function () {\r\n\t\t\t\tif (document.readyState === 'complete') {\r\n\t\t\t\t\tdocument.detachEvent('onreadystatechange', arguments.callee);\r\n\t\t\t\t\tfireOnce();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t// Fallback\r\n\t\t\twindow.attachEvent('onload', fireOnce);\r\n\r\n\t\t\t// IE7/8\r\n\t\t\tif (document.documentElement.doScroll && window == window.top) {\r\n\t\t\t\tvar tryScroll = function () {\r\n\t\t\t\t\tif (!document.body) { return; }\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tdocument.documentElement.doScroll('left');\r\n\t\t\t\t\t\tfireOnce();\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tsetTimeout(tryScroll, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\ttryScroll();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\twarn : function (msg) {\r\n\t\tif (window.console && window.console.warn) {\r\n\t\t\twindow.console.warn(msg);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tpreventDefault : function (e) {\r\n\t\tif (e.preventDefault) { e.preventDefault(); }\r\n\t\te.returnValue = false;\r\n\t},\r\n\r\n\r\n\tcaptureTarget : function (target) {\r\n\t\t// IE\r\n\t\tif (target.setCapture) {\r\n\t\t\tjsc._capturedTarget = target;\r\n\t\t\tjsc._capturedTarget.setCapture();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\treleaseTarget : function () {\r\n\t\t// IE\r\n\t\tif (jsc._capturedTarget) {\r\n\t\t\tjsc._capturedTarget.releaseCapture();\r\n\t\t\tjsc._capturedTarget = null;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tfireEvent : function (el, evnt) {\r\n\t\tif (!el) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (document.createEvent) {\r\n\t\t\tvar ev = document.createEvent('HTMLEvents');\r\n\t\t\tev.initEvent(evnt, true, true);\r\n\t\t\tel.dispatchEvent(ev);\r\n\t\t} else if (document.createEventObject) {\r\n\t\t\tvar ev = document.createEventObject();\r\n\t\t\tel.fireEvent('on' + evnt, ev);\r\n\t\t} else if (el['on' + evnt]) { // alternatively use the traditional event model\r\n\t\t\tel['on' + evnt]();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tclassNameToList : function (className) {\r\n\t\treturn className.replace(/^\\s+|\\s+$/g, '').split(/\\s+/);\r\n\t},\r\n\r\n\r\n\t// The className parameter (str) can only contain a single class name\r\n\thasClass : function (elm, className) {\r\n\t\tif (!className) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn -1 != (' ' + elm.className.replace(/\\s+/g, ' ') + ' ').indexOf(' ' + className + ' ');\r\n\t},\r\n\r\n\r\n\t// The className parameter (str) can contain multiple class names separated by whitespace\r\n\tsetClass : function (elm, className) {\r\n\t\tvar classList = jsc.classNameToList(className);\r\n\t\tfor (var i = 0; i < classList.length; i += 1) {\r\n\t\t\tif (!jsc.hasClass(elm, classList[i])) {\r\n\t\t\t\telm.className += (elm.className ? ' ' : '') + classList[i];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// The className parameter (str) can contain multiple class names separated by whitespace\r\n\tunsetClass : function (elm, className) {\r\n\t\tvar classList = jsc.classNameToList(className);\r\n\t\tfor (var i = 0; i < classList.length; i += 1) {\r\n\t\t\tvar repl = new RegExp(\r\n\t\t\t\t'^\\\\s*' + classList[i] + '\\\\s*|' +\r\n\t\t\t\t'\\\\s*' + classList[i] + '\\\\s*$|' +\r\n\t\t\t\t'\\\\s+' + classList[i] + '(\\\\s+)',\r\n\t\t\t\t'g'\r\n\t\t\t);\r\n\t\t\telm.className = elm.className.replace(repl, '$1');\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tgetStyle : function (elm) {\r\n\t\treturn window.getComputedStyle ? window.getComputedStyle(elm) : elm.currentStyle;\r\n\t},\r\n\r\n\r\n\tsetStyle : (function () {\r\n\t\tvar helper = document.createElement('div');\r\n\t\tvar getSupportedProp = function (names) {\r\n\t\t\tfor (var i = 0; i < names.length; i += 1) {\r\n\t\t\t\tif (names[i] in helper.style) {\r\n\t\t\t\t\treturn names[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tvar props = {\r\n\t\t\tborderRadius: getSupportedProp(['borderRadius', 'MozBorderRadius', 'webkitBorderRadius']),\r\n\t\t\tboxShadow: getSupportedProp(['boxShadow', 'MozBoxShadow', 'webkitBoxShadow'])\r\n\t\t};\r\n\t\treturn function (elm, prop, value) {\r\n\t\t\tswitch (prop.toLowerCase()) {\r\n\t\t\tcase 'opacity':\r\n\t\t\t\tvar alphaOpacity = Math.round(parseFloat(value) * 100);\r\n\t\t\t\telm.style.opacity = value;\r\n\t\t\t\telm.style.filter = 'alpha(opacity=' + alphaOpacity + ')';\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\telm.style[props[prop]] = value;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t})(),\r\n\r\n\r\n\tsetBorderRadius : function (elm, value) {\r\n\t\tjsc.setStyle(elm, 'borderRadius', value || '0');\r\n\t},\r\n\r\n\r\n\tsetBoxShadow : function (elm, value) {\r\n\t\tjsc.setStyle(elm, 'boxShadow', value || 'none');\r\n\t},\r\n\r\n\r\n\tgetElementPos : function (e, relativeToViewport) {\r\n\t\tvar x=0, y=0;\r\n\t\tvar rect = e.getBoundingClientRect();\r\n\t\tx = rect.left;\r\n\t\ty = rect.top;\r\n\t\tif (!relativeToViewport) {\r\n\t\t\tvar viewPos = jsc.getViewPos();\r\n\t\t\tx += viewPos[0];\r\n\t\t\ty += viewPos[1];\r\n\t\t}\r\n\t\treturn [x, y];\r\n\t},\r\n\r\n\r\n\tgetElementSize : function (e) {\r\n\t\treturn [e.offsetWidth, e.offsetHeight];\r\n\t},\r\n\r\n\r\n\t// get pointer's X/Y coordinates relative to viewport\r\n\tgetAbsPointerPos : function (e) {\r\n\t\tif (!e) { e = window.event; }\r\n\t\tvar x = 0, y = 0;\r\n\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\r\n\t\t\t// touch devices\r\n\t\t\tx = e.changedTouches[0].clientX;\r\n\t\t\ty = e.changedTouches[0].clientY;\r\n\t\t} else if (typeof e.clientX === 'number') {\r\n\t\t\tx = e.clientX;\r\n\t\t\ty = e.clientY;\r\n\t\t}\r\n\t\treturn { x: x, y: y };\r\n\t},\r\n\r\n\r\n\t// get pointer's X/Y coordinates relative to target element\r\n\tgetRelPointerPos : function (e) {\r\n\t\tif (!e) { e = window.event; }\r\n\t\tvar target = e.target || e.srcElement;\r\n\t\tvar targetRect = target.getBoundingClientRect();\r\n\r\n\t\tvar x = 0, y = 0;\r\n\r\n\t\tvar clientX = 0, clientY = 0;\r\n\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\r\n\t\t\t// touch devices\r\n\t\t\tclientX = e.changedTouches[0].clientX;\r\n\t\t\tclientY = e.changedTouches[0].clientY;\r\n\t\t} else if (typeof e.clientX === 'number') {\r\n\t\t\tclientX = e.clientX;\r\n\t\t\tclientY = e.clientY;\r\n\t\t}\r\n\r\n\t\tx = clientX - targetRect.left;\r\n\t\ty = clientY - targetRect.top;\r\n\t\treturn { x: x, y: y };\r\n\t},\r\n\r\n\r\n\tgetViewPos : function () {\r\n\t\tvar doc = document.documentElement;\r\n\t\treturn [\r\n\t\t\t(window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0),\r\n\t\t\t(window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\r\n\t\t];\r\n\t},\r\n\r\n\r\n\tgetViewSize : function () {\r\n\t\tvar doc = document.documentElement;\r\n\t\treturn [\r\n\t\t\t(window.innerWidth || doc.clientWidth),\r\n\t\t\t(window.innerHeight || doc.clientHeight),\r\n\t\t];\r\n\t},\r\n\r\n\r\n\tredrawPosition : function () {\r\n\r\n\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\tvar thisObj = jsc.picker.owner;\r\n\r\n\t\t\tvar tp, vp;\r\n\r\n\t\t\tif (thisObj.fixed) {\r\n\t\t\t\t// Fixed elements are positioned relative to viewport,\r\n\t\t\t\t// therefore we can ignore the scroll offset\r\n\t\t\t\ttp = jsc.getElementPos(thisObj.targetElement, true); // target pos\r\n\t\t\t\tvp = [0, 0]; // view pos\r\n\t\t\t} else {\r\n\t\t\t\ttp = jsc.getElementPos(thisObj.targetElement); // target pos\r\n\t\t\t\tvp = jsc.getViewPos(); // view pos\r\n\t\t\t}\r\n\r\n\t\t\tvar ts = jsc.getElementSize(thisObj.targetElement); // target size\r\n\t\t\tvar vs = jsc.getViewSize(); // view size\r\n\t\t\tvar ps = jsc.getPickerOuterDims(thisObj); // picker size\r\n\t\t\tvar a, b, c;\r\n\t\t\tswitch (thisObj.position.toLowerCase()) {\r\n\t\t\t\tcase 'left': a=1; b=0; c=-1; break;\r\n\t\t\t\tcase 'right':a=1; b=0; c=1; break;\r\n\t\t\t\tcase 'top':  a=0; b=1; c=-1; break;\r\n\t\t\t\tdefault:     a=0; b=1; c=1; break;\r\n\t\t\t}\r\n\t\t\tvar l = (ts[b]+ps[b])/2;\r\n\r\n\t\t\t// compute picker position\r\n\t\t\tif (!thisObj.smartPosition) {\r\n\t\t\t\tvar pp = [\r\n\t\t\t\t\ttp[a],\r\n\t\t\t\t\ttp[b]+ts[b]-l+l*c\r\n\t\t\t\t];\r\n\t\t\t} else {\r\n\t\t\t\tvar pp = [\r\n\t\t\t\t\t-vp[a]+tp[a]+ps[a] > vs[a] ?\r\n\t\t\t\t\t\t(-vp[a]+tp[a]+ts[a]/2 > vs[a]/2 && tp[a]+ts[a]-ps[a] >= 0 ? tp[a]+ts[a]-ps[a] : tp[a]) :\r\n\t\t\t\t\t\ttp[a],\r\n\t\t\t\t\t-vp[b]+tp[b]+ts[b]+ps[b]-l+l*c > vs[b] ?\r\n\t\t\t\t\t\t(-vp[b]+tp[b]+ts[b]/2 > vs[b]/2 && tp[b]+ts[b]-l-l*c >= 0 ? tp[b]+ts[b]-l-l*c : tp[b]+ts[b]-l+l*c) :\r\n\t\t\t\t\t\t(tp[b]+ts[b]-l+l*c >= 0 ? tp[b]+ts[b]-l+l*c : tp[b]+ts[b]-l-l*c)\r\n\t\t\t\t];\r\n\t\t\t}\r\n\r\n\t\t\tvar x = pp[a];\r\n\t\t\tvar y = pp[b];\r\n\t\t\tvar positionValue = thisObj.fixed ? 'fixed' : 'absolute';\r\n\t\t\tvar contractShadow =\r\n\t\t\t\t(pp[0] + ps[0] > tp[0] || pp[0] < tp[0] + ts[0]) &&\r\n\t\t\t\t(pp[1] + ps[1] < tp[1] + ts[1]);\r\n\r\n\t\t\tjsc._drawPosition(thisObj, x, y, positionValue, contractShadow);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_drawPosition : function (thisObj, x, y, positionValue, contractShadow) {\r\n\t\tvar vShadow = contractShadow ? 0 : thisObj.shadowBlur; // px\r\n\r\n\t\tjsc.picker.wrap.style.position = positionValue;\r\n\t\tjsc.picker.wrap.style.left = x + 'px';\r\n\t\tjsc.picker.wrap.style.top = y + 'px';\r\n\r\n\t\tjsc.setBoxShadow(\r\n\t\t\tjsc.picker.boxS,\r\n\t\t\tthisObj.shadow ?\r\n\t\t\t\tnew jsc.BoxShadow(0, vShadow, thisObj.shadowBlur, 0, thisObj.shadowColor) :\r\n\t\t\t\tnull);\r\n\t},\r\n\r\n\r\n\tgetPickerDims : function (thisObj) {\r\n\t\tvar displaySlider = !!jsc.getSliderComponent(thisObj);\r\n\t\tvar dims = [\r\n\t\t\t2 * thisObj.insetWidth + 2 * thisObj.padding + thisObj.width +\r\n\t\t\t\t(displaySlider ? 2 * thisObj.insetWidth + jsc.getPadToSliderPadding(thisObj) + thisObj.sliderSize : 0),\r\n\t\t\t2 * thisObj.insetWidth + 2 * thisObj.padding + thisObj.height +\r\n\t\t\t\t(thisObj.closable ? 2 * thisObj.insetWidth + thisObj.padding + thisObj.buttonHeight : 0)\r\n\t\t];\r\n\t\treturn dims;\r\n\t},\r\n\r\n\r\n\tgetPickerOuterDims : function (thisObj) {\r\n\t\tvar dims = jsc.getPickerDims(thisObj);\r\n\t\treturn [\r\n\t\t\tdims[0] + 2 * thisObj.borderWidth,\r\n\t\t\tdims[1] + 2 * thisObj.borderWidth\r\n\t\t];\r\n\t},\r\n\r\n\r\n\tgetPadToSliderPadding : function (thisObj) {\r\n\t\treturn Math.max(thisObj.padding, 1.5 * (2 * thisObj.pointerBorderWidth + thisObj.pointerThickness));\r\n\t},\r\n\r\n\r\n\tgetPadYComponent : function (thisObj) {\r\n\t\tswitch (thisObj.mode.charAt(1).toLowerCase()) {\r\n\t\t\tcase 'v': return 'v'; break;\r\n\t\t}\r\n\t\treturn 's';\r\n\t},\r\n\r\n\r\n\tgetSliderComponent : function (thisObj) {\r\n\t\tif (thisObj.mode.length > 2) {\r\n\t\t\tswitch (thisObj.mode.charAt(2).toLowerCase()) {\r\n\t\t\t\tcase 's': return 's'; break;\r\n\t\t\t\tcase 'v': return 'v'; break;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\r\n\tonDocumentMouseDown : function (e) {\r\n\t\tif (!e) { e = window.event; }\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif (target._jscLinkedInstance) {\r\n\t\t\tif (target._jscLinkedInstance.showOnClick) {\r\n\t\t\t\ttarget._jscLinkedInstance.show();\r\n\t\t\t}\r\n\t\t} else if (target._jscControlName) {\r\n\t\t\tjsc.onControlPointerStart(e, target, target._jscControlName, 'mouse');\r\n\t\t} else {\r\n\t\t\t// Mouse is outside the picker controls -> hide the color picker!\r\n\t\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\t\tjsc.picker.owner.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tonDocumentTouchStart : function (e) {\r\n\t\tif (!e) { e = window.event; }\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif (target._jscLinkedInstance) {\r\n\t\t\tif (target._jscLinkedInstance.showOnClick) {\r\n\t\t\t\ttarget._jscLinkedInstance.show();\r\n\t\t\t}\r\n\t\t} else if (target._jscControlName) {\r\n\t\t\tjsc.onControlPointerStart(e, target, target._jscControlName, 'touch');\r\n\t\t} else {\r\n\t\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\t\tjsc.picker.owner.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tonWindowResize : function (e) {\r\n\t\tjsc.redrawPosition();\r\n\t},\r\n\r\n\r\n\tonParentScroll : function (e) {\r\n\t\t// hide the picker when one of the parent elements is scrolled\r\n\t\tif (jsc.picker && jsc.picker.owner) {\r\n\t\t\tjsc.picker.owner.hide();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_pointerMoveEvent : {\r\n\t\tmouse: 'mousemove',\r\n\t\ttouch: 'touchmove'\r\n\t},\r\n\t_pointerEndEvent : {\r\n\t\tmouse: 'mouseup',\r\n\t\ttouch: 'touchend'\r\n\t},\r\n\r\n\r\n\t_pointerOrigin : null,\r\n\t_capturedTarget : null,\r\n\r\n\r\n\tonControlPointerStart : function (e, target, controlName, pointerType) {\r\n\t\tvar thisObj = target._jscInstance;\r\n\r\n\t\tjsc.preventDefault(e);\r\n\t\tjsc.captureTarget(target);\r\n\r\n\t\tvar registerDragEvents = function (doc, offset) {\r\n\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerMoveEvent[pointerType],\r\n\t\t\t\tjsc.onDocumentPointerMove(e, target, controlName, pointerType, offset));\r\n\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerEndEvent[pointerType],\r\n\t\t\t\tjsc.onDocumentPointerEnd(e, target, controlName, pointerType));\r\n\t\t};\r\n\r\n\t\tregisterDragEvents(document, [0, 0]);\r\n\r\n\t\tif (window.parent && window.frameElement) {\r\n\t\t\tvar rect = window.frameElement.getBoundingClientRect();\r\n\t\t\tvar ofs = [-rect.left, -rect.top];\r\n\t\t\tregisterDragEvents(window.parent.window.document, ofs);\r\n\t\t}\r\n\r\n\t\tvar abs = jsc.getAbsPointerPos(e);\r\n\t\tvar rel = jsc.getRelPointerPos(e);\r\n\t\tjsc._pointerOrigin = {\r\n\t\t\tx: abs.x - rel.x,\r\n\t\t\ty: abs.y - rel.y\r\n\t\t};\r\n\r\n\t\tswitch (controlName) {\r\n\t\tcase 'pad':\r\n\t\t\t// if the slider is at the bottom, move it up\r\n\t\t\tswitch (jsc.getSliderComponent(thisObj)) {\r\n\t\t\tcase 's': if (thisObj.hsv[1] === 0) { thisObj.fromHSV(null, 100, null); }; break;\r\n\t\t\tcase 'v': if (thisObj.hsv[2] === 0) { thisObj.fromHSV(null, null, 100); }; break;\r\n\t\t\t}\r\n\t\t\tjsc.setPad(thisObj, e, 0, 0);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'sld':\r\n\t\t\tjsc.setSld(thisObj, e, 0);\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tjsc.dispatchFineChange(thisObj);\r\n\t},\r\n\r\n\r\n\tonDocumentPointerMove : function (e, target, controlName, pointerType, offset) {\r\n\t\treturn function (e) {\r\n\t\t\tvar thisObj = target._jscInstance;\r\n\t\t\tswitch (controlName) {\r\n\t\t\tcase 'pad':\r\n\t\t\t\tif (!e) { e = window.event; }\r\n\t\t\t\tjsc.setPad(thisObj, e, offset[0], offset[1]);\r\n\t\t\t\tjsc.dispatchFineChange(thisObj);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'sld':\r\n\t\t\t\tif (!e) { e = window.event; }\r\n\t\t\t\tjsc.setSld(thisObj, e, offset[1]);\r\n\t\t\t\tjsc.dispatchFineChange(thisObj);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tonDocumentPointerEnd : function (e, target, controlName, pointerType) {\r\n\t\treturn function (e) {\r\n\t\t\tvar thisObj = target._jscInstance;\r\n\t\t\tjsc.detachGroupEvents('drag');\r\n\t\t\tjsc.releaseTarget();\r\n\t\t\t// Always dispatch changes after detaching outstanding mouse handlers,\r\n\t\t\t// in case some user interaction will occur in user's onchange callback\r\n\t\t\t// that would intrude with current mouse events\r\n\t\t\tjsc.dispatchChange(thisObj);\r\n\t\t};\r\n\t},\r\n\r\n\r\n\tdispatchChange : function (thisObj) {\r\n\t\tif (thisObj.valueElement) {\r\n\t\t\tif (jsc.isElementType(thisObj.valueElement, 'input')) {\r\n\t\t\t\tjsc.fireEvent(thisObj.valueElement, 'change');\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tdispatchFineChange : function (thisObj) {\r\n\t\tif (thisObj.onFineChange) {\r\n\t\t\tvar callback;\r\n\t\t\tif (typeof thisObj.onFineChange === 'string') {\r\n\t\t\t\tcallback = new Function (thisObj.onFineChange);\r\n\t\t\t} else {\r\n\t\t\t\tcallback = thisObj.onFineChange;\r\n\t\t\t}\r\n\t\t\tcallback.call(thisObj);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tsetPad : function (thisObj, e, ofsX, ofsY) {\r\n\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\r\n\t\tvar x = ofsX + pointerAbs.x - jsc._pointerOrigin.x - thisObj.padding - thisObj.insetWidth;\r\n\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.insetWidth;\r\n\r\n\t\tvar xVal = x * (360 / (thisObj.width - 1));\r\n\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\r\n\r\n\t\tswitch (jsc.getPadYComponent(thisObj)) {\r\n\t\tcase 's': thisObj.fromHSV(xVal, yVal, null, jsc.leaveSld); break;\r\n\t\tcase 'v': thisObj.fromHSV(xVal, null, yVal, jsc.leaveSld); break;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tsetSld : function (thisObj, e, ofsY) {\r\n\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\r\n\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.insetWidth;\r\n\r\n\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\r\n\r\n\t\tswitch (jsc.getSliderComponent(thisObj)) {\r\n\t\tcase 's': thisObj.fromHSV(null, yVal, null, jsc.leavePad); break;\r\n\t\tcase 'v': thisObj.fromHSV(null, null, yVal, jsc.leavePad); break;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_vmlNS : 'jsc_vml_',\r\n\t_vmlCSS : 'jsc_vml_css_',\r\n\t_vmlReady : false,\r\n\r\n\r\n\tinitVML : function () {\r\n\t\tif (!jsc._vmlReady) {\r\n\t\t\t// init VML namespace\r\n\t\t\tvar doc = document;\r\n\t\t\tif (!doc.namespaces[jsc._vmlNS]) {\r\n\t\t\t\tdoc.namespaces.add(jsc._vmlNS, 'urn:schemas-microsoft-com:vml');\r\n\t\t\t}\r\n\t\t\tif (!doc.styleSheets[jsc._vmlCSS]) {\r\n\t\t\t\tvar tags = ['shape', 'shapetype', 'group', 'background', 'path', 'formulas', 'handles', 'fill', 'stroke', 'shadow', 'textbox', 'textpath', 'imagedata', 'line', 'polyline', 'curve', 'rect', 'roundrect', 'oval', 'arc', 'image'];\r\n\t\t\t\tvar ss = doc.createStyleSheet();\r\n\t\t\t\tss.owningElement.id = jsc._vmlCSS;\r\n\t\t\t\tfor (var i = 0; i < tags.length; i += 1) {\r\n\t\t\t\t\tss.addRule(jsc._vmlNS + '\\\\:' + tags[i], 'behavior:url(#default#VML);');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tjsc._vmlReady = true;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tcreatePalette : function () {\r\n\r\n\t\tvar paletteObj = {\r\n\t\t\telm: null,\r\n\t\t\tdraw: null\r\n\t\t};\r\n\r\n\t\tif (jsc.isCanvasSupported) {\r\n\t\t\t// Canvas implementation for modern browsers\r\n\r\n\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\t\tvar drawFunc = function (width, height, type) {\r\n\t\t\t\tcanvas.width = width;\r\n\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\tvar hGrad = ctx.createLinearGradient(0, 0, canvas.width, 0);\r\n\t\t\t\thGrad.addColorStop(0 / 6, '#F00');\r\n\t\t\t\thGrad.addColorStop(1 / 6, '#FF0');\r\n\t\t\t\thGrad.addColorStop(2 / 6, '#0F0');\r\n\t\t\t\thGrad.addColorStop(3 / 6, '#0FF');\r\n\t\t\t\thGrad.addColorStop(4 / 6, '#00F');\r\n\t\t\t\thGrad.addColorStop(5 / 6, '#F0F');\r\n\t\t\t\thGrad.addColorStop(6 / 6, '#F00');\r\n\r\n\t\t\t\tctx.fillStyle = hGrad;\r\n\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\tvar vGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n\t\t\t\tswitch (type.toLowerCase()) {\r\n\t\t\t\tcase 's':\r\n\t\t\t\t\tvGrad.addColorStop(0, 'rgba(255,255,255,0)');\r\n\t\t\t\t\tvGrad.addColorStop(1, 'rgba(255,255,255,1)');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'v':\r\n\t\t\t\t\tvGrad.addColorStop(0, 'rgba(0,0,0,0)');\r\n\t\t\t\t\tvGrad.addColorStop(1, 'rgba(0,0,0,1)');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tctx.fillStyle = vGrad;\r\n\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t\t};\r\n\r\n\t\t\tpaletteObj.elm = canvas;\r\n\t\t\tpaletteObj.draw = drawFunc;\r\n\r\n\t\t} else {\r\n\t\t\t// VML fallback for IE 7 and 8\r\n\r\n\t\t\tjsc.initVML();\r\n\r\n\t\t\tvar vmlContainer = document.createElement('div');\r\n\t\t\tvmlContainer.style.position = 'relative';\r\n\t\t\tvmlContainer.style.overflow = 'hidden';\r\n\r\n\t\t\tvar hGrad = document.createElement(jsc._vmlNS + ':fill');\r\n\t\t\thGrad.type = 'gradient';\r\n\t\t\thGrad.method = 'linear';\r\n\t\t\thGrad.angle = '90';\r\n\t\t\thGrad.colors = '16.67% #F0F, 33.33% #00F, 50% #0FF, 66.67% #0F0, 83.33% #FF0'\r\n\r\n\t\t\tvar hRect = document.createElement(jsc._vmlNS + ':rect');\r\n\t\t\thRect.style.position = 'absolute';\r\n\t\t\thRect.style.left = -1 + 'px';\r\n\t\t\thRect.style.top = -1 + 'px';\r\n\t\t\thRect.stroked = false;\r\n\t\t\thRect.appendChild(hGrad);\r\n\t\t\tvmlContainer.appendChild(hRect);\r\n\r\n\t\t\tvar vGrad = document.createElement(jsc._vmlNS + ':fill');\r\n\t\t\tvGrad.type = 'gradient';\r\n\t\t\tvGrad.method = 'linear';\r\n\t\t\tvGrad.angle = '180';\r\n\t\t\tvGrad.opacity = '0';\r\n\r\n\t\t\tvar vRect = document.createElement(jsc._vmlNS + ':rect');\r\n\t\t\tvRect.style.position = 'absolute';\r\n\t\t\tvRect.style.left = -1 + 'px';\r\n\t\t\tvRect.style.top = -1 + 'px';\r\n\t\t\tvRect.stroked = false;\r\n\t\t\tvRect.appendChild(vGrad);\r\n\t\t\tvmlContainer.appendChild(vRect);\r\n\r\n\t\t\tvar drawFunc = function (width, height, type) {\r\n\t\t\t\tvmlContainer.style.width = width + 'px';\r\n\t\t\t\tvmlContainer.style.height = height + 'px';\r\n\r\n\t\t\t\thRect.style.width =\r\n\t\t\t\tvRect.style.width =\r\n\t\t\t\t\t(width + 1) + 'px';\r\n\t\t\t\thRect.style.height =\r\n\t\t\t\tvRect.style.height =\r\n\t\t\t\t\t(height + 1) + 'px';\r\n\r\n\t\t\t\t// Colors must be specified during every redraw, otherwise IE won't display\r\n\t\t\t\t// a full gradient during a subsequential redraw\r\n\t\t\t\thGrad.color = '#F00';\r\n\t\t\t\thGrad.color2 = '#F00';\r\n\r\n\t\t\t\tswitch (type.toLowerCase()) {\r\n\t\t\t\tcase 's':\r\n\t\t\t\t\tvGrad.color = vGrad.color2 = '#FFF';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'v':\r\n\t\t\t\t\tvGrad.color = vGrad.color2 = '#000';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tpaletteObj.elm = vmlContainer;\r\n\t\t\tpaletteObj.draw = drawFunc;\r\n\t\t}\r\n\r\n\t\treturn paletteObj;\r\n\t},\r\n\r\n\r\n\tcreateSliderGradient : function () {\r\n\r\n\t\tvar sliderObj = {\r\n\t\t\telm: null,\r\n\t\t\tdraw: null\r\n\t\t};\r\n\r\n\t\tif (jsc.isCanvasSupported) {\r\n\t\t\t// Canvas implementation for modern browsers\r\n\r\n\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\t\tvar drawFunc = function (width, height, color1, color2) {\r\n\t\t\t\tcanvas.width = width;\r\n\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\tvar grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n\t\t\t\tgrad.addColorStop(0, color1);\r\n\t\t\t\tgrad.addColorStop(1, color2);\r\n\r\n\t\t\t\tctx.fillStyle = grad;\r\n\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t\t};\r\n\r\n\t\t\tsliderObj.elm = canvas;\r\n\t\t\tsliderObj.draw = drawFunc;\r\n\r\n\t\t} else {\r\n\t\t\t// VML fallback for IE 7 and 8\r\n\r\n\t\t\tjsc.initVML();\r\n\r\n\t\t\tvar vmlContainer = document.createElement('div');\r\n\t\t\tvmlContainer.style.position = 'relative';\r\n\t\t\tvmlContainer.style.overflow = 'hidden';\r\n\r\n\t\t\tvar grad = document.createElement(jsc._vmlNS + ':fill');\r\n\t\t\tgrad.type = 'gradient';\r\n\t\t\tgrad.method = 'linear';\r\n\t\t\tgrad.angle = '180';\r\n\r\n\t\t\tvar rect = document.createElement(jsc._vmlNS + ':rect');\r\n\t\t\trect.style.position = 'absolute';\r\n\t\t\trect.style.left = -1 + 'px';\r\n\t\t\trect.style.top = -1 + 'px';\r\n\t\t\trect.stroked = false;\r\n\t\t\trect.appendChild(grad);\r\n\t\t\tvmlContainer.appendChild(rect);\r\n\r\n\t\t\tvar drawFunc = function (width, height, color1, color2) {\r\n\t\t\t\tvmlContainer.style.width = width + 'px';\r\n\t\t\t\tvmlContainer.style.height = height + 'px';\r\n\r\n\t\t\t\trect.style.width = (width + 1) + 'px';\r\n\t\t\t\trect.style.height = (height + 1) + 'px';\r\n\r\n\t\t\t\tgrad.color = color1;\r\n\t\t\t\tgrad.color2 = color2;\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tsliderObj.elm = vmlContainer;\r\n\t\t\tsliderObj.draw = drawFunc;\r\n\t\t}\r\n\r\n\t\treturn sliderObj;\r\n\t},\r\n\r\n\r\n\tleaveValue : 1<<0,\r\n\tleaveStyle : 1<<1,\r\n\tleavePad : 1<<2,\r\n\tleaveSld : 1<<3,\r\n\r\n\r\n\tBoxShadow : (function () {\r\n\t\tvar BoxShadow = function (hShadow, vShadow, blur, spread, color, inset) {\r\n\t\t\tthis.hShadow = hShadow;\r\n\t\t\tthis.vShadow = vShadow;\r\n\t\t\tthis.blur = blur;\r\n\t\t\tthis.spread = spread;\r\n\t\t\tthis.color = color;\r\n\t\t\tthis.inset = !!inset;\r\n\t\t};\r\n\r\n\t\tBoxShadow.prototype.toString = function () {\r\n\t\t\tvar vals = [\r\n\t\t\t\tMath.round(this.hShadow) + 'px',\r\n\t\t\t\tMath.round(this.vShadow) + 'px',\r\n\t\t\t\tMath.round(this.blur) + 'px',\r\n\t\t\t\tMath.round(this.spread) + 'px',\r\n\t\t\t\tthis.color\r\n\t\t\t];\r\n\t\t\tif (this.inset) {\r\n\t\t\t\tvals.push('inset');\r\n\t\t\t}\r\n\t\t\treturn vals.join(' ');\r\n\t\t};\r\n\r\n\t\treturn BoxShadow;\r\n\t})(),\r\n\r\n\r\n\t//\r\n\t// Usage:\r\n\t// var myColor = new jscolor(<targetElement> [, <options>])\r\n\t//\r\n\r\n\tjscolor : function (targetElement, options) {\r\n\r\n\t\t// General options\r\n\t\t//\r\n\t\tthis.value = null; // initial HEX color. To change it later, use methods fromString(), fromHSV() and fromRGB()\r\n\t\tthis.valueElement = targetElement; // element that will be used to display and input the color code\r\n\t\tthis.styleElement = targetElement; // element that will preview the picked color using CSS backgroundColor\r\n\t\tthis.required = true; // whether the associated text <input> can be left empty\r\n\t\tthis.refine = true; // whether to refine the entered color code (e.g. uppercase it and remove whitespace)\r\n\t\tthis.hash = false; // whether to prefix the HEX color code with # symbol\r\n\t\tthis.uppercase = true; // whether to show the color code in upper case\r\n\t\tthis.onFineChange = null; // called instantly every time the color changes (value can be either a function or a string with javascript code)\r\n\t\tthis.activeClass = 'jscolor-active'; // class to be set to the target element when a picker window is open on it\r\n\t\tthis.overwriteImportant = false; // whether to overwrite colors of styleElement using !important\r\n\t\tthis.minS = 0; // min allowed saturation (0 - 100)\r\n\t\tthis.maxS = 100; // max allowed saturation (0 - 100)\r\n\t\tthis.minV = 0; // min allowed value (brightness) (0 - 100)\r\n\t\tthis.maxV = 100; // max allowed value (brightness) (0 - 100)\r\n\r\n\t\t// Accessing the picked color\r\n\t\t//\r\n\t\tthis.hsv = [0, 0, 100]; // read-only  [0-360, 0-100, 0-100]\r\n\t\tthis.rgb = [255, 255, 255]; // read-only  [0-255, 0-255, 0-255]\r\n\r\n\t\t// Color Picker options\r\n\t\t//\r\n\t\tthis.width = 181; // width of color palette (in px)\r\n\t\tthis.height = 101; // height of color palette (in px)\r\n\t\tthis.showOnClick = true; // whether to display the color picker when user clicks on its target element\r\n\t\tthis.mode = 'HSV'; // HSV | HVS | HS | HV - layout of the color picker controls\r\n\t\tthis.position = 'bottom'; // left | right | top | bottom - position relative to the target element\r\n\t\tthis.smartPosition = true; // automatically change picker position when there is not enough space for it\r\n\t\tthis.sliderSize = 16; // px\r\n\t\tthis.crossSize = 8; // px\r\n\t\tthis.closable = false; // whether to display the Close button\r\n\t\tthis.closeText = 'Close';\r\n\t\tthis.buttonColor = '#000000'; // CSS color\r\n\t\tthis.buttonHeight = 18; // px\r\n\t\tthis.padding = 12; // px\r\n\t\tthis.backgroundColor = '#FFFFFF'; // CSS color\r\n\t\tthis.borderWidth = 1; // px\r\n\t\tthis.borderColor = '#BBBBBB'; // CSS color\r\n\t\tthis.borderRadius = 8; // px\r\n\t\tthis.insetWidth = 1; // px\r\n\t\tthis.insetColor = '#BBBBBB'; // CSS color\r\n\t\tthis.shadow = true; // whether to display shadow\r\n\t\tthis.shadowBlur = 15; // px\r\n\t\tthis.shadowColor = 'rgba(0,0,0,0.2)'; // CSS color\r\n\t\tthis.pointerColor = '#4C4C4C'; // px\r\n\t\tthis.pointerBorderColor = '#FFFFFF'; // px\r\n        this.pointerBorderWidth = 1; // px\r\n        this.pointerThickness = 2; // px\r\n\t\tthis.zIndex = 1000;\r\n\t\tthis.container = null; // where to append the color picker (BODY element by default)\r\n\r\n\r\n\t\tfor (var opt in options) {\r\n\t\t\tif (options.hasOwnProperty(opt)) {\r\n\t\t\t\tthis[opt] = options[opt];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tthis.hide = function () {\r\n\t\t\tif (isPickerOwner()) {\r\n\t\t\t\tdetachPicker();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.show = function () {\r\n\t\t\tdrawPicker();\r\n\t\t};\r\n\r\n\r\n\t\tthis.redraw = function () {\r\n\t\t\tif (isPickerOwner()) {\r\n\t\t\t\tdrawPicker();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.importColor = function () {\r\n\t\t\tif (!this.valueElement) {\r\n\t\t\t\tthis.exportColor();\r\n\t\t\t} else {\r\n\t\t\t\tif (jsc.isElementType(this.valueElement, 'input')) {\r\n\t\t\t\t\tif (!this.refine) {\r\n\t\t\t\t\t\tif (!this.fromString(this.valueElement.value, jsc.leaveValue)) {\r\n\t\t\t\t\t\t\tif (this.styleElement) {\r\n\t\t\t\t\t\t\t\tthis.styleElement.style.backgroundImage = this.styleElement._jscOrigStyle.backgroundImage;\r\n\t\t\t\t\t\t\t\tthis.styleElement.style.backgroundColor = this.styleElement._jscOrigStyle.backgroundColor;\r\n\t\t\t\t\t\t\t\tthis.styleElement.style.color = this.styleElement._jscOrigStyle.color;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.exportColor(jsc.leaveValue | jsc.leaveStyle);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (!this.required && /^\\s*$/.test(this.valueElement.value)) {\r\n\t\t\t\t\t\tthis.valueElement.value = '';\r\n\t\t\t\t\t\tif (this.styleElement) {\r\n\t\t\t\t\t\t\tthis.styleElement.style.backgroundImage = this.styleElement._jscOrigStyle.backgroundImage;\r\n\t\t\t\t\t\t\tthis.styleElement.style.backgroundColor = this.styleElement._jscOrigStyle.backgroundColor;\r\n\t\t\t\t\t\t\tthis.styleElement.style.color = this.styleElement._jscOrigStyle.color;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.exportColor(jsc.leaveValue | jsc.leaveStyle);\r\n\r\n\t\t\t\t\t} else if (this.fromString(this.valueElement.value)) {\r\n\t\t\t\t\t\t// managed to import color successfully from the value -> OK, don't do anything\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.exportColor();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// not an input element -> doesn't have any value\r\n\t\t\t\t\tthis.exportColor();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tthis.exportColor = function (flags) {\r\n\t\t\tif (!(flags & jsc.leaveValue) && this.valueElement) {\r\n\t\t\t\tvar value = this.toString();\r\n\t\t\t\tif (this.uppercase) { value = value.toUpperCase(); }\r\n\t\t\t\tif (this.hash) { value = '#' + value; }\r\n\r\n\t\t\t\tif (jsc.isElementType(this.valueElement, 'input')) {\r\n\t\t\t\t\tthis.valueElement.value = value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.valueElement.innerHTML = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!(flags & jsc.leaveStyle)) {\r\n\t\t\t\tif (this.styleElement) {\r\n\t\t\t\t\tvar bgColor = '#' + this.toString();\r\n\t\t\t\t\tvar fgColor = this.isLight() ? '#000' : '#FFF';\r\n\r\n\t\t\t\t\tthis.styleElement.style.backgroundImage = 'none';\r\n\t\t\t\t\tthis.styleElement.style.backgroundColor = bgColor;\r\n\t\t\t\t\tthis.styleElement.style.color = fgColor;\r\n\r\n\t\t\t\t\tif (this.overwriteImportant) {\r\n\t\t\t\t\t\tthis.styleElement.setAttribute('style',\r\n\t\t\t\t\t\t\t'background: ' + bgColor + ' !important; ' +\r\n\t\t\t\t\t\t\t'color: ' + fgColor + ' !important;'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!(flags & jsc.leavePad) && isPickerOwner()) {\r\n\t\t\t\tredrawPad();\r\n\t\t\t}\r\n\t\t\tif (!(flags & jsc.leaveSld) && isPickerOwner()) {\r\n\t\t\t\tredrawSld();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\t// h: 0-360\r\n\t\t// s: 0-100\r\n\t\t// v: 0-100\r\n\t\t//\r\n\t\tthis.fromHSV = function (h, s, v, flags) { // null = don't change\r\n\t\t\tif (h !== null) {\r\n\t\t\t\tif (isNaN(h)) { return false; }\r\n\t\t\t\th = Math.max(0, Math.min(360, h));\r\n\t\t\t}\r\n\t\t\tif (s !== null) {\r\n\t\t\t\tif (isNaN(s)) { return false; }\r\n\t\t\t\ts = Math.max(0, Math.min(100, this.maxS, s), this.minS);\r\n\t\t\t}\r\n\t\t\tif (v !== null) {\r\n\t\t\t\tif (isNaN(v)) { return false; }\r\n\t\t\t\tv = Math.max(0, Math.min(100, this.maxV, v), this.minV);\r\n\t\t\t}\r\n\r\n\t\t\tthis.rgb = HSV_RGB(\r\n\t\t\t\th===null ? this.hsv[0] : (this.hsv[0]=h),\r\n\t\t\t\ts===null ? this.hsv[1] : (this.hsv[1]=s),\r\n\t\t\t\tv===null ? this.hsv[2] : (this.hsv[2]=v)\r\n\t\t\t);\r\n\r\n\t\t\tthis.exportColor(flags);\r\n\t\t};\r\n\r\n\r\n\t\t// r: 0-255\r\n\t\t// g: 0-255\r\n\t\t// b: 0-255\r\n\t\t//\r\n\t\tthis.fromRGB = function (r, g, b, flags) { // null = don't change\r\n\t\t\tif (r !== null) {\r\n\t\t\t\tif (isNaN(r)) { return false; }\r\n\t\t\t\tr = Math.max(0, Math.min(255, r));\r\n\t\t\t}\r\n\t\t\tif (g !== null) {\r\n\t\t\t\tif (isNaN(g)) { return false; }\r\n\t\t\t\tg = Math.max(0, Math.min(255, g));\r\n\t\t\t}\r\n\t\t\tif (b !== null) {\r\n\t\t\t\tif (isNaN(b)) { return false; }\r\n\t\t\t\tb = Math.max(0, Math.min(255, b));\r\n\t\t\t}\r\n\r\n\t\t\tvar hsv = RGB_HSV(\r\n\t\t\t\tr===null ? this.rgb[0] : r,\r\n\t\t\t\tg===null ? this.rgb[1] : g,\r\n\t\t\t\tb===null ? this.rgb[2] : b\r\n\t\t\t);\r\n\t\t\tif (hsv[0] !== null) {\r\n\t\t\t\tthis.hsv[0] = Math.max(0, Math.min(360, hsv[0]));\r\n\t\t\t}\r\n\t\t\tif (hsv[2] !== 0) {\r\n\t\t\t\tthis.hsv[1] = hsv[1]===null ? null : Math.max(0, this.minS, Math.min(100, this.maxS, hsv[1]));\r\n\t\t\t}\r\n\t\t\tthis.hsv[2] = hsv[2]===null ? null : Math.max(0, this.minV, Math.min(100, this.maxV, hsv[2]));\r\n\r\n\t\t\t// update RGB according to final HSV, as some values might be trimmed\r\n\t\t\tvar rgb = HSV_RGB(this.hsv[0], this.hsv[1], this.hsv[2]);\r\n\t\t\tthis.rgb[0] = rgb[0];\r\n\t\t\tthis.rgb[1] = rgb[1];\r\n\t\t\tthis.rgb[2] = rgb[2];\r\n\r\n\t\t\tthis.exportColor(flags);\r\n\t\t};\r\n\r\n\r\n\t\tthis.fromString = function (str, flags) {\r\n\t\t\tvar m;\r\n\t\t\tif (m = str.match(/^\\W*([0-9A-F]{3}([0-9A-F]{3})?)\\W*$/i)) {\r\n\t\t\t\t// HEX notation\r\n\t\t\t\t//\r\n\r\n\t\t\t\tif (m[1].length === 6) {\r\n\t\t\t\t\t// 6-char notation\r\n\t\t\t\t\tthis.fromRGB(\r\n\t\t\t\t\t\tparseInt(m[1].substr(0,2),16),\r\n\t\t\t\t\t\tparseInt(m[1].substr(2,2),16),\r\n\t\t\t\t\t\tparseInt(m[1].substr(4,2),16),\r\n\t\t\t\t\t\tflags\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 3-char notation\r\n\t\t\t\t\tthis.fromRGB(\r\n\t\t\t\t\t\tparseInt(m[1].charAt(0) + m[1].charAt(0),16),\r\n\t\t\t\t\t\tparseInt(m[1].charAt(1) + m[1].charAt(1),16),\r\n\t\t\t\t\t\tparseInt(m[1].charAt(2) + m[1].charAt(2),16),\r\n\t\t\t\t\t\tflags\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t} else if (m = str.match(/^\\W*rgba?\\(([^)]*)\\)\\W*$/i)) {\r\n\t\t\t\tvar params = m[1].split(',');\r\n\t\t\t\tvar re = /^\\s*(\\d*)(\\.\\d+)?\\s*$/;\r\n\t\t\t\tvar mR, mG, mB;\r\n\t\t\t\tif (\r\n\t\t\t\t\tparams.length >= 3 &&\r\n\t\t\t\t\t(mR = params[0].match(re)) &&\r\n\t\t\t\t\t(mG = params[1].match(re)) &&\r\n\t\t\t\t\t(mB = params[2].match(re))\r\n\t\t\t\t) {\r\n\t\t\t\t\tvar r = parseFloat((mR[1] || '0') + (mR[2] || ''));\r\n\t\t\t\t\tvar g = parseFloat((mG[1] || '0') + (mG[2] || ''));\r\n\t\t\t\t\tvar b = parseFloat((mB[1] || '0') + (mB[2] || ''));\r\n\t\t\t\t\tthis.fromRGB(r, g, b, flags);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\r\n\t\tthis.toString = function () {\r\n\t\t\treturn (\r\n\t\t\t\t(0x100 | Math.round(this.rgb[0])).toString(16).substr(1) +\r\n\t\t\t\t(0x100 | Math.round(this.rgb[1])).toString(16).substr(1) +\r\n\t\t\t\t(0x100 | Math.round(this.rgb[2])).toString(16).substr(1)\r\n\t\t\t);\r\n\t\t};\r\n\r\n\r\n\t\tthis.toHEXString = function () {\r\n\t\t\treturn '#' + this.toString().toUpperCase();\r\n\t\t};\r\n\r\n\r\n\t\tthis.toRGBString = function () {\r\n\t\t\treturn ('rgb(' +\r\n\t\t\t\tMath.round(this.rgb[0]) + ',' +\r\n\t\t\t\tMath.round(this.rgb[1]) + ',' +\r\n\t\t\t\tMath.round(this.rgb[2]) + ')'\r\n\t\t\t);\r\n\t\t};\r\n\r\n\r\n\t\tthis.isLight = function () {\r\n\t\t\treturn (\r\n\t\t\t\t0.213 * this.rgb[0] +\r\n\t\t\t\t0.715 * this.rgb[1] +\r\n\t\t\t\t0.072 * this.rgb[2] >\r\n\t\t\t\t255 / 2\r\n\t\t\t);\r\n\t\t};\r\n\r\n\r\n\t\tthis._processParentElementsInDOM = function () {\r\n\t\t\tif (this._linkedElementsProcessed) { return; }\r\n\t\t\tthis._linkedElementsProcessed = true;\r\n\r\n\t\t\tvar elm = this.targetElement;\r\n\t\t\tdo {\r\n\t\t\t\t// If the target element or one of its parent nodes has fixed position,\r\n\t\t\t\t// then use fixed positioning instead\r\n\t\t\t\t//\r\n\t\t\t\t// Note: In Firefox, getComputedStyle returns null in a hidden iframe,\r\n\t\t\t\t// that's why we need to check if the returned style object is non-empty\r\n\t\t\t\tvar currStyle = jsc.getStyle(elm);\r\n\t\t\t\tif (currStyle && currStyle.position.toLowerCase() === 'fixed') {\r\n\t\t\t\t\tthis.fixed = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (elm !== this.targetElement) {\r\n\t\t\t\t\t// Ensure to attach onParentScroll only once to each parent element\r\n\t\t\t\t\t// (multiple targetElements can share the same parent nodes)\r\n\t\t\t\t\t//\r\n\t\t\t\t\t// Note: It's not just offsetParents that can be scrollable,\r\n\t\t\t\t\t// that's why we loop through all parent nodes\r\n\t\t\t\t\tif (!elm._jscEventsAttached) {\r\n\t\t\t\t\t\tjsc.attachEvent(elm, 'scroll', jsc.onParentScroll);\r\n\t\t\t\t\t\telm._jscEventsAttached = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} while ((elm = elm.parentNode) && !jsc.isElementType(elm, 'body'));\r\n\t\t};\r\n\r\n\r\n\t\t// r: 0-255\r\n\t\t// g: 0-255\r\n\t\t// b: 0-255\r\n\t\t//\r\n\t\t// returns: [ 0-360, 0-100, 0-100 ]\r\n\t\t//\r\n\t\tfunction RGB_HSV (r, g, b) {\r\n\t\t\tr /= 255;\r\n\t\t\tg /= 255;\r\n\t\t\tb /= 255;\r\n\t\t\tvar n = Math.min(Math.min(r,g),b);\r\n\t\t\tvar v = Math.max(Math.max(r,g),b);\r\n\t\t\tvar m = v - n;\r\n\t\t\tif (m === 0) { return [ null, 0, 100 * v ]; }\r\n\t\t\tvar h = r===n ? 3+(b-g)/m : (g===n ? 5+(r-b)/m : 1+(g-r)/m);\r\n\t\t\treturn [\r\n\t\t\t\t60 * (h===6?0:h),\r\n\t\t\t\t100 * (m/v),\r\n\t\t\t\t100 * v\r\n\t\t\t];\r\n\t\t}\r\n\r\n\r\n\t\t// h: 0-360\r\n\t\t// s: 0-100\r\n\t\t// v: 0-100\r\n\t\t//\r\n\t\t// returns: [ 0-255, 0-255, 0-255 ]\r\n\t\t//\r\n\t\tfunction HSV_RGB (h, s, v) {\r\n\t\t\tvar u = 255 * (v / 100);\r\n\r\n\t\t\tif (h === null) {\r\n\t\t\t\treturn [ u, u, u ];\r\n\t\t\t}\r\n\r\n\t\t\th /= 60;\r\n\t\t\ts /= 100;\r\n\r\n\t\t\tvar i = Math.floor(h);\r\n\t\t\tvar f = i%2 ? h-i : 1-(h-i);\r\n\t\t\tvar m = u * (1 - s);\r\n\t\t\tvar n = u * (1 - s * f);\r\n\t\t\tswitch (i) {\r\n\t\t\t\tcase 6:\r\n\t\t\t\tcase 0: return [u,n,m];\r\n\t\t\t\tcase 1: return [n,u,m];\r\n\t\t\t\tcase 2: return [m,u,n];\r\n\t\t\t\tcase 3: return [m,n,u];\r\n\t\t\t\tcase 4: return [n,m,u];\r\n\t\t\t\tcase 5: return [u,m,n];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction detachPicker () {\r\n\t\t\tjsc.unsetClass(THIS.targetElement, THIS.activeClass);\r\n\t\t\tjsc.picker.wrap.parentNode.removeChild(jsc.picker.wrap);\r\n\t\t\tdelete jsc.picker.owner;\r\n\t\t}\r\n\r\n\r\n\t\tfunction drawPicker () {\r\n\r\n\t\t\t// At this point, when drawing the picker, we know what the parent elements are\r\n\t\t\t// and we can do all related DOM operations, such as registering events on them\r\n\t\t\t// or checking their positioning\r\n\t\t\tTHIS._processParentElementsInDOM();\r\n\r\n\t\t\tif (!jsc.picker) {\r\n\t\t\t\tjsc.picker = {\r\n\t\t\t\t\towner: null,\r\n\t\t\t\t\twrap : document.createElement('div'),\r\n\t\t\t\t\tbox : document.createElement('div'),\r\n\t\t\t\t\tboxS : document.createElement('div'), // shadow area\r\n\t\t\t\t\tboxB : document.createElement('div'), // border\r\n\t\t\t\t\tpad : document.createElement('div'),\r\n\t\t\t\t\tpadB : document.createElement('div'), // border\r\n\t\t\t\t\tpadM : document.createElement('div'), // mouse/touch area\r\n\t\t\t\t\tpadPal : jsc.createPalette(),\r\n\t\t\t\t\tcross : document.createElement('div'),\r\n\t\t\t\t\tcrossBY : document.createElement('div'), // border Y\r\n\t\t\t\t\tcrossBX : document.createElement('div'), // border X\r\n\t\t\t\t\tcrossLY : document.createElement('div'), // line Y\r\n\t\t\t\t\tcrossLX : document.createElement('div'), // line X\r\n\t\t\t\t\tsld : document.createElement('div'),\r\n\t\t\t\t\tsldB : document.createElement('div'), // border\r\n\t\t\t\t\tsldM : document.createElement('div'), // mouse/touch area\r\n\t\t\t\t\tsldGrad : jsc.createSliderGradient(),\r\n\t\t\t\t\tsldPtrS : document.createElement('div'), // slider pointer spacer\r\n\t\t\t\t\tsldPtrIB : document.createElement('div'), // slider pointer inner border\r\n\t\t\t\t\tsldPtrMB : document.createElement('div'), // slider pointer middle border\r\n\t\t\t\t\tsldPtrOB : document.createElement('div'), // slider pointer outer border\r\n\t\t\t\t\tbtn : document.createElement('div'),\r\n\t\t\t\t\tbtnT : document.createElement('span') // text\r\n\t\t\t\t};\r\n\r\n\t\t\t\tjsc.picker.pad.appendChild(jsc.picker.padPal.elm);\r\n\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.pad);\r\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBY);\r\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBX);\r\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLY);\r\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLX);\r\n\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.cross);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padB);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padM);\r\n\r\n\t\t\t\tjsc.picker.sld.appendChild(jsc.picker.sldGrad.elm);\r\n\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sld);\r\n\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sldPtrOB);\r\n\t\t\t\tjsc.picker.sldPtrOB.appendChild(jsc.picker.sldPtrMB);\r\n\t\t\t\tjsc.picker.sldPtrMB.appendChild(jsc.picker.sldPtrIB);\r\n\t\t\t\tjsc.picker.sldPtrIB.appendChild(jsc.picker.sldPtrS);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldB);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldM);\r\n\r\n\t\t\t\tjsc.picker.btn.appendChild(jsc.picker.btnT);\r\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.btn);\r\n\r\n\t\t\t\tjsc.picker.boxB.appendChild(jsc.picker.box);\r\n\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxS);\r\n\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxB);\r\n\t\t\t}\r\n\r\n\t\t\tvar p = jsc.picker;\r\n\r\n\t\t\tvar displaySlider = !!jsc.getSliderComponent(THIS);\r\n\t\t\tvar dims = jsc.getPickerDims(THIS);\r\n\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\r\n\t\t\tvar padToSliderPadding = jsc.getPadToSliderPadding(THIS);\r\n\t\t\tvar borderRadius = Math.min(\r\n\t\t\t\tTHIS.borderRadius,\r\n\t\t\t\tMath.round(THIS.padding * Math.PI)); // px\r\n\t\t\tvar padCursor = 'crosshair';\r\n\r\n\t\t\t// wrap\r\n\t\t\tp.wrap.style.clear = 'both';\r\n\t\t\tp.wrap.style.width = (dims[0] + 2 * THIS.borderWidth) + 'px';\r\n\t\t\tp.wrap.style.height = (dims[1] + 2 * THIS.borderWidth) + 'px';\r\n\t\t\tp.wrap.style.zIndex = THIS.zIndex;\r\n\r\n\t\t\t// picker\r\n\t\t\tp.box.style.width = dims[0] + 'px';\r\n\t\t\tp.box.style.height = dims[1] + 'px';\r\n\r\n\t\t\tp.boxS.style.position = 'absolute';\r\n\t\t\tp.boxS.style.left = '0';\r\n\t\t\tp.boxS.style.top = '0';\r\n\t\t\tp.boxS.style.width = '100%';\r\n\t\t\tp.boxS.style.height = '100%';\r\n\t\t\tjsc.setBorderRadius(p.boxS, borderRadius + 'px');\r\n\r\n\t\t\t// picker border\r\n\t\t\tp.boxB.style.position = 'relative';\r\n\t\t\tp.boxB.style.border = THIS.borderWidth + 'px solid';\r\n\t\t\tp.boxB.style.borderColor = THIS.borderColor;\r\n\t\t\tp.boxB.style.background = THIS.backgroundColor;\r\n\t\t\tjsc.setBorderRadius(p.boxB, borderRadius + 'px');\r\n\r\n\t\t\t// IE hack:\r\n\t\t\t// If the element is transparent, IE will trigger the event on the elements under it,\r\n\t\t\t// e.g. on Canvas or on elements with border\r\n\t\t\tp.padM.style.background =\r\n\t\t\tp.sldM.style.background =\r\n\t\t\t\t'#FFF';\r\n\t\t\tjsc.setStyle(p.padM, 'opacity', '0');\r\n\t\t\tjsc.setStyle(p.sldM, 'opacity', '0');\r\n\r\n\t\t\t// pad\r\n\t\t\tp.pad.style.position = 'relative';\r\n\t\t\tp.pad.style.width = THIS.width + 'px';\r\n\t\t\tp.pad.style.height = THIS.height + 'px';\r\n\r\n\t\t\t// pad palettes (HSV and HVS)\r\n\t\t\tp.padPal.draw(THIS.width, THIS.height, jsc.getPadYComponent(THIS));\r\n\r\n\t\t\t// pad border\r\n\t\t\tp.padB.style.position = 'absolute';\r\n\t\t\tp.padB.style.left = THIS.padding + 'px';\r\n\t\t\tp.padB.style.top = THIS.padding + 'px';\r\n\t\t\tp.padB.style.border = THIS.insetWidth + 'px solid';\r\n\t\t\tp.padB.style.borderColor = THIS.insetColor;\r\n\r\n\t\t\t// pad mouse area\r\n\t\t\tp.padM._jscInstance = THIS;\r\n\t\t\tp.padM._jscControlName = 'pad';\r\n\t\t\tp.padM.style.position = 'absolute';\r\n\t\t\tp.padM.style.left = '0';\r\n\t\t\tp.padM.style.top = '0';\r\n\t\t\tp.padM.style.width = (THIS.padding + 2 * THIS.insetWidth + THIS.width + padToSliderPadding / 2) + 'px';\r\n\t\t\tp.padM.style.height = dims[1] + 'px';\r\n\t\t\tp.padM.style.cursor = padCursor;\r\n\r\n\t\t\t// pad cross\r\n\t\t\tp.cross.style.position = 'absolute';\r\n\t\t\tp.cross.style.left =\r\n\t\t\tp.cross.style.top =\r\n\t\t\t\t'0';\r\n\t\t\tp.cross.style.width =\r\n\t\t\tp.cross.style.height =\r\n\t\t\t\tcrossOuterSize + 'px';\r\n\r\n\t\t\t// pad cross border Y and X\r\n\t\t\tp.crossBY.style.position =\r\n\t\t\tp.crossBX.style.position =\r\n\t\t\t\t'absolute';\r\n\t\t\tp.crossBY.style.background =\r\n\t\t\tp.crossBX.style.background =\r\n\t\t\t\tTHIS.pointerBorderColor;\r\n\t\t\tp.crossBY.style.width =\r\n\t\t\tp.crossBX.style.height =\r\n\t\t\t\t(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\r\n\t\t\tp.crossBY.style.height =\r\n\t\t\tp.crossBX.style.width =\r\n\t\t\t\tcrossOuterSize + 'px';\r\n\t\t\tp.crossBY.style.left =\r\n\t\t\tp.crossBX.style.top =\r\n\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2) - THIS.pointerBorderWidth) + 'px';\r\n\t\t\tp.crossBY.style.top =\r\n\t\t\tp.crossBX.style.left =\r\n\t\t\t\t'0';\r\n\r\n\t\t\t// pad cross line Y and X\r\n\t\t\tp.crossLY.style.position =\r\n\t\t\tp.crossLX.style.position =\r\n\t\t\t\t'absolute';\r\n\t\t\tp.crossLY.style.background =\r\n\t\t\tp.crossLX.style.background =\r\n\t\t\t\tTHIS.pointerColor;\r\n\t\t\tp.crossLY.style.height =\r\n\t\t\tp.crossLX.style.width =\r\n\t\t\t\t(crossOuterSize - 2 * THIS.pointerBorderWidth) + 'px';\r\n\t\t\tp.crossLY.style.width =\r\n\t\t\tp.crossLX.style.height =\r\n\t\t\t\tTHIS.pointerThickness + 'px';\r\n\t\t\tp.crossLY.style.left =\r\n\t\t\tp.crossLX.style.top =\r\n\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2)) + 'px';\r\n\t\t\tp.crossLY.style.top =\r\n\t\t\tp.crossLX.style.left =\r\n\t\t\t\tTHIS.pointerBorderWidth + 'px';\r\n\r\n\t\t\t// slider\r\n\t\t\tp.sld.style.overflow = 'hidden';\r\n\t\t\tp.sld.style.width = THIS.sliderSize + 'px';\r\n\t\t\tp.sld.style.height = THIS.height + 'px';\r\n\r\n\t\t\t// slider gradient\r\n\t\t\tp.sldGrad.draw(THIS.sliderSize, THIS.height, '#000', '#000');\r\n\r\n\t\t\t// slider border\r\n\t\t\tp.sldB.style.display = displaySlider ? 'block' : 'none';\r\n\t\t\tp.sldB.style.position = 'absolute';\r\n\t\t\tp.sldB.style.right = THIS.padding + 'px';\r\n\t\t\tp.sldB.style.top = THIS.padding + 'px';\r\n\t\t\tp.sldB.style.border = THIS.insetWidth + 'px solid';\r\n\t\t\tp.sldB.style.borderColor = THIS.insetColor;\r\n\r\n\t\t\t// slider mouse area\r\n\t\t\tp.sldM._jscInstance = THIS;\r\n\t\t\tp.sldM._jscControlName = 'sld';\r\n\t\t\tp.sldM.style.display = displaySlider ? 'block' : 'none';\r\n\t\t\tp.sldM.style.position = 'absolute';\r\n\t\t\tp.sldM.style.right = '0';\r\n\t\t\tp.sldM.style.top = '0';\r\n\t\t\tp.sldM.style.width = (THIS.sliderSize + padToSliderPadding / 2 + THIS.padding + 2 * THIS.insetWidth) + 'px';\r\n\t\t\tp.sldM.style.height = dims[1] + 'px';\r\n\t\t\tp.sldM.style.cursor = 'default';\r\n\r\n\t\t\t// slider pointer inner and outer border\r\n\t\t\tp.sldPtrIB.style.border =\r\n\t\t\tp.sldPtrOB.style.border =\r\n\t\t\t\tTHIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor;\r\n\r\n\t\t\t// slider pointer outer border\r\n\t\t\tp.sldPtrOB.style.position = 'absolute';\r\n\t\t\tp.sldPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\r\n\t\t\tp.sldPtrOB.style.top = '0';\r\n\r\n\t\t\t// slider pointer middle border\r\n\t\t\tp.sldPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor;\r\n\r\n\t\t\t// slider pointer spacer\r\n\t\t\tp.sldPtrS.style.width = THIS.sliderSize + 'px';\r\n\t\t\tp.sldPtrS.style.height = sliderPtrSpace + 'px';\r\n\r\n\t\t\t// the Close button\r\n\t\t\tfunction setBtnBorder () {\r\n\t\t\t\tvar insetColors = THIS.insetColor.split(/\\s+/);\r\n\t\t\t\tvar outsetColor = insetColors.length < 2 ? insetColors[0] : insetColors[1] + ' ' + insetColors[0] + ' ' + insetColors[0] + ' ' + insetColors[1];\r\n\t\t\t\tp.btn.style.borderColor = outsetColor;\r\n\t\t\t}\r\n\t\t\tp.btn.style.display = THIS.closable ? 'block' : 'none';\r\n\t\t\tp.btn.style.position = 'absolute';\r\n\t\t\tp.btn.style.left = THIS.padding + 'px';\r\n\t\t\tp.btn.style.bottom = THIS.padding + 'px';\r\n\t\t\tp.btn.style.padding = '0 15px';\r\n\t\t\tp.btn.style.height = THIS.buttonHeight + 'px';\r\n\t\t\tp.btn.style.border = THIS.insetWidth + 'px solid';\r\n\t\t\tsetBtnBorder();\r\n\t\t\tp.btn.style.color = THIS.buttonColor;\r\n\t\t\tp.btn.style.font = '12px sans-serif';\r\n\t\t\tp.btn.style.textAlign = 'center';\r\n\t\t\ttry {\r\n\t\t\t\tp.btn.style.cursor = 'pointer';\r\n\t\t\t} catch(eOldIE) {\r\n\t\t\t\tp.btn.style.cursor = 'hand';\r\n\t\t\t}\r\n\t\t\tp.btn.onmousedown = function () {\r\n\t\t\t\tTHIS.hide();\r\n\t\t\t};\r\n\t\t\tp.btnT.style.lineHeight = THIS.buttonHeight + 'px';\r\n\t\t\tp.btnT.innerHTML = '';\r\n\t\t\tp.btnT.appendChild(document.createTextNode(THIS.closeText));\r\n\r\n\t\t\t// place pointers\r\n\t\t\tredrawPad();\r\n\t\t\tredrawSld();\r\n\r\n\t\t\t// If we are changing the owner without first closing the picker,\r\n\t\t\t// make sure to first deal with the old owner\r\n\t\t\tif (jsc.picker.owner && jsc.picker.owner !== THIS) {\r\n\t\t\t\tjsc.unsetClass(jsc.picker.owner.targetElement, THIS.activeClass);\r\n\t\t\t}\r\n\r\n\t\t\t// Set the new picker owner\r\n\t\t\tjsc.picker.owner = THIS;\r\n\r\n\t\t\t// The redrawPosition() method needs picker.owner to be set, that's why we call it here,\r\n\t\t\t// after setting the owner\r\n\t\t\tif (jsc.isElementType(container, 'body')) {\r\n\t\t\t\tjsc.redrawPosition();\r\n\t\t\t} else {\r\n\t\t\t\tjsc._drawPosition(THIS, 0, 0, 'relative', false);\r\n\t\t\t}\r\n\r\n\t\t\tif (p.wrap.parentNode != container) {\r\n\t\t\t\tcontainer.appendChild(p.wrap);\r\n\t\t\t}\r\n\r\n\t\t\tjsc.setClass(THIS.targetElement, THIS.activeClass);\r\n\t\t}\r\n\r\n\r\n\t\tfunction redrawPad () {\r\n\t\t\t// redraw the pad pointer\r\n\t\t\tswitch (jsc.getPadYComponent(THIS)) {\r\n\t\t\tcase 's': var yComponent = 1; break;\r\n\t\t\tcase 'v': var yComponent = 2; break;\r\n\t\t\t}\r\n\t\t\tvar x = Math.round((THIS.hsv[0] / 360) * (THIS.width - 1));\r\n\t\t\tvar y = Math.round((1 - THIS.hsv[yComponent] / 100) * (THIS.height - 1));\r\n\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\r\n\t\t\tvar ofs = -Math.floor(crossOuterSize / 2);\r\n\t\t\tjsc.picker.cross.style.left = (x + ofs) + 'px';\r\n\t\t\tjsc.picker.cross.style.top = (y + ofs) + 'px';\r\n\r\n\t\t\t// redraw the slider\r\n\t\t\tswitch (jsc.getSliderComponent(THIS)) {\r\n\t\t\tcase 's':\r\n\t\t\t\tvar rgb1 = HSV_RGB(THIS.hsv[0], 100, THIS.hsv[2]);\r\n\t\t\t\tvar rgb2 = HSV_RGB(THIS.hsv[0], 0, THIS.hsv[2]);\r\n\t\t\t\tvar color1 = 'rgb(' +\r\n\t\t\t\t\tMath.round(rgb1[0]) + ',' +\r\n\t\t\t\t\tMath.round(rgb1[1]) + ',' +\r\n\t\t\t\t\tMath.round(rgb1[2]) + ')';\r\n\t\t\t\tvar color2 = 'rgb(' +\r\n\t\t\t\t\tMath.round(rgb2[0]) + ',' +\r\n\t\t\t\t\tMath.round(rgb2[1]) + ',' +\r\n\t\t\t\t\tMath.round(rgb2[2]) + ')';\r\n\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'v':\r\n\t\t\t\tvar rgb = HSV_RGB(THIS.hsv[0], THIS.hsv[1], 100);\r\n\t\t\t\tvar color1 = 'rgb(' +\r\n\t\t\t\t\tMath.round(rgb[0]) + ',' +\r\n\t\t\t\t\tMath.round(rgb[1]) + ',' +\r\n\t\t\t\t\tMath.round(rgb[2]) + ')';\r\n\t\t\t\tvar color2 = '#000';\r\n\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction redrawSld () {\r\n\t\t\tvar sldComponent = jsc.getSliderComponent(THIS);\r\n\t\t\tif (sldComponent) {\r\n\t\t\t\t// redraw the slider pointer\r\n\t\t\t\tswitch (sldComponent) {\r\n\t\t\t\tcase 's': var yComponent = 1; break;\r\n\t\t\t\tcase 'v': var yComponent = 2; break;\r\n\t\t\t\t}\r\n\t\t\t\tvar y = Math.round((1 - THIS.hsv[yComponent] / 100) * (THIS.height - 1));\r\n\t\t\t\tjsc.picker.sldPtrOB.style.top = (y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(sliderPtrSpace / 2)) + 'px';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction isPickerOwner () {\r\n\t\t\treturn jsc.picker && jsc.picker.owner === THIS;\r\n\t\t}\r\n\r\n\r\n\t\tfunction blurValue () {\r\n\t\t\tTHIS.importColor();\r\n\t\t}\r\n\r\n\r\n\t\t// Find the target element\r\n\t\tif (typeof targetElement === 'string') {\r\n\t\t\tvar id = targetElement;\r\n\t\t\tvar elm = document.getElementById(id);\r\n\t\t\tif (elm) {\r\n\t\t\t\tthis.targetElement = elm;\r\n\t\t\t} else {\r\n\t\t\t\tjsc.warn('Could not find target element with ID \\'' + id + '\\'');\r\n\t\t\t}\r\n\t\t} else if (targetElement) {\r\n\t\t\tthis.targetElement = targetElement;\r\n\t\t} else {\r\n\t\t\tjsc.warn('Invalid target element: \\'' + targetElement + '\\'');\r\n\t\t}\r\n\r\n\t\tif (this.targetElement._jscLinkedInstance) {\r\n\t\t\tjsc.warn('Cannot link jscolor twice to the same element. Skipping.');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.targetElement._jscLinkedInstance = this;\r\n\r\n\t\t// Find the value element\r\n\t\tthis.valueElement = jsc.fetchElement(this.valueElement);\r\n\t\t// Find the style element\r\n\t\tthis.styleElement = jsc.fetchElement(this.styleElement);\r\n\r\n\t\tvar THIS = this;\r\n\t\tvar container =\r\n\t\t\tthis.container ?\r\n\t\t\tjsc.fetchElement(this.container) :\r\n\t\t\tdocument.getElementsByTagName('body')[0];\r\n\t\tvar sliderPtrSpace = 3; // px\r\n\r\n\t\t// For BUTTON elements it's important to stop them from sending the form when clicked\r\n\t\t// (e.g. in Safari)\r\n\t\tif (jsc.isElementType(this.targetElement, 'button')) {\r\n\t\t\tif (this.targetElement.onclick) {\r\n\t\t\t\tvar origCallback = this.targetElement.onclick;\r\n\t\t\t\tthis.targetElement.onclick = function (evt) {\r\n\t\t\t\t\torigCallback.call(this, evt);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tthis.targetElement.onclick = function () { return false; };\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\tvar elm = this.targetElement;\r\n\t\tdo {\r\n\t\t\t// If the target element or one of its offsetParents has fixed position,\r\n\t\t\t// then use fixed positioning instead\r\n\t\t\t//\r\n\t\t\t// Note: In Firefox, getComputedStyle returns null in a hidden iframe,\r\n\t\t\t// that's why we need to check if the returned style object is non-empty\r\n\t\t\tvar currStyle = jsc.getStyle(elm);\r\n\t\t\tif (currStyle && currStyle.position.toLowerCase() === 'fixed') {\r\n\t\t\t\tthis.fixed = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (elm !== this.targetElement) {\r\n\t\t\t\t// attach onParentScroll so that we can recompute the picker position\r\n\t\t\t\t// when one of the offsetParents is scrolled\r\n\t\t\t\tif (!elm._jscEventsAttached) {\r\n\t\t\t\t\tjsc.attachEvent(elm, 'scroll', jsc.onParentScroll);\r\n\t\t\t\t\telm._jscEventsAttached = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} while ((elm = elm.offsetParent) && !jsc.isElementType(elm, 'body'));\r\n\t\t*/\r\n\r\n\t\t// valueElement\r\n\t\tif (this.valueElement) {\r\n\t\t\tif (jsc.isElementType(this.valueElement, 'input')) {\r\n\t\t\t\tvar updateField = function () {\r\n\t\t\t\t\tTHIS.fromString(THIS.valueElement.value, jsc.leaveValue);\r\n\t\t\t\t\tjsc.dispatchFineChange(THIS);\r\n\t\t\t\t};\r\n\t\t\t\tjsc.attachEvent(this.valueElement, 'keyup', updateField);\r\n\t\t\t\tjsc.attachEvent(this.valueElement, 'input', updateField);\r\n\t\t\t\tjsc.attachEvent(this.valueElement, 'blur', blurValue);\r\n\t\t\t\tthis.valueElement.setAttribute('autocomplete', 'off');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// styleElement\r\n\t\tif (this.styleElement) {\r\n\t\t\tthis.styleElement._jscOrigStyle = {\r\n\t\t\t\tbackgroundImage : this.styleElement.style.backgroundImage,\r\n\t\t\t\tbackgroundColor : this.styleElement.style.backgroundColor,\r\n\t\t\t\tcolor : this.styleElement.style.color\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (this.value) {\r\n\t\t\t// Try to set the color from the .value option and if unsuccessful,\r\n\t\t\t// export the current color\r\n\t\t\tthis.fromString(this.value) || this.exportColor();\r\n\t\t} else {\r\n\t\t\tthis.importColor();\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\n\r\n//================================\r\n// Public properties and methods\r\n//================================\r\n\r\n\r\n// By default, search for all elements with class=\"jscolor\" and install a color picker on them.\r\n//\r\n// You can change what class name will be looked for by setting the property jscolor.lookupClass\r\n// anywhere in your HTML document. To completely disable the automatic lookup, set it to null.\r\n//\r\njsc.jscolor.lookupClass = 'jscolor';\r\n\r\n\r\njsc.jscolor.installByClassName = function (className) {\r\n\tvar inputElms = document.getElementsByTagName('input');\r\n\tvar buttonElms = document.getElementsByTagName('button');\r\n\r\n\tjsc.tryInstallOnElements(inputElms, className);\r\n\tjsc.tryInstallOnElements(buttonElms, className);\r\n};\r\n\r\n\r\njsc.register();\r\n\r\n\r\nreturn jsc.jscolor;\r\n\r\n\r\n})(); }\r\n"]},"metadata":{},"sourceType":"module"}